it's quite clear from the first of these that we've put out that people love the lego model or at least a lot of people do find it useful so yeah, we want to take it on a bit further today we have this pre-prepared linked list of barbecue items which are all in alphabetical order and last time we covered about how would you insert a new item? into this list if it was something that you'd forgotten to buy and you bought it later this thing called p is pointing at exactly the same structure at the head of the list as start is so we now have got the problem of inserting burgers alphabetically into this thing list now doing that with conventional techniques well, we covered that before and it it's ok it works, but it's somewhat messy i wasn't happy - never have been happy over the years with the way that that's done in the conventional single level pointer technique is there anything you can do that's better? well yes, there is this came about or was made clear to me many years ago now in that... i, as many of you know originally did this in a language in the early 70s called algol 68 and the people who had done the algol 68 compiler for the machine we were working on was the royal radar establishment in malvern in the uk and one or other people there who did that compiler could be subhan kuba phillip would would just said to me and my colleague annie walker at the time. they said you're teaching this stuff now you do realize that algol 68 can do the triple ref technique? which previously has only been available to assembler programmers? we said really can it yes? and yes, it can so what on earth is this well despite that technical name it's actually a pointers to pointers technique it's very powerful, and you might think well if you've got pointers why on earth would you want pointers to pointers? well the strange thing about this and the really remarkable thing is that in the end it makes your procedure for doing things simpler not more complicated so what do we do? well, we've got burgers here and we're going to try and put it into the correct place just as before but instead of using a previous single level pointer and then having to say well it's all very well they can probe what the strings are but what you had is the problem was you've forgotten the way you came from and when you splice burgers into this list you need to know what's ahead of you but you need to know where you came from it's the previous blue box and if you're not careful you lose any way of getting on that, so if you look at my solution using traditional techniques i carefully keep a second pointer to remember where it came from this will no longer be necessary here we go we introduce a thing which i'm going to call tracer tracers contents are of type pointer to pointer to things so the way you declare that in c, is it's a thing** because we declare things by their contents in c so inside tracer is a thing **. it's a pointer to a pointer to a thing so therefore it's absolutely right that you can make and look at this piece of chain here. that's to say that a pointer to a pointer although it's a pointer is not the same thing as a single-level pointer to a thing it's perfectly okay for me to attach that to there and saying that the contents of tracer is a pointer to a pointer to a thing so i'm pointing to the address of a box which inside it has got a pointer to the thing which in this case is the head of the list. you basically use a technique known as casting of pointers, you can take a jump you can dereference you can follow the link you can either do it once to get to here or when you've got to there, you can jump the pointer again and get on to an actual thing at the head of the list so it's two steps removed. yeah, so starting here you jump there you then you look along the black hose and you say i'm looking at something called beer, and i want to put in my thing here which is burger and the idea of this is always that you insert ahead alphabetically of where you are if that's what fits. no burger isn't earlier than beer in the alphabet it's later than beer so what you have to do now is to try and look ahead at the next thing which we will discover is chips now here's the really cool thing about using the tracer pointer to pointer technique is that if inspecting beers had no we've not gone far enough yet? what we now do instead of awkwardly moving our single level pointer down the list is take this blessed a great link and do wait for it folks. this is absolutely cool. ok if i made tracer originally point at a blue box because type wise it was right then it follows that all of these blue boxes in turn i can make it point through those to take a peek at the next one down in the list it's as simple as that you see: type theory by colors a green thing can point at the blue thing, but it can't point directly at a red thing so you look at this and you think? well by the principle of colored lego type theory if i can make the green thing point it's any blue thing i can do that, and then you say, but what does that imply in the program? it's implies in the program that you've got to be able to find the address of a blue box that's embedded within a particular thing structure and now look what you could then do is you start with tracer. you jump to that box but then you jump down the firemen's hose and you can take a look and you see that the next thing is chips you see wow i've just seen beer i'm looking ahead by this sneaky technique, and i see chips. that's where i belong i want the burger thing in there, so this is completely magic but does it generalize? and does it work? and the answer is yes it does because by stepping one step backwards and going through an intermediate blue box before you do anything the crucial advantage it gives you is that having decided that burgers does belong in here? the problem we previously had of saying where the heck did i come from is solved because tracer is still pointing at it so you say to tracer let me dereference you once and i've then got the address of the box i want to alter so that it points at the burger thing and we end up just like we did i think last time but using the tracer technique of saying there goes burguer. we know we're in the right place, and if you remember we constructed let's get this right do the long one first that one goes here, and then finally you when you complete this splicing in operation by taking that pointer the previously came off the beer thing turning it round and putting it on the blue box there, so job done, but the big point is that you were able to keep half a finger on where you came from? that's the thing. at the same time as using that to look ahead and say yes, alphabetically i'm correct i'm after beer and before chips. it's like standing at a road sign and knowing that you're standing in london yeah. but the road sign says bristol. yes. you're standing at the point to where it's pointing that we see both those things actually. 
precisely so, that's right. so let's just take a quick look and honestly there's very daring of me i've actually put out the routine that does this in c and will provide this for you if you don't believe that this works just compile the program. i give you and run it and say wow it does work