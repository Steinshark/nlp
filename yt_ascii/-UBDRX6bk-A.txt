i'd like to tell you about a problem that's 
very famous in some circles; i've seen it   used as like an interview question for 
admissions tests, but i've also seen it just   as a puzzle. i would like you to imagine brady 
there are 100 light switches in front of you.  at the moment they're all off. the first 
person comes along and turns them all on. the second person turns 
every second light switch off. the third person deals with every third light 
switch - in that they don't just turn them on   or off, if they're on they'll turn them off 
and if they're off they'll turn them on. and   the fourth person deals with every fourth light 
switch, the fifth person deals with every fifth   light switch - i suspect you have the pattern. and 
that continues for 100 people. that's the   setup, the question which probably you've already 
arrived at: what happens at the end? which light   switches are on when 100 people have done this thing?
- (brady: so the 100th person just comes on and)   (changes the state of the 100th switch?)
- i've said this before brady, you're a pleasure to   work with. you're already thinking of the extremes 
of the problem, and it's a really good approach to   anything you're not sure about, you sort of jump 
to the extreme thing. the 100th person is going   to deal with every 100th light switch which in 
this particular sample is just the last one in   our lot. after a moment's thought you might realise 
that anyone beyond the 50th switch is only going   to have to deal with one switch because they're- 
sort of the next multiple is is out of our sample. but that- we've done the setup, so as ever in 
a good puzzle, if you want to actually go and think about it, now is a good time. which light 
switches are on after 100 people have been through? do you have any thoughts about the sort of 
numbers we're going to have to talk about in   this problem?
- (obviously the further we go the 
early lights are frozen in time, they're not) (going to get changed anymore.)
- so after the fourth 
person's been through are you- what are you saying   the first four lights? 
- (yeah)
- they're not going to change again? if you could sort out what   happens for the first 10 and get a picture of 
what's left on then maybe you get a clue about   what's happening. so i want to show you some of 
the answer - spoiler coming - here's the situation;   all the lights are on now, first person's gone 
in and turned all the lights on, so 100 lights   on. and person 2 comes in and turns every other 
light off because they were all on. just because   it gets harder to see what happens next i'll do 
the third person and this pattern emerges which   is maybe not too difficult to arrive at after a bit of thought 
but then as soon as you put the fourth person in-   me personally i feel slightly surprised about the 
pan and i didn't expect sort of a 5 and then a   double gap and then a single gap and- and after 
that the pattern maybe is very hard to predict   and we've got to go all through 100 here. so 
that's my first spoiler, but what you said is   nice because you know that after the first four 
people have gone through those four are not gonna   change again. so i'm gonna claim that maybe number 
1 and number 4 are on. if i go one more - and this is the   last spoiler i'm gonna give before i give it 
away - 5 has gone off and 5 is never going   to change again. but the pattern now is really 
even quite hard to spot, i think if you look   long enough you can see something repeating 
but the repeat in the pattern is getting longer   each time. and i sort of dread to try and predict 
what happens by this method if i go much further.   so we should maybe generalise and figure out what 
is going to make a light switch turn on or off,  and how many times, and is it going to be off or 
on by the end. every time i've pose this problem   with people - and i'm curious to know if you're the 
same or if anyone watching is the same - people have   mentioned a certain type of number to me that 
seems to be important, which are prime numbers.   do they feel like they have any bearing on this? 
- (i wouldn't have thought so)
- well the interesting   thing about it is that if a number is switched 
it's because the person going in has- their their   number is a factor of that number. so in that sense 
factors or divisors are going to be important here. it's a slightly dead end here, so if you imagine 
a prime like the number 5; we've already   established from our little example here the number 5 
is off, it's never getting changed again, so maybe   we could conjecture that primes are going to be 
off? and indeed if you look at earlier primes, 2   and 3 are indeed off. and the rest we're not 
sure about, but we could for example think of the   number 7 - let me just write down a fact you 
know about 7. those are the factors of 7, because it's prime it only has two factors. if it 
only has two factors, only two people are going   to switch that switch, the first person and the seventh 
person. therefore i think it's not a million miles   away for anyone to lead to the conclusion that 
it will be off. because it's been turned off on   by the first person and then off by the seventh. 
in fact any prime is going to do that because it   only gets touched twice. 
- (so primes are always off?)
- yes but if we look at the number 6 for   example - and i could i could do it on the demo 
but maybe it's easier to think about how we   could do it, i'm going to write this down. who's 
going to uh- who's going to hit number 6? well   this is obvious, but i can also write it in another 
way. and i think what i've kind of pointed out the   long way around is that 6 has four factors, or 
four divisors. i'm going to ask you to make the leap-   if if it's going to get hit by person 1 because 
that's a factor, person 2, person 3, and person   6 - what will happen by the end for number 6? 
- (so 1 turns it on, 2 turns it off, 3) (turns it on, 6 turns it off.)
- yeah.
- (so if it has an even number of factors it ends up off? if it has) (an even number of divisors it ends up off)
- i think you just said the same thing twice using two   different words that people use for the same thing; 
divisors, factors - i think maybe us and uk differ,  divide in fact about how they they choose. 
but factors are divisors- i mean the numbers that   divide exactly into another. and you're right, 6
ends up off, and if you want to check let's do the   experiment. sixth person's gone in, number 6 is 
off, and our conjecture so far that 6 should be   off is correct. and you made it even more general, 
an even number of factors and the light will be off   by the end, okay. let me give you another bonus fact 
which maybe is obvious - factors come in pairs. 
- (right...) (so does every number have an even number of- no 
it doesn't, because we see that 4 is on- hang on)   i'm really glad you've said the word hang on 
here, this should be the mathematical moment,  because factors come in pairs.
- (oh but they can be duplicate pairs, can't they?)
- when would that happen? (like 2 times 2, 4)
- so if i wrote down 4, all right, 
i could write it down as 1 times 4. i could   also write it as 2 times 2, but the duplication 
here has meant there's actually only three factors. good! we're making progress, we've established why i 
think number 4 is left on. you're doing so well   so far. what would be the next light that stays on?
- (a square number)
- do you want to pick your favourite   square that's not been done? 
- (well 9?) 
- 9 is the next one, should we check it? i mean, having a   an ability to experiment like this by the way 
is underrated i think in mathematics. a lot   of people think you should be doing it all in your head 
but just experimenting and testing your conjectures   is nice. so let's do it, 7, 7 is off, 8- and 9 is already off. so when i put the ninth   person in, lo and behold, 9 is on. and if we check 
it right, 9, you can write it as 1 times 9, how else can you write it? well it's not 2 times 
anything but it is 3 times 3 and that's it.  in fact if you're checking factors you only ever 
need to check up to the square root of a number   before you should probably stop wasting your time 
and checking anymore. and how many factors? well,   one, two, three. conjectures so far? squares are looking good?
- (squares, odd- numbers numbers) (with an odd number of factors. anything that 
has a times itself, unless that does it twice.) (unless it has two two numbers that can do it.)
- well, we- already 
you've kind of talked yourself into the square   numbers are apparently going to be on because 
of the duplication, but now you're worried   about whether that happens twice if it's going 
to change it. so maybe we should try an example.   can you think of it- a square of a square? i'm 
asking you to do so much while you're holding the   camera. uh 4 is square, and you could square 
4 to get still a relatively low number,   4 times 4 - so we should check 16. 
- (let's check 16.)
- do you want to try on paper before we actually? (yeah, let's do it on paper.)
- so 16. 
- (1 times 16.) nice, brady keep going. 
- (4 times 4 times, 2 times 8) nice, because if we if we go up in a sort of nice 
pattern we'll know when we've got them all. 3 times i   don't think is going to work, and 4 times 4.
first things first, is it a square? yes, it's got   this duplicated. so were you expecting to see more 
here?
- (no but i don't know whether the fact that) (you can expand that to 2 times 2 times 2
means anything - probably not.)
- well what we should   be doing here is bearing in mind something which 
sounds important called the fundamental theorem   of arithmetic. the fundamental theorem of arithmetic 
says that every number has a unique prime factor   decomposition. so we're writing down factors, 
not prime factors, and there's more than one   way of writing them down which is kind of what 
we're using, but every number has a unique way of   writing it in primes - and you probably know that. 
and maybe that's going to help us because that's   kind of to do with what you're pointing out here, 
that you could expand the 8 into 2 times   2 times 2. so let's just do the prime factor 
decomposition of 16. uh, it's just 2 to the 4. if   you break all these down to primes you're just left 
with that. 9 is 3 squared. if we jump say to-   let's do 24, not a square number, let's see what it 
decomposes as. well let's just do the old-fashioned   way: 1 times 24, 2 times 12, 3 times 8, 4 times 
6 and then we're done. interestingly they're   coming in pairs still, and if you write it as a 
prime factor decomposition it's going to be 2 times 12 - but 12 is 2 times 6 and 6 is 2 times 
3 - so it's that and i would write it as 2   cubed times 3. so it's worth, i think, 
whenever you're working with a problem   that has factors involved, noting the difference 
between factors or divisors and prime factors. and i think you've already got to the heart of 
this. and i guarantee some people are watching   this video, they're like we've got there straight 
away because if you spot the one thing which you   have already spotted, this becomes a number theory 
question. and you said it, the numbers with an odd   number of factors are going to be on and the 
ones with an even number are going to be off.   so it becomes, which numbers have an odd number of 
factors? we've already established by experimenting   that squares appear to, but is only them? and do 
some squares not? well we've checked the 16.   let me give one spoiler, the only numbers that 
have an odd number of factors are the squares.   which i think we should dive into to finish 
this video, but if that's true can you predict   which lights are going to be on at the end of our story? 
- (well we did 2 squared, 3 squared, 4 squared - 25, 36.)   should we just animate it and see? i mean 
there's two things to watch out for: which one's   turn on by the end and the patterns we get 
along the way which, even if you've done   this problem before, maybe you haven't seen this 
before and it's quite it's quite pleasing so   let's just animate and see how that goes. 16, 25 
is on, 36 is on, 49's looking good brady. 64, 81, and 100. congratulations; even though i don't 
think you said it, you told me the equivalent   statement which is the numbers with an odd number 
of factors are on. and this surprises some people-   (the square numbers, i would never have guessed that at the start.)
- no, and a lot of people immediately   say this problem, they're like oh it's gonna be 
to do with the primes, which is why i mentioned   that earlier. which i think is why people like 
it as an interview style question because it has   that slightly unexpected - squares are something 
to do with factors? but they are and it's quite a   nice profound number theory fact that i haven't 
proved yet: it is only the squares that have an   odd number of factors. and maybe we should prove 
that - are you up for that?
- (yeah, because i want to)   (figure out whether or not this was a complete red 
herring, the fundamental theorem of- )
- yeah, well now   we've established that because of the on and off 
nature it's- you'd need an odd number of facts of   factors for it to stay on; and crucially all factors come 
in pairs, because that's what factors do, and you   spotted the crucial thing is that that only breaks 
down when you have a duplication, that's where the   count changes. but let's prove it a little bit 
more formally and i'll try to give us our   space down here.
- (do you want more paper?)
- i don't think we need more paper, brady. let's   do it with 24 as an example. so 24 is 2 cubed 
times 3. that's its prime decomposition and   that's almost always a good place to start. let 
me point out how you'd figure from that how to   count the factors. now we've done it, and there 
aren't very many, but if this was a huge number   i don't think i'd want to list them by hand. so if 
this is its prime factor decomposition, a factor   must be some subset of numbers in that, otherwise 
it wouldn't multiply it together. so i could for   example pull out 2, a 2 is in there, agreed? i 
could pull out two of the 2s and i could go up   to three of the 2s but if i tried to put four 
2s it's not in here so it's not a subset. and i   could pull out a 2 with a 3, or i could pull 
out the 3 on its own and then - have we done   them all? one, two, three, four, five - i think there 
should be a few more factors, what have i missed?   well i could pull out 2 squared with the 
3, i could put out 2 cubed with the 3,   and there's got to be a better way to 
count this. so what i've- i've got 2  times 3, 2 squared with the 3, 2 cubed times 
a 3 - that's the full one. what have i missed?  there should be eight. i'm thinking there are eight 
over here, and i'm wondering if it's obvious.   (so the- the number its- what about the number itself and 1?)
- well that's- that's there, the number itself,   but you're right, the 1 is the hard one to spot 
because it's kind of the weird subset of this.   and so here's what's happening, i'm choosing 
some of the numbers in the list to make a factor;   and actually the only way i can do it is is 
controlled by the power here, there's actually   a power 1 here that's kind of invisible. and 
i can go- i could do any of the numbers up to   3 - including 0. so to make this a bit more 
obvious, i could have 2 to the 0, i could have   2 to the 1, i could have 2 to the 2, and i 
can have 2 to 3 in the mix. and i can have   3 to the 0 or 3 to the 1 in the mix. and any combination gives me one of the factors. so that's it, it's just how many options do i 
have for that which is always going to be one   more than that number; and how many options do 
i have for that? so if we're going to generalise -   i'd like a piece of paper.
- (told you!)
- now we've got an appropriately fresh piece of paper to   generalise on, i'm going to write down for some 
number n you can always write it as a product of primes. let's call them p1 and p2 and p3 and so 
on, what should we go up to, pk? are you happy with   that so far? and to condense the notation, like some 
of these primes might be the same, so let's- you   can put them as a power so let's call this c1, 
c2 - and these are the indices of the powers - and ck.   that- every number can be written like that. some 
of these don't exist, but we just pointed out on   the previous page that it's the number of options 
you have for each prime that controls it. so we had   3 there before but we had four options for 
the 2. there's 2 to the 0, 2 to the 1, 2 to the 2 and   2 the 3. so c1 plus 1 options for how 
many of that prime to include. but then completely   separately there's the options here; so you can 
multiply- like whatever you do there, you can do   a different option here, so i've got c2 plus 1,
c3 plus 1, all the way to ck plus 1. and the   number of factors is well defined as this: it's 
the product of the powers of the prime factors   plus 1. which means we are almost within grasp 
of proving your conjecture earlier, which is that   it's only the squares which have an odd number.
so the square numbers will have one integer   which multiplies by itself to give you that number,
that's the definition of a square, which means when   you look at its prime factors they will always 
come in duplicates, there will always be a   prime squared or to the power of 4 - it will be 
an even power. otherwise you couldn't split it in   half. which means all of these numbers are even in 
a square, which means if you add 1 to them all; for a square number all odd. all of these will 
be odd. which means the product of them all   is odd. and we can also see kind 
of the reverse: if any one of them   was odd originally at the top then adding 1 
to it would make it even, and we would actually   just get an even number here. which is why you 
normally get an even number, factors come in   pairs, it only takes one of them to break it, because 
a product of anything with an even number is also   even. the only time they end up all odd is if 
you had a square to start with - and we're done.  the answer to the puzzle of the light 
switches is it's the squares that stay on.   there are lots of other questions you could ask 
if you want to explore which is, how many times   does each switch get switched? and that is just 
its number of factors. do some get switched-   which light switch is going to break first if 
you repeatedly have fun with this! and that's   less obvious because it's asking which numbers 
have lots of factors, and i don't think we have a   very good intuition about this. we know the primes 
don't have many factors, but some factors- some   numbers have lots of factors. so actually this 
this puzzle hinges on a really important sequence   called tau or sigma - it's important enough to have 
a name - which is the number of divisors of a number. and if you look it up on the online encyclopedia 
of integer sequences it has the name a000005. (it's very early)
- the naming of the integer 
sequences, or the labelling, i don't quite   understand but it- however you name it, you've 
got to attach importance to the first ones;   even though the first one is something to do with 
groups. feels profound and the rest of them i'm   not quite sure i recognise. however number five 
is the sequence of the numbers of divisors of a   number. and if you look at the ones that have 
high number of devices it's numbers like 60,   60 is the first one to have 12 factors which 
we could check by doing this if you wanted to.  (so 6- is 60 the switch that gets switched 
the most in the first 100?)
- there are others   with 12 factors but it's the first one to get 
switched 12 times. it's what they call a highly   composite number, it's the first time that its 
number of factors beats all the ones before it. and i looked briefly up to this, and if you 
carried on to say 200 light switches, the number  '0 gets knobbled more than often than the others. 
and you start to recognise those numbers as the   ones we use to divide things which are helpful to 
have fractions for, like portions of a circle. you   won't be surprised to know that another highly 
composite number is 360. so we measure time in   60s, we measure angles in 360s; it's partly 
because of the number of factors here. i'm   glad you found a route to the nub of the 
problem here which is only the square numbers   have an odd number of factors, and that feels like 
a pleasing outcome to a potentially contrived puzzle. if you enjoyed that video, well you're going 
to love all the courses quizzes and puzzles   on brilliant. here's the leaning tower of lire, also 
known as the block stacking problem. it's part of   their superb 'calculus in a nutshell' course. it's 
great. and here's where brilliant really shines,   it's super interactive! you can really get hands-on 
with this stuff. there are thousands of lessons and   courses on brilliant, and new ones are being added 
all the time. from beginner to advanced mathematics,   computer science, ai, neural networks - this is a 
treat beyond compare for all level of learners. to check out brilliant yourself, maybe give 
it as a gift for the learner in your life,  go to brilliant.org/numberphile. that url,
which is also in the description, can get   you a discount on their premium subscription 
and there's also a 30-day free trial. thanks   brilliant for supporting numberphile and 
making such cool stuff on the internet.