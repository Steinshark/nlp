linkedin adopts protocol buffers for micro service integration and reduces latency up to 60 they must have had j diesel before this because that seems a lot linkedin adopted protocol buffers for exchanging data between microservices more efficiently across its platform and integrated it with restly their open source rest framer after the company-wide rollout they reduce the latency up to 60 improved resource utilization at the same time for those that don't know it takes a lot to decode json and the harder part about json is that it actually creates a lot of garbage along the way but something that people don't talk a lot about when it comes to protobufs is that protobufs are a greedy algorithm or not a greedy algorithm they are a parse or a full parse upfront required algorithm and so they are also they're not like a giant performance win they're definitely a performance win there's definitely an over the wire save there's definitely some some things there's a lot less reading of data right when you have a lot of keys and a lot of big keys it still costs a lot to do that but to be able to have a non-json or non-protocol buffer thing you can really have some save time but again you have to really fully know your data format once you take the next leap right the day the the trade-offs become real at that point and you can save a lot of money if you have a lot of traffic but the trade-offs become real and it does become a lot harder linkedin the linkedin platform employs by the way i hate linkedin uh but it's dude the worst part is linkedin's kind of necessary if you don't have a job yet and you're trying to get a break into the software industry get a linkedin but man don't don't linkedin do suck the linkedin platform employs a micro services architecture for years now jason has been the used as the serialization format for over 50 000 api endpoints what 50 000. the internet was a mistake to help their teams build consistent interactions between services the company created a java framework called wrestling which became open source the framework helped create servers and clients that use restyle communication and abstracts away many of the apps aspects of data exchange so pretty much grpc including network serialization or server server discovery oh service discovery interesting they put that in there it primarily supports a java and python but can also work with scala kotlin javascript deez nuts and go okay zookeeper discover announce zookeeper data control flows okay very cool so you have this whole like client request builder okay we got a little builder pattern do all this get all this stuff cool json is the default serialization format in wrestling has been selected due to its wide language support and being human readable you know it's very bizarre that in this day and age we still have human readable as like a format required for data exchange just feels weird i feel like there should have i feel like something else should have happened by now galactus oh is this where galactus comes from but i heard galactus still can't get is still not ready the last property however beneficial however beneficial introduces problem with performance yeah in particular and particularly latency point of view yeah let's see these two engineers at linkedin share challenges with using json enter service communication yeah he also types are really sucky if you have different languages it's really sucky i actually really do prefer protobufs for for a lot of this i think that the world would have been a lot better place if we would have leaned into something like protobufs maybe protobufs ain't it but still it would have been really great because the thing about it is that you get language independent typing which i think is just really important that way if you use go in the front end uses javascript you share types you know captain proto is like a really good version of it because captain proto if i'm not mistaken is a a non-full parse required format which is like super important type messages are super important i'm totally on type typed messages and i really like the idea of like better performance and so if i don't have to drop readable format and i can have good performance it's beautiful because remember with protobufs you can flip the switch and send json remember that so you can just do fully readable format and then flip it back and have it the non-readable format that's just more efficient for computers in general you know what i mean the amount of energy being wasted on jason power country you're actually pro you're probably not wrong the team has been considering alternatives to json looking for compact payload size and high sterilization efficiency to reduce latency and increase throughput they also didn't want the to limit the number of supported languages language stacks and enable gradual migrations by integrating the new serialization mechanism into wrestling finally after a comprehensive review they decided to go with protocol buffers okay which scored the highest based on the defined criteria interesting i wonder if they did captain proto or not the main difficulty around integrating protocol buffers into wrestling was the dynamic schema generated based on the framework's custom schema definition system yikes pdl for probably gonna regret this the solution involves generating a symbol table that was used to generate protocol buffers sema schema definitions wow double generation dynamically but the method for delivering simple tables vary depending on the type of client yikes back in clients fetched and cash symbol tables on demand while web and mobile client apps symbol tables are generated at build time and include as version dependencies you should always version of your very first field of every protocol buffer should be a version right after changes to the framework were rolled out the team gradually reconfigured the clients to enable proto protobufs instead of just on using http headers the result of the protocol buffer adoption was an average increase in throughput by 6.52 percent in responses and 1.77 for requests the team also observed up to a 60 latency reduction for large payloads like people don't realize how important this is you got to remember when you can do when when you're serving millions upon millions upon millions of people a billion requests a day when you can have a machine become more efficient like the amount of money you save a year becomes really important i know most people's projects have no users i'm sorry you're no user application you probably don't need it just like i don't think you need to plan for every single thing you have to be a micro service and a no user application right you can start simple i get it i'm on your team but you know at some point making the change can can mean a lot of things you know based on the learnings from the protocol buffers rollout the team is planning to follow up with the migration from wrestling to rpc that's a good choice i like this which also uses it because it also has a it also like the the typescript version comes with async iterators like nice grpc is really you really nice to use honestly i've been loving using grpc and using it within my applications lately it's been really good it's super simple to use i i use it to just talk to the endpoints it's honestly just really nice you know it's really really nice i'm shockingly liking it i didn't think i was gonna like it that much i am which uses protocol buffers but additionally supports streaming it has a large community to buy it yeah the streaming is really cool so i use it for live data acquisition i i we live stream out data and so that way i can display it to the user and i'm even working right right when i get done with this i'm literally working on visualization of streaming data from grpc endpoints into into it pretty fun pretty cool stuff really appreciate it i really like it this is a great thing and i think people just you know it's shocking how little people how little engineers know that there's alternatives to json other than xml like when you say if you go on the internet and you go like this what what can you use other than json most the answers will be xml it's just surprising see i didn't know about it this until today yeah there's like there's an entire world that exists remember the world could never afford a jaison until like the the 2000s you know like we didn't have computers powerful enough to do that i know you guys are a bunch of trolls and you're going to be saying like protobufs xml xml csv i like that last one csv that's the format you're looking for the name you should probably consider using protobufs they're pretty cool and grpc is actually pretty cool i i didn't think i was going to love grpcs but i am definitely loving grpcs a lot a lot more and so you know maybe you should consider it you know giving it a try again