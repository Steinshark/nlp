in today's video i'm going to be going over the process of how i made my recent iron man 3 suit up video in blender and hopefully by the end of the video you'll know how to do it as well [music] [music] [music] [applause] for me really there's three main things that i had to really get right in this video to make it stand out from the previous iron man videos that i'd done if i look at the previous one which was done just over two years ago i think the animation and everything was pretty good in this one like all of this stuff was pretty cool but for me the model was pretty low poly so it looked a bit gamey and secondly the materials aren't quite right so really what i strive to do for this video was make the suitors photo realistic as possible and i hope that you would agree that it got pretty close this time i still wouldn't go as far as to say it's exactly photo realistic but i think based on the fact that it was made by just one person over the course of a few weeks it really stands out among all the other homemade iron man videos on the internet the first part of that is like i said the model this model is much much more detailed it's got loads more intricate parts and it's also much more high poly so none of the pieces even when you get close-ups of them near the camera feel like they're from a game or something and it's just been ripped this model was made by chavez david i hope i'm saying that correctly it might be chavez like i said at the end of the actual video this model along with all the materials and everything and the rig are available in the one dollar tier on my patreon as well as all the files from all of my previous videos so anyway back on track the model is the first thing that makes a massive difference the second thing is the actual materials and this time i tried to go a little bit more subtle with all of the damage and the wear you can see if i get in close it's not perfectly clean there are some scratches and some dents and stuff where the paints come off and there's some chips but generally i didn't want it to be too crazy there's only really three main materials on the suit there's the gold color there's the chrome and then there's the red so this is the chrome this is probably one of the least complicated ones this is for areas like the elbows here it's basically just a combination of a few different image textures so we've got some surface imperfections and stuff here which i'm using for the albedo and the roughness i'm also using this brush metal texture it's actually really fine and the uvs are a bit mad for these pots but it works quite well when it's combined with everything else and then there's a normal map as well which again is for the brushed metal and all of those things combined make this look the gold is pretty much the same thing but it uses some more image textures and as well as that i've got the scratches on this a lot of these materials the secret is really just layering stuff on top of it there's no real like one image texture or node that's really doing all the heavy lifting it's lots of small things combining and then the red is kind of like a car paint shader that i made so the basis of it is like a verona texture and i'm using that to kind of recreate the metal flecks and stuff you get in car paint so it goes through a color ramp and then i'm using that on the roughness and i'm also using it going into the albedo over a red rgb node so you can see this is like the flat red and then this is combining it with the veronoi which just adds a little bit of detail into the albedo and i'm not using any bump maps or anything on this so i want it to be fairly smooth like a sports car and that's all the textures for the suit and the final thing that makes a really big difference is i actually took a custom hdri while i was on set filming this with cameron so if i turn off the transparent background you can see that this hdri is actually in the car park where we filmed it so i've got absolutely perfect reference for the intensity of the lights and the ones that are above so there's these like tube lights in the ceiling and as well as where the lights are it's also reflecting all of the details of the brickwork and everything around it so when you look at the suit in that environment it's reflecting all the stuff around it and really helps to bed it in i also did a much more professional workflow on this shoot which i've never bothered doing before for any of my youtube videos and that involves using a color chart and then color matching the hdri in terms of intensity and color values to the actual plate the way this works is you have the color chart in the frame for the hdri and you can see it on the floor down here and then we also got a plate of me holding it out in front of the camera where the suit is going to be in the shot the reason for doing this is that the footage was filmed in log it's not currently in log because i converted it in davinci resolve but the original source files are actually much flatter than this but the hdri was shot with no color profiles so it's much more contrasty so it's very difficult to get the colors in the same space if you're working in two different color spaces so to minimize the guesswork i exported the plate from davinci resolve in asus cg so it's a color conversion which puts it in a more vfx friendly color space and then i did the same thing with the hdri so i exported it from pt gui as an asus z exr now both of these should theoretically be in the same color space and that means now if i get the color values from the two charts and the different shots to match then the hdri will be exactly the correct color and i should have to do very little color work in compositing because the cg will come out of the render basically with the correct color values and intensity already jacob from inlight vfx has a really good video on this that i'm going to put a link to in the description it goes into much more detail about it i highly recommend giving that a watch he explains it really well to summarize all of that fairly quickly i took the shot of me holding the color chart and i sampled the value of the middle gray square which is this one here i then made a note of the red green and blue color channels down here and put them in this sticky note and then the idea is that you want to get the hdri color values to match this exactly so if i look at this before i did any of the color matching it looks like this you can see it's much warmer than the plate and this is with the correction so you can see before after so all that entails is i used a multiply node in nuke and i just changed the red green and blue values individually until i got this middle gray box to match the color of the plate then back in blender what you can do is bring in the h 0i so i've already got mine in here currently my strength is set to 20 which is just a rough guess i kind of eyeballed how bright it should be but to get it completely correct and mathematically accurate what you can do is bring in that same color chart in the same asus cg color space i can render a single frame and then sample the color values the middle gray in blender compared to nuke you can do that by holding ctrl and right clicking and you can see the color values appear at the bottom so currently my values are a bit too bright so essentially i just need to drop the exposure down of the hdri until this color value matches in this case i found that the correct value is 14.25 this is now theoretically the mathematically correct exposure compared to the plate and like i was saying earlier it takes all the guesswork out so now the colors and the exposure are perfect with the cg and so if i open up one of the comps you'll see that i had to do very very little in terms of color correction for this last shot in particular this is what the cg looks like initially then there's just a slight exposure shift making it a little bit brighter and i'm lifting the gamma ever so slightly as well then for pretty much all of them i use cryptomatch just to tweak the colors a little bit per shot so you can see it's super simple and then finally i just adjust the black point just to get that in the correct place as well i've got a new trick that i've started using recently for getting the black point pretty accurate on all of my cg shots the way to do it is you add a grade node onto your cg so i'll just disable this one for now and you look at your plate turn the gain all the way up so you can see where the darkest parts of the shot are i'm going to use this black plastic box down here as it's one of the darkest things in the frame then you take your black point color picker and just color pick this section of the frame now if i look at the grade and turn it on and off you can see it's actually making it much darker but the final step is you turn on the reverse tick box in the grade node which essentially does the inverse of the black point adjustment if i gain the viewport back up now you can see the before and after the black point now matches the background much better probably a little bit magentory there i've done this in a rush but you can see the actual one that i did looks pretty accurate and so that technique of using the color chart really helped me to streamline the process of getting the cg to look photo real and be the correct values and everything in the shots and then it's just a little bit of defocus just to remove that pin sharp quality from the render i put a very subtle exponential glow on this one was to make the highlights and the reflections on the suit just bloom a little bit and then i did a second exponential glow just specifically on the chest arc reactor so that whole process is how i got the suit to look so good and bed into the shot so well with minimal work that's the kind of technical stuff now i guess let's talk about how i did some of the animation i knew before i'd even started that the biggest challenge going into this project was going to be doing the object tracking of the body i did dabble originally with some ai motion capture stuff that takes the motion from the footage and gives you a rig that kind of works but it just wasn't accurate enough so i ended up doing it all by hand which was quite an evolved process i did a couple of shots first of all where i just animated it all completely by hand and they looked okay in blender and then when i watched them back i could see that the animation was just slipping all over the place like the shoulder pads weren't sticking it was really difficult so after doing those first couple that weren't very successful i decided to do a different approach which ended up working much much better so the main movement for all of the pieces is based off an object track that i just did which is one point and that's in this case this empty here so for example if i go into the movie clip editor i can show that i did a one point object track on my torso which gives the main movement and even though there's no rotation or anything it's all the high frequency translation that goes up and down and side to side it's very difficult to animate by hand frame by frame so once i did that track at one point you go into the solve tab and under geometry press link empty to track this puts an empty in 3d space that's completely locked to the camera's perspective so if i press g and try and move it you can only move it further away or closer to the camera in this case i know where it needs to be because i have a 3d track of my shot here and then i can just move this object track back until it's in the correct place in 3d space i'll delete this one because i've actually already got one in the scene which is this one here and then from there what i did is i took in this case the torso bone which is this one here and i added a child of constraint onto it and parented it to the chest track so now what happens is that the torso will actually follow that object track like i said before it's not perfect because there's no rotational scale difference or anything it's just a one point in space and it's moving left and right and up and down but it does a lot of the heavy lifting in terms of getting the high frequency motion correct and then you can see here i've just got keyframes on top of it that do any correctional movement so for example there's a bit here where i actually step forward towards the camera so i've got some keyframes where you can see in 3d space where i've moved the torso to actually move forward but in general the object track is doing a lot of the work for me you can see in shots like this even when the suit's not on me i've still got a 3d double that's actually parented to the rig at the beginning of animating each shot this was a full 3d model so it had arms and legs and a head as well and then if i didn't need the different pieces i would just delete them so for example i didn't need the legs and head in this shot and they were causing some problems with the shadow catcher so i just deleted those vertices but essentially the first step was animating the rig without the suit on it and just this 3d double and getting that to line up with my body it was pretty easy to see if it was working or not because the 3d double was a good representation of the outline it's a bit easier to see in shots like this in this case i've only got the arm i would do the object track just to get the main movement for each shot in this one for example you can see the empty object track is on this tracking marker which is a bit of tape that i put on my wrist then again i parented the hand bone onto that empty with a charred off constraint and then did any additional keyframes and corrections that i needed to make so that my arm was always lining up perfectly with with the cg double so you can see here there's not too many on this one it worked pretty well and then once all the animation was done the base mesh also serves as a shadow catcher so you can see here the suit is then casting shadows onto the arm geo which is set as a shadow catcher here and then when it's rendered that gives me a pass that i can use in nuke for the compositing to put the shadow on myself in the previous video i did all the shadows from the suit were just roto masks and 2d and nuke because i didn't go down the route of doing four shadow catches but for this one i wanted to really do it properly so i actually had base geo underneath the suit in all of the shots that was actually getting proper shadows on it from the suit and it would get the correct amount of ambient occlusion and everything because it was a proper 3d shadow catcher to make it as accurate as possible one of the other things i did is i actually projected the plate onto the shadow catcher so you can see it looks a bit nuts from this angle but from the camera's perspective it's basically just a piece of geo with my arm on it and this works especially well because the shadows interact differently depending on what's underneath them in terms of rendering i actually went pretty minimal for this project i had two renders for pretty much all the shots and then a couple had additional layers like the spot in the final shot this top file output node is the main beauty render and this has the rgba the transmission this is actually the emission for the repulsors there's some geometry inside of this repulsor that actually has an emission shader on it but i also put some glass over the top of it and i turn the roughness up a little bit so you get this kind of cool frosted glass look i think it looks a lot nicer than having the emission shader because you actually get some variation in the color however the only problem with this is if i look at the emission channel there's actually nothing in it because the emission shader is under the glass so it doesn't actually come through so instead what i did is i rendered the transmission color this is basically a pass for any of the color information that's coming through the glass which in this case is everything from the repulsor so in these shots whenever you see i'm using the transmission that's essentially isolating the emission it's just because it's coming through the glass and then the third part of the beauty render is the shadow channel which i'm including from the shadow catcher then i rendered a utility pass which is a separate render i did a cryptomat object and material pass for each of these so i've got some stuff to play around with in post and then i also rented out the depth part so i can do some zd focusing in nuke then when it comes to the compositing like i showed before this is the main plate we shot a clean plate for most of these so that i have a clean background and i use the camera track from this and just projected a patch onto the geo and then if i overlay that on the shot i'm now able to remove my hand from the shot then on top of that i have some roto for my arm this needs to go back on top because the suit actually still comes up to about here so i needed to restore some of my wrist until the suit actually covered it then next i have the shadow pass which goes on top normally the shadow pass looks like this but i did some edge extension stuff on this particular shot just to make it stretch a little bit more so out of blender it looks like this you can see here what i was saying before about how in blender when i projected the plate of my arm onto the geo the shadow now actually has my skin tone detail in it which is really cool so there's variations in tones of the shadows based on the texture that's underneath it so essentially this is in the main beauty render then i shuffle it out i did a little bit of grading just to make it darker so i'm just gammering down quite a bit here just to make the shadows a bit stronger and then this gets multiplied over the plate which looks like this then on top of that goes the suit and then again there's an addition will glow just for the repulsor which i did by isolating the transmission like i was talking about earlier and that's pretty much it for all of the shots it was pretty much rinse and repeat in terms of i would take the plate i would remove any of the limbs that i don't want then roto some stuff back on top and then it's just the very basic compositing of the suit the most difficult shot in terms of compositing was probably this one the main reason for that is that there were different parts of meat that needed to be in front of the suit and behind it so for example in this shot here there are certain points in the shot where the suit needs to be on a bit of my leg but then the front of my leg is actually still sticking out of it and then again later here the suit attaches onto the bottom of my leg but my foot still needs to be sticking out the bottom until it actually closes in here for pretty much all the shots the geo that's the shadow catcher so in this case this torso model is also a hold out so if i look at it in render view you can see that as well as picking up the shadows this geo is also occluding the bits of the suit that should be behind me and if i hide this you can see inside of the suit which isn't correct but for this shot in particular it was just proving really difficult to get a hold out to work perfectly for my foot because it would have needed to be basically pixel accurate in terms of having the right outline and so i kind of ended up doing it in compositing just by rotowing my leg back on top it all happens pretty quickly so it's a little bit forgiving but essentially the comp process for this shot starts off with the plate then like i was showing before i did some cleanup on the back wall then there's a lot of roto for restoring the bits of me that should be still visible once the suit is on top it's kind of a combination of a bit of blue making for my t-shirt and then loads of rotor shapes to kind of restore the various bits that need to be there then the shadow pass goes on here so you can see that on my shoulders and on my leg then the suit goes on top and you can see that it's still not quite done and the holdouts and stuff aren't quite working so it's in front of my leg even though it shouldn't be here so then on top of that i rotate my leg back on top and put it in here and then to make it a bit more convincing i did a rotor shape here that was fairly soft and made the suit a lot darker so it felt like there was a shadow from my leg i did actually have a hold out for my shoe specifically just because my foot needs to be inside of a bit of the suit but in front of other bits i didn't want that to start rotoring the cg so in this case i did literally have like a very very bad almost like a sock basically some sock geo which you can see here this is what the holdout looks like for my foot absolutely incredible modeling and that just allowed me to get the hold out close enough that it was pretty much there and then i did a little bit of extra paint work on top just with some masks and rotor paint just to restore any bits where the holdout wasn't quite correct so that is pretty much the entire process all the shots were very similar one of the nice things about it is it's exactly the same location for the whole thing i didn't really move so the hdri was the same for all of them and the intensity of the light so the process for every single one was just get the 3d track appending the master file of the suit which has the rig and everything do an object track for various parts of the body depending on what i needed to track parent some of the main bones to the object track and then do any correctional animation on top of that render it out and then like i said very minimal comp work depending on the shot because it came out the render pretty much perfect already and that is the entire process i hope everybody really enjoyed the video it was definitely the most ambitious project i've undertaken for a youtube video i keep trying to one-up myself so like the green lantern was pretty good the hulk one was better and then the iron man one is currently i think the best thing i've worked on and my best work on youtube who knows what's going to be next leave a comment below if you have anything that you would like to see me try like i said at the beginning of this video all the assets from this are on patreon so you can get the suit and the rig with all the materials and the hdri and everything that's in the one dollar tier and then the project files here just for a few more dollars gets you access to every single shot you get all of the animated blender files so they're basically at the stage where i finished the shot and rendered them and then all of the new non-commercial scripts so you can see exactly how i comp them all that gives you access to all the raw footage there's loads of stuff in there apart from that i think that's pretty much all i have to say thanks very much for watching again hope you enjoyed the video and i will see you very soon foreign foreign