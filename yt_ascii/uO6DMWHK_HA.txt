everyone knows mark rober he has dashing good looks helped design a mars rover single-handedly solved the ports pirating pandemic and even has more subscribers than me but it turns out he can make mistakes like the way that his team is handling storage we're talking towers of external hard drives no real backup and worst of all editing videos off of dropbox thankfully he knew where to come for help that's right boys and girls today we are building not one but two identical storage servers for the one the only mark rober and not only that but we're going to show you guys how with basically zero networking configuration no port forwarding any of that stuff these two epic machines are going to be able to remotely and securely sync to each other from miles away just like i'm gonna remotely sync this message from today's sponsor cable mod worry no more about your graphics card going pyromaniac upgrade your default power cable to cable mods 12 volt high power basic replacement cable learn more at the end of the video when mark first reached out he had already come up with actually a pretty reasonable plan to solve their issues to migrate off of the stacks of external hard drives they had specked out an owc thunder bay flex 8 which is a daz or direct attached storage chassis that as the name implies directly connects to the computer using a 40 gigabit thunderbolt connection pen for remote backup they chose a smaller daz box from that same company these kinds of storage docks are great for the solo photographer or freelance video editor where only that one person needs to access the data to their credit their current workflow only actually requires that one computer to be able to access the raw footage in order to generate low quality proxy footage for their remote editors once the project is complete that computer with the raw footage directly attached to it would run the final export for youtube however just because that works for them today doesn't mean it's going to work for them in the future and given the flexibility and the upgrade ability that's afforded by a diy nas or a network attached storage box like being able to access the footage on any computer on your network or i mean heck any computer in the world through a vpn but when you're spending this kind of money and you operate on a scale larger than one person nas is a no-brainer not to mention that whatever machine you end up plugging these storage boxes into is going to be bogged down every time it has to sync to that off-site backup so what do we build in well the capacity is easy to figure out he needs lots he asked for 200 terabytes at each site but what about the form factor or the hardware platform originally we specced out two options one based on amd's enterprise epic platform and one with their consumer grade ryzen parts but it was immediately apparent that the cost was going to be basically the same so epic was the obvious choice this is going to be a really fun build because while mark obviously wants to take a spare no expense approach to keeping his data safe we also don't want to waste his money meaning that this is a really solutions oriented video and we tried to keep it really practical so back when we specked this out the epic 7302p a 16 core processor was available on ebay for around 380 dollars a piece now the 16 course might not be the fastest on the market but they're frankly overkill for a hard drive based storage workload like this and considering the platform advantages like tons of pcie lanes and registered ecc memory it's basically the perfect option and it's gotten even more perfect if you check ebay today you can pick these things up for just a hundred and fifty dollars used or with a used super micro motherboard for less than five hundred dollars now some of you are probably freaking out right now like seriously linus you're putting a use cpu in a system for mark rober that's fair that thought did occur to us but if you pay attention to how used cpus drop in price when each new generation comes out they go and there's a reason for that it's because cpus are damn near indestructible compared to say a motherboard or a gpu so what happens is you've got this glut of cpus on the market with no boards to put them in you say indestructible can we cut to that clip of him destroying that ten thousand dollar zeon yes very funny except that's also a great way to prove my point because that ten thousand dollar cpu that i ruined four years ago can now be found on the used market for as little as a thousand dollars or if you're willing to accept a qualification sample full performance one as little as 350 bucks i mean for these kinds of prices mark could literally have four spare chips sitting on hand with needing only a screwdriver to swap them out for the price of one brand new one coming back to our motherboard unlike a lot of other data center platforms the epic sp3 socket was used on three generations of chips naples rome and milan that means that there's still a metric boatload of boards that are available both new and on the used market but since motherboards aren't anywhere near as reliable as cpus we ordered a brand new pair of asrock racks rome d8-2t i love these boards we've got several of them in the office that have been rock solid and they have an absolutely comical amount of i o there's an ipmi port for remote management dual onboard 10 gig networking meaning we don't even need a separate network card although we'd have plenty of places to put them with seven pcie gen 4x16 slots dual m.2 dual oculink which is another pcie by four each eight sata ports through these onboard mini sas hd connectors and eight channel memory all mounted to a standard atx form factor pcb this thing is it's better than the bee's knees it's the  and for a b that's that's honey right i think it'll fit in basically any case and it shows off the monstrous 102 28 pcie lanes of our epic cpu quite nicely next up is ram apparently one moment please since we're using epic micron sent over four 32 gigabyte ddr4 registered ecc modules that are running at 3200 mega transfers per second ram honestly speaking is also another place that you can save some money if you're doing this at home it's just that when we were looking the price cap wasn't huge for this specific capacity and speed between brand new and used we're talking a difference of about twenty dollars a stick now the experienced among you may be raising your eyebrows a little bit at our ram configuration on the one hand we've got 128 gigs in a mass but on the other hand we've kind of cheaped out by using only four sticks on an eight channel platform we are giving up half of our total potential memory bandwidth but believe it or not there's a pretty good reason for both of those things one is that okay say you're using a qnap small business nas or something like that you're not going to use much ram but we are using true nas scale and since it uses zfs it uses system memory as a read cache for our most frequently accessed files this is called arc or adaptive replacement cache and the rough guideline is to have one gigabyte of arc per terabyte of magnetic storage so we are right in that sweet spot with 128 gigs as for why we only opted for a four channel configuration well if we were using nvme storage we might need the additional speed but because we're using hard drives i don't think our memory bandwidth is going to be an issue and this gives mark plenty of room to upgrade in the future all he has to do is double his memory and he could throw twice as many hard drives into his system of course given mark's budget that is to say he didn't really provide one we just tried to be sensible we could have easily put in twice as much memory today or four times or eight times as much and when we're talking about a very read intensive application like video editing there would have been a clear benefit to that but there are other ways to skin this cat dfs has another trick up its sleeve called l2 or level 2 arc which is a second tier of read caching that can be set up using commodity ssds and that's exactly what we're going to do with this one terabyte sabrin gen 4 nvme ssd now it's worth mentioning that you can go ludicrous overkill on level 2 arc and put like 10 terabytes in a system like this but that would actually use up some of your ram based art capacity to index it which could actually end up hurting your performance also the level 2 arc is filled up by stuff that gets evicted from the main arc cache so it might not even help until your system has actually been powered on for quite a while the last thing to go on our board is our cpu cooler and we've gone with a noctua u14s tr4 sp3 we want this machine to be reliable in the long term so using an aio liquid cooler was out of the question we also want it to be quiet since one of them is going to live at mark's house and the other is going to be within earshot of people's desks at their office this one happens to meet both of our requirements just like i am required to tell you about the ltt screwdriver that is reliable and soon to be available and that's right they're not oh these are like big chunky ones we're trying to put two fans on it that way in the unlikely event that one of them fails the machine will still operate completely normally it's not to get extra cooling this is not a particularly hot running chip this one has one of the big chunky ones on it what you left one of them on there no there are five big chunky ones the four that i have and the one that's on here holy okay let me go steal one more from another fan are you kidding me what the are you just screwing with me at this point i'm not like legitimately no legitimately i'm not screwing with you so you're telling me one of these came out of the box with the wrong one on there there's no way no they must have gotten mixed up no the one that was still missing one was the one you brought me wait i have three fans oh my god oh this one i borrowed it from that's the closer color match is it yeah i don't think so i think you're wrong what yeah that's really close no no that's wrong this is a closer one no way oh the brownies no way it's not even close okay why the hell was this one outside or something no they just are all over the place remember when i said that this thing is gonna live at mark's house obviously he doesn't have a server rack at his house kind of crazy person would have a server rack in their house especially a pink one that means that building this into a rack mount chassis isn't necessarily the best option this time around typically for a high capacity storage machine like this you want a rack mount since regular tower cases just don't have enough drive bays anymore but if you're a long time watcher you might remember one that does ah yeah the fractal define r7 xl is back which with its optional drive bays can house' hard drives which is plenty for the 12 we're putting in today and for them to add another six down the road of course by default since most people are not going to put a ton of hard drives in here it only holds four or three and a half inch drives but we've converted it just by moving this plate right here from the back up to the front into what fractal calls storage layout it's been a little while since i've done this but basically you've got this slide and this nubbin and those hooking on the other side there okay and then you got a screw that goes in here there you go and it gets supported by this little tab so i mean it's not amazing but what are your other options for cases that okay hold this many hard drives these are not sticking into the nub and thing every mounting mechanism is great to do once now i'm not going to do it because we're going to pull all these drives out for shipping anyway but mark or someone from mark's team more realistically once it arrives i would also wow that's heavy okay like you to put the second screw into each drive right here that's just gonna snug this up make sure that this little nubbing stays in place and ensure that these drives don't just suddenly go and fall or anything like that that would be bad one thing we are putting the work into though is putting all of these silicone grommets on the hard drive trays this gives them a nice little anti-vibrational cloud to sit on and while you're not going to kill a hard drive by moving it around we had hard drives and laptops for literal decades it's pretty well documented that any excess vibration is pretty bad for them the other benefit is this keeps the drives which have moving parts in them of course from transferring their vibrational noise to the case and causing it to rattle which again is a concern for the system because it will be near where people are working or living it's like a storage brick in the front of the case good lord oh yeah storage brick it's a good brick right there of course what good is a brick without a brain let's go ahead and put our io shield face is a brain because the year is 1998. got him try not to slice my hand open thing a beauty right there i don't know what it is but compared to whatever the flavor du jour rgb fiesta thing that's going on in the gaming spaces workstation server class stuff classic high performance look you know black pcb i sleep green pcb real hey hey what do you call the cold season when i'm making this video the winter of my disc content we got ourselves a computer here sort of we got to talk about cooling very heavy hopefully yes oh easy time to put some fans in the front just use the stock ones stock ones yeah yeah we'll use the nachos for the top what where would i like to put my fan for it to have all of its airflow blocked by this wall of hard drives i could put it here or here we're here there's not going to be a gpu in this system at least not now well no he could put a gpu in it in the future if you wanted to you know pass through a gpu to a a plex vm or something like that but you said he wasn't doing no he's not going to do any of that but i am going to put the fans in such a place that they would deliver fresh air flow to a gpu or accelerator card or any other kind of thing you might want to put in here i'm modifying the hp i'm putting some coolant on here this is a little big that's a little small this is fine this is fine yeah just put that in there it's so cute realistically a card like this which we haven't actually talked about yet but we need because our motherboard only supports eight say the hard drives out of the box ten oh well whatever that's still not 16 or' or whatever this can support the point is we need to add some more sata ports this is an hba host bus adapter and it's kind of designed to get passive airflow from the server fans that are way over here somewhere right now it's got nothing so we need to add something to this and i mean that's better than nothing to be fair it would it'll probably be fine we're just doing it just in case i think it's time for us to talk power supply we could have gone with something redundant in fact there are some really cool atx dual unit power supplies these days but it's not quiet so we've opted for the second best thing this excellent seasonic prime platinum 1300 watt power supply did we need 1300 watts the answer is no but the 1300 watt has native support for 16 sata power connectors and while we could have adapted something else or even used splitters particularly for sata using splitters is not recommended because of the tiny little pins if you draw too much current over them they melt and that's bad this is a machine that's intended to be operated continuously for years on end i mean we don't know how long he's going to keep it nothing would stop him from running this for like i don't know 10 years as long as he replaces hard drives as they fail so we don't want to take any chances i didn't have four of the same size zip tie so there's two different size zip ties but it's mint okay i mean it's not going anywhere no it's not you might be wondering how this hba is going to plug into our hard drives because that doesn't look anything like the port on a hard drive so we have to use these mini sas hd that's the connector on the hba to four sata connectors and then we can plug directly in no problem like linus mentioned before the motherboard actually has two of these mini sas hd connectors which means eight of our 12 hard drives are already covered so this hpa is only going to be used on one port now you can buy ones that are cheaper with less ports this is a 16i and they make an 8i and i think some other companies might even make a 4i which would be just one connector it's just that we wanted to set it up for future expansion even in the situation where he went well beyond the capacity of this case and switched to like a rack mount chassis this hba is still gonna work and he has enough ports for another 12 drives on here you just slide it on in there's no graphics card because it's a server so we can put this right in the top slot like that it's pretty cute right aside from like an hour of cable management the last thing this system them needs is boot drives we're going to be using a pair of micron's 5400 pro series drives these are like data center grade sata ssds they're honestly overkill and probably more expensive than i would have spent on boot drives but micron sent them for the project so not a big deal and these are going to last gosh dang pretty much forever true nas like doesn't really write a whole lot to the boot drives you know you're talking like the configuration and some you know some statistics and like logs and stuff so you could probably run it on a usb if you had to i wouldn't recommend that but you could so these are super super overkill hey look it's working okay let's see if all of our drive these just because these are new drives okay we got one two three four five six seven eight nine ten eleven twelve beautiful where are our boot drives there are some weird stipulations on this board despite it having a bajillion i o some of them are shared i think slot 2 which is either the second from the bottom or the second from the top is shared with like the m.2 these ports the oculink ports so depending on there's like a little jumper you can move around some of the things get disabled i suspect that that's what the problem is right now so i just got to check the motherboard manual and see we can see from this jumper chart that said f4 underscore seven so four to seven does get disabled in some circumstances and four to seven is the bottom one which is what our boot drives are plugged into so i was right we're good we just need to move this jumper the x's mean that it's disabled we have two m.2 slots so we don't have to worry about our m.2 because this m.2 slot is always on actually the only thing we need to worry about is the sata and probably that pcie slot so i think i'm going to put it in this configuration because that means we get 8x on the pcie slot that other m.2 is going to work and our sata work i don't think mark is ever going to want to use oculink for anything and i i would suspect if anything they might want to use that pcie slot maybe they won't use it i don't know i'm just going to put in that config and you know don't call me this guy is already in the correct position we just need to move the right hand one over one pin well cool and now our boot drive should work the system's booted up and we've got true nas scale installed now we can set up our array because this is you know it's you know mission critical data they don't want to lose this stuff this is already going to have an off-site backup we're going to set it up in a pretty safe configuration but one that is still going to be very performant in our experience with zfs usually the best option to get good sequential and random performance sequential being big video clips and whatnot and random kind of being small text files or if you have lots of photos you're copying all those at once is to use a vdev size of six which works great with our 12 drives however because they're hard drives we do need to have some sort of protection for that array they are at some point going to fail it's it's a for sure thing so we're going to use two of those six drives as parity data that means in each of those pools of six we can lose two drives before our data is at jeopardy which means we're going to lose a little bit of capacity i think that brings us from 240 terabytes because these are 20 terabyte drives down to 160 or something it's a pretty essential loss but but it's not as substantial as losing everything because you didn't have enough parity drives so it's very important to set up your array in a safe configuration like this so let's just do that we'll pick six drives one two three four five six i suspect true nas is actually going to automatically do this yeah look at that raid z2 it it picked for us this is what you're doing you don't have a choice and then we'll just hit repeat because we can make an additional one that's going to give us a formatted capacity of about 150 terabytes also before we're done here we're going to add our level 2 arc you can see there's a cache type of edev so we'll just add that select our one terabyte nvme drive and plop it on there there are a few more steps we still have to do i want to set up email alerts so if you know a drive were to die they actually know it doesn't tell you what to go hey my drive's dead you have to get an email for that we're also going to have to set up a data set some user accounts so they can actually read the data off of it we're gonna have to set up the software for our remote sync which is called tailscale and then set up the sync process but we're going to do all that when we're on the phone with mark also we said we were going to build two of these today that was fake news we already built the first one it was probably like six nine might even been a year ago that we built this thing and shipped it to mark's team because we don't actually need both of them to build on camera this this way we actually get to do the sync remotely it's already with them all the way in los angeles we're up here in vancouver so this will be an even better demo for thousands of miles away there are a few things we need to finalize before we actually ship the machine but we've got it working enough now that we're ready to hear from its new owner and do a live demonstration where we blow mark's mind with an automatic scheduled backup across this unassuming black wire over hundreds of miles we're recording good audio for you over here what up oh hi mark oh hi mark oh god damn it so how's the naz treating you yeah the nas is amazing and then i also love the idea too because we're gonna do a second one that's like at another location so then we're like really really i have no idea what you're talking about you don't say is that it no way thank you for sharing your future plans with me yeah maybe they didn't brief you too much on this but that's what we're doing today oh really yeah we're gonna do an off-site backup and you are going to sleep so much easier at night knowing that every night everything that you ingest to your main editing nas which can be used by any of his editors both local remote whatever if mark just wants to check on something everything that he dumps on there is going to be replicated to this one so that in the event of a fire or other disaster the data won't be lost because the hardware has a value sure in thousands of dollars what's the data worth to you mark twenty dollars minimum just kidding per kilobytes priceless it's priceless and that is the punch line years it's like it's the peace of mind even just having the mass i wish i i should go grab it but i'll send you a b-roll shot of it but like it was stored on these little western digital hard drives into tupperware in my freaking closet everything i own is in a nast here and then now if we have a fire here knowing that it's backed up a second physical location knock on whatever a game changer absolute game changer do you have any regrets not going with a das because like i gotta i gotta give them credit they did the research like your plan was not stupid it was like the mac plan no i think it's working well for us i think the other thing that was different that kind of was something we had to wrap our head around was that we don't necessarily have like a bunch of editors in here working physically in like on site right where you need a network that we're all connected to ethernet we don't have a lot of editors first of all but second of all like we just kind of put it on proxies on dropbox that's kind of our workflow our main need was just like a one central computer that had the raws on it that stored it all that when it's time to export the video you know we all work on proxies then we just all we we remote into that and export it from that computer so yeah it's working amazingly it's the freaking best it's just the best and it's something we wouldn't have been able to figure out our own at all and our solution was going to be a lot more expensive than the one you guys proposed so you were able to like look at what our actual needs were and being like look you don't need the ferrari to go to the grocery store you know you just need for what you guys need this is what you what the perfect like solution would be just one of those things where just like having this because this is what we are we're cut we make videos this is our core product right so it's like our our fort knox for everything just didn't even have a lock on it and now it's actually organized and locked and i can sleep at night so you're probably gonna go back and actually use this footage like very rarely but it's there yeah that's right it's there but we just had this situation we're getting a bunch of our videos translated and we had to we used this like because we had to go back and like get the stems and stuff and no if we didn't have the server like that made our lives infinitely easier we went back like 40 videos right that's awesome i'm so glad so we are just about set up here to demo the off-site backup capabilities jake we're gonna live try to sync the machine that's with you which is thousands of miles away from us up here in vancouver to this machine right here and hopefully it'll just work it all rests on this little cable right here this also means that you'll be in possession of my entire back catalog of footage so you better not start like a tick tock and bootlegging all my videos linus i mean you you signed the end user license agreement right the privacy policy did you read it this was your end game all along curse you you're only one of them you are just one gear in this machine this is exciting so how long will it take because i think we have like you have a hundred terabytes it's gonna take like like a week yeah the first goal will take you know however i mean you've got one gig connection there we'll probably set it to run it like half that speed so it doesn't just destroy your internet yeah so you don't go to like upload a video yeah what's going on why does google suck so probably like a week or two and then once that's done every subsequent sync it only copies the that extra little bit yeah so it's a lot faster what's really cool about this is that in the event that you guys were to suffer from some kind of a cryptographic attack right like a ransomware there's really advanced ransomwares out there that will go and they will start encrypting everything even on network attached drives that are accessible to the infected machine so because we're using a technology called snapshotting where it will actually retain an old non-encrypted copy on that remote server theoretically hahaha you will be able to go back in time kind of like apple time machine and restore it to a state before it was encrypted and it'll be super inconvenient and it'll suck in fact it might even be faster to literally get in the car and sneaker net that other machine back into the office so you can not lose production time compared to you know copying it back over or whatever but you'll have it which is better because so i see so when you guys ship it to us it'll already have all the stuff on it huh it will sort of so it'll have everything on it but we're gonna pull all the hard drives out for safety during shipping because they can be quite sensitive we want to ship them in a proper hard drive shipping container so theoretically and we might need to give you a little you know 15 minutes of remote help with it or whatever but theoretically we already did this once remember yeah okay so you'll take those drives you'll slam them into this machine and everything will just pick up i'm truly just something in my brain it's just like it's just so excited to get this peace of mind because that's what this is this is like insurance and peace of mind and something that's been nagging on me forever every time i open the freaking closet and see that pile of hard drive so okay in theory it's running now hey look at that we're getting about 40 megabytes a second and i think you said too we can set it on schedules where hey just do it after 9 00 pm or something right yeah totally and another thing you can do 2 actually is if it's not too much of a trek between your two locations you could bring it on site do the first sync at full gigabit or even i don't know okay so at ball and speeds and then you can go and take the other one off site after the fact this is awesome dude we've already we've actually already transferred two gigabytes here really i just i was gonna say like two two gigabytes that's like my first probably 12 videos when i was filming i think i said camera i think this whole project is six gigs do you remember it was called like watermelon smoothie or something oh yeah yeah i know the watermelon smoothie it's a classic it gets baby mark i know still rocking the backwards cap though show up to that last picnic of the summer time like a boss and all you're gonna need is a watermelon a coat hanger and a drill like a boss wow that sideway that sideways gangster drill movement that's still cool i still stand behind that drill movement well this is a quick video we can just watch the whole thing yeah it is kind of short did you clean the coat hanger before you used it for this have you re-uploaded i didn't have you re-uploaded this as a short yet no i should you should how long is this video like two minutes yeah no minute and 42. oh this could then no offense but there's some dead air again you picked an early folder to look at dude i'll put this on me no this is great you have an age today i swear yeah i like the part where the watermelon juice goes in and then out and then in and then out yeah i still sanitary i still stand behind that barfing watermelon scene so i think that's it you have a meeting in one minute so we got that resolved just in time thank goodness timing enjoy the new nas ziz you guys are legends eternally grateful thank you so much you make it so i can sleep at night now it's time to rip this whole thing apart pack it up ship it and tell you about our sponsor cable mod you're still using that ugly space consuming 12 volt high power adapter that came with your gpu why cable mods basic 12 volt high power replacement cables are designed to get rid of that squidish adapter and leave you with a cleaner looking pc these cables enable your atx 2.0 power supply to power any graphics card with a 12 volt high power port they're available for a wide variety of power supplies like sea sonic evga corsair and more and just like cable mod's famous sleeved cables these 12-fold high power cables are made with 16 awg wire to fully support 600 watts of safe aesthetic power delivery so treat yourself and upgrade your build with cable mod today at the link below if you guys enjoyed this video maybe check out the time we built a nas for dream it was yeah it was less reasonable