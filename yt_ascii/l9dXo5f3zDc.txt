two sets of cards, 1 2 3 4, ace is one, 4 3 2 1, again ace is one, spades and hearts, black and red. they're in opposite orders. i now turn them over and we're going to shuffle them and you decide which one to shuffle but the shuffling means always to take the top card and put it at the bottom. that's shuffling. okay, that's one shuffle. and, each time we shuffle, you tell me which one to shuffle, i'll shuffle that one. okay, so let's shuffle a number of times. well, what can we say? oh, let's use the phrase numberphile shall we? so numberphile: n-u-m-b-e-r-p-h-i-l-e so, for each of these letters you say well, shuffle the right one or the left one. and you can say you know, n-u-m b-e-r-p-h and so forth. you can choose whatever you like. okay, so brady, you tell me which one to shuffle, then.  so left or right? -so, n
-yeah u m b -e
-yes, sorry, e r p h i l e okay, so those two cards emerged to the top as a result of your choice, i didn't choose this. so i'm going to set them aside. yeah, two of them. now, we repeat numberphile again and for each of those letters we shuffle either of these and you choose which ones shuffle for each of those data. so which one do you want? let's do . . . let's do all of them that one. oh my god.  so, okay n-u-m b-e-r p-h-i l-e i wasn't expecting this. okay those two cards emerged to top. in fact, this one didn't move but this emerged to the top so i put these aside. now one last time, numberphile, and you choose which one to shuffle. ok n u m b e r p h i l e ok, these two emerged to the top, and these two are left over. ok. now if we were really lucky and luck doesn't come except to the deserving. because numberphile is such a magic phrase, these two may be the same number. you know numberphile means "liking numbers" and these two numbers like each other, of course, 2 and 2, but that might have been luck. but if we really believe in that magical numberphile, these two might have matched remember, you chose which one to shuffle, yeah?  i didn't.  that's surely not possible. but what's really impossible would be impossible? is for the next two to match and the surprise par surprise, the last two also match. so they all match pair-wise. lovely!  numberphile -- i knew it was magic. we knew it was magic. so the trick that i have just shown you is a classic trick which was described for the first time as far as i know by the late martin gardner called the last cards match and i made a variation on this and the variation is a little slower than the original trick but it's also mathematically more interesting. so i'd like to reveal the secret. what we had was two piles of cards you have 1, 2, 3, 4 in one order and 1, 2, 3, 4 or if you like 4 3 2 1 in the reverse order, and these should be thought of as like clocks okay, so a clock has you know, 1, 2, 3, 4 all the way to 12 and then it starts all over again. so you are doing modular arithmetic here also, if you go one two, three four, and if you want to go five here six here seven here eight here and so we can keep going. okay, you remember that our way of shuffling was very special we took the top card and then put it at the bottom so you . . . as you keep repeating this you are cyclically or cyclically depending on the side of the atlantic permuting those cards so you go from here to here to here to here and keep going whereas in the other deck which had the reverse order you go from to here to here to here, okay? we had four cars but let's generalize and explain a little bit because this card trick works with any number of cards in general. let's say that you have cards one two three and so on arranged in a cyclic fashion all the way to m so let's say m minus 2 m minus 1.  m is number . . . total number of cards and i choose that m for a purpose on the other side you have because in the reverse order m, m minus 1, m minus 2 and dotto dotto you keep going and then 3 2 1 you come back like that. ok? so in our card trick m was four, but in general it works and one shuffle does this: you start from one and go to 2 and 2 goes to 3 and here you go from m to m minus 1 and m minus 1 to m minus 2 and that kind of thing. suppose that on the left, that is the red pile you made l shuffles on the right you made r shuffles, l as in left, r as in right. well, the total number of shuffles that we made was the number of letters in "numberphile" n-u-m-b-e-r-p-h-i-l-e 11 letters. so we know that l plus r was 11 for us. so l and r are not independent.  if you chose to shuffle the red deck l times, automatically you are shuffling, whatever you else you do, the right deck r times, but r equals 11 minus l. and if you choose to shuffle the right deck, that is the black deck, r times, you cannot help shuffling the left deck, that is the red deck, 11 minus r times. so you have that relationship. so let's start shuffling. say that you shuffle the red deck l times: 1 goes to 2. so each time you increase by one.  2 goes 3 and if you keep going after l shuffles, it takes a little bit of thinking to convince ourselves you arrived at not l, but l plus 1 after l shuffles. on the right, black deck after one shuffle, you go from m to m minus 1,  m minus 1 to m minus 2, and if you keep going, and that is slightly less confusing, at the end, you arrive at, after r shuffles, m minus r. so, after those shuffles the cards that emerge on the top of each deck is l plus 1 and m minus r. 
 those two cards emerge. we used eleven but let's say that l plus r was some number more generally which was chosen to be some number which is congruent minus 1 modulo m where m is the number of cards in each deck so for us m was 4 and for us 11 was the chosen number and eleven is minus 1 mod 4, by the way. where have you pulled . . .yeah, where have you pulled that minus one mod m from? we'll see why this minus 1 becomes useful in a moment that's . . . that's part of the magic ok. you have to do magic at some point, okay? so, let's see what l plus 1 is compared with m minus r and we'll see that they are actually the same thing. you see? because l we see is equal to . . . look at this, l plus r equals minus 1, or congruent minus 1, so l equals minus 1 minus r. let's not forget plus 1, so minus 1 plus 1 cancel, and you are left with only minus r. so this is modulo m but minus r can be written by modulism again as m minus r. that's the same thing, module m. doing it like that. ok, and so what we see is that module m, l plus 1, the top of the red deck and m minus r top of the black deck, are actually the same.  so after those shuffles, the same cards emerge on the top.  you put them aside now you have to start over again. and then the number of cards m changes, but that's where minus 1 becomes useful. 11, that we chose, that's the number of letters in numberphile, has the beautiful property that it is indeed congruent minus 1 mod 4. that's the initial number of cards in each deck.  after i set out the top cards together, you have now . . . do the same thing mod three? but 11 is also minus 1 mod 3 and next stage, you have you lost one pair of cards you have to do mod 2, but amazingly 11 is also minus 1 mod 2 and that is why this number, magic number, key number, 11, worked. just as you descended those different moduli, the chain of order, mod 4, mod 3, mod 2 okay, and that's how i chose 11. or, if you want to do this card trick in other . . . with other parameters for example with larger number of cards and 10 and 12 and so forth and so forth all you have to do is to solve this, what is called simultaneous system of congruences. like a simultaneous system of equations but you are doing modular arithmetic and there is a way of doing it's called chinese remainder theorem by the way, the standard way we teach and learn chinese remainder theorem has modules all co-prime. they should all be co-prime, but this is a tricky case of chinese remainder theorem because for example 2 and 4  are not co-prime. but even there there is a version of chinese remainder theorem that works. so this kind of congruence . . . system of  congruence is always solvable. so you give me any m, so use a lot of cards if you like but just reverse the orders here and here and you find some key number which is equivalent to 11 but some x which is minus 1 mod m also minus 1 mod m minus 1, minus 1 mod m minus 2, so all the way down all those moduli. you should always be minus 1.  you should solve those simultaneous equations for x and using that number of phrases, this trick always works. so if i had two powers of ten, there'd be some other word i'd be having to use? that's right, but it could be a longer phrase and longer word and but i'm sure it would be some word, like numberphile, which would be special significance to you. if you'd like to try your hand at some of the mathematical card tricks you've seen on numberphile, but don't own a deck of cards well, you could try these numberphile ones. there's a link with more information about them down in the video description and if you'd like to see more videos about playing cards, well, we've got a playlist for that. links are on the screen and again down in the description.