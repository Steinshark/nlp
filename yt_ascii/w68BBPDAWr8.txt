are we back in the realm of passwords? we're back to passwords.. actually, we're back to password managers because i never haven't done a proper video on this i've talked about password managers briefly while i was talking about, you know good passwords and things like this but they're very very important nowadays, right? so, what is it that's good? and why is it okay that we're putting all our eggs in one basket? just before we start the video about how they work. would you recommend a password manager? 100% yes, there are probably some use cases where you wouldn't want to use a password manager, but off the top of my head i can't think of how many i think that your security is better with one right even though there obviously is some small amount of risk that you take by putting your passwords in an encrypted database on the internet like i'm you know, i'm not a security researcher but the majority of security researchers use pasword managers and would advocate the use of password managers the weakness of password managers that we'll talk about is is really implementation detail right in theory they're very secure. but in practice is auto-filling on a website a good idea? i suppose it depends on what the website is, you know there is talk of maybe invisible forms, but get auto-filled them and they capture the passwords, things like this let's first think about what it is that a password manager does and why we would want that right now we've talked about passwords before and the issue really is if your passwords are going to be secure generally it is going to be quite hard to remember a lot of them right yes, we've talked about coming up with a good password and i think it's quite plausible to remember one or two very good passwords, but to remember two dozen or three dozen or a hundred that's getting a little bit silly. right? so then your choice is to write them down right or to use the same password all the time which isn't a great idea or to use a password manager and quite simply a password manager is a big list of your passwords encrypted, right? we usually call it a vault sounds cool so you have you know amazon and you have your password for amazon and then you know ebay and your gmail and so on all the different products that you use all the different passwords that you have and in a lot of password managers you can store additional information like passport numbers or social security numbers depending on if those things are useful feature to retrieve them obviously having this is kind of having all your eggs in one basket what it's going to do if someone gets it is unlock everything you have because the password manager only make sense if you use it for eveything. otherwise i kinda don't know why you would use it at all so obviously this is going to be encrypted, right? so this is going to have some kind of encryption on it using some kind of key and so the real question is, you know, where we store in this key whose key is it who has control of this key who can get to this key? that's really what it comes down to is whose key is this? obviously some password managers have cloud storage solutions where you can upload passwords off your mobile phone and get them on your laptop and vice versa sometimes even share them with other family members things like this. these are kind of those products i'm talking about today if you have to use a product like keepass, which is entirely offline any cloud storage is on your own back. then the sort of the security implications are slightly different right in some sense it's more secure because you have control over that thing but i would argue back given what we were going to talk about not a huge amount more secure and at the cost of quite a lot of convenience and to be honest for the majority of users convenience is important if you don't get convenience out of a past manager you aren't going to use it effectively and then you're going to weaken your passwords or use the same password and you've undermined everything anyway. we've encrypted all these passwords of a key now i'm going to talk about how we manage this key and how we prevent the server from being able to access these passwords as well and attackers and things like this i'm going to talk in the general sense, right? i'm familiar with how thing things like lastpass in one pass would work and i'll sort of nod to them a little bit but i want to talk some in general about how password managers do this because they have quite strict requirements the encryption with keypass is fairly similar a slightly different algorithms used for encryption but the same it doesn't have the same requirements on security in transit because it's not in transit, right? so because you're using key parts locally really your master password is in it's sufficient to drive a key and to decrypt your your data, right? there's no issue of what what if the server learns your password because there is no server the first important thing to know about password managers cloud-based password managers is that they don't do any decryption or encryption themselves and all of your vault is encrypted by you at the client side and then sent encrypted to the server all right so that's i mean that's a good thing because it means that they don't hold the key in their database which would mean that over sort of a dodgy rogue admin or if it got leaked that will be a huge problem so really there's kind of two problems we have to solve right one is how do we derive a key that the server doesn't know but we can use and the other question is how do we convince the server to send us a vault in the first place because in a cloud-based? solution this encrypted vault is sitting on a server. i want to say my login is this my master password is this please send me my vault so i can decrypt it but you've just sent them the master password isn't that really bad idea, but that's the question. we're going to try and answer so the way this works is we're going to be deriving keys based off our master password all right. so all password managers are going to have some kind of master password please see them through the part of a video most people's passwords are not sufficient for use as a master password i mean it has to be very very good if he's any variation on the word password or have any of the numbers 1 2 3 4 in ordering it you need to delete those passwords maybe delete your account out of shame. yeah, so but that's a different video. we've already covered this a lot all right. so there's going to be what we're going to do is we're going to perform two derivations from this password we're going to use it to produce our vault key right using some function, right? so we're going to perform some function to turn our master password into a bowl key i'll try and sort of note differences between different password managers as i go and we're also going to use our master password for some kind of authentication mechanism with the server so what's going to happen is we're gonna take our master password. we're going to authenticate with the server it's going to say yet you are who you say you are but during that process it's not going to learn what the master password is it's going to send us the encrypted vault we're going to drive a different vault key and that's what we're going to use to decrypt the password locally we add or remove any parcels we want we encrypt the vault and we send it back to the server and it gets stored now this will seems a little bit implausible. we've just logged in using our master password we're also decrypting using our master password. this all sounds very fishy it all sounds like someone just wants all my passwords and they found a way to convince me to put them all on a big list for them, but actually it's quite elegant. there's quite elegant solution to this so let's start with the way that lastpass does it might because it's fairly common and then we'll talk about the differences with say one password what lastpass will do is it will produce a master password by appending your email and your master password so i'm going to call that pass it'll append them together and it will hash them and this is going to be a very very strong hash function by a hash function with many many iterations to prevent it from being brute-force we talked a little bit about this during the password cracking video but the idea is that if you're going to break a password you need to get it a lot of times and the slower that hashing process is the slower your guesses are going to be and the longer it's going to take when you say iterations do you mean that it's hashed over and over again, or..?  basically yes, you actually use an h map to do this and the function is called pbkdf2 p bk df2 password-based key derivation function - and what it essentially does is it takes your string that you're hashing, uses h mac and iterates it a number of times and in this case iterates is a hundred thousand times right, which is a lot of times. and this is going to produce your vault key your vault key or at least it's going to produce sufficient bits from which you can drive a vole key, right? so your vole key thing gonna be i know 256 bit aes key or something like this and it's going to be used to decrypt your vault now but we don't have the vault because the vaults on the cloud so we're going to take our vault key v, which is this one. we're going to append our password again to it. and we're going to do the same, you know epic hashing function on this another 100,000 times well, yeah you'll do fewer times on your client and then you'll do i think it's five thousand on the client and then it will go to the server for another hundred thousand or something like this something ridiculous because you know the server's got the power to do this what we've done here is we've got our vault key and our password in here, which is essentially our primary identifiers but would hash them so you can't get to them and that's what we're using to authenticate ourselves now at the server end that's going to be salted and hashed as normal for storing in a database so there's no easy mapping for an attacker to get from here back to here because you'd have to essentially undo this hash which can't be done or guess the hash which is incredibly slow because of how many iterations we're talking about so what happens is you create you use your master password to derive a vault key and then you use that vault key and your password again to derive an authentication key, which is what is used on the server? so there was no way for the server to extract this vault key because it's probably lost on the other hand only you have the password so only you can produce either these keys are you're the only one that can request your vault and you're the only one who can encrypt and decrypt your vault good right if your master password is good, right? another link to my video. just keep putting them in. not not password one then. not password one goodness no, we've been over this and not correct horse battery staple all right so one password for example is ever so slightly different one password has a public and private key mechanism because they want to be able to share vault around so your volt is protected by a key and that key is protected by a public key the private component of which is encrypted by your master password and one parse what happens to also add another bit of unknown, which is your secret key which is a device or account specific thing held on your device the idea being that it makes it a little bit harder for the server to theoretically break your hash one password also doesn't derive an authentication key straight off the master password this way they use something called a password authenticated key exchange, which is kind of like diffie-hellman but with passwords where your master password is used as part of a handshake with a server to authenticate you instead all right the advantage of that being that they have to vend break diffie-hellman first before they can begin trying to hash your password makes it it makes a little bit harder the chain of decryption gets quite complicated because you have a master password and secret key derived master key, which is used to decrypt your private key which is used to decrypt the vault key, which is used to decrypt the vault go and animate that all of this is susceptible to something like malware or key loggers that's absolutely so this is in some sense the biggest hindrance with password managers is that if you get a key logger or a website where it's accidentally auto-filled in the wrong place or the implementation is not as theoretically sound as the theory is that's when you've got a problem most security researchers and people in the security industry would argue that the benefits you get from having a good password mechanism like this outweight the drawbacks of there possibly being a potential breach, right? but it is something it is something into concern which is why that place is like one pass would have bug bounty programs where if you find a issue you can let them know and i'll try and fix it nice and quickly there's a question of trust. do you trust these companies? i suppose i probably do and it's because their business model wouldn't make sense if they weren't trying to be trustworthy, right? they've got one or two agendas, right either they are trying to store my password securely so that i keep giving them my yearly fee or they are trying to use all my passwords to hack my accounts in which case of other ways to do that and it didn't seem like a very good business model. yeah but i suppose it's possible. i don't i don't i don't lie awake at night worrying about that there are differences between how the password managers manage their different ways of doing authentication and doing the encryption and things because i'm not too worried about them i think that they all look pretty plausible and i sort of looked into them and i think the security industry in general was fairly pleased at how things are going i think you use the one that works best on your devices and you you know is the price you want and the convenience you want and so on. it's a product at the end of the day now i've got the token so i can load a value in add the bay leaf emerged or into it and store it back and hand the token and now i've got the token again i can load something and yuki and a2 i send that to bob. he's going to take this receiving function a - now bob wants to send a message so he's going to take his this is going to be bob one