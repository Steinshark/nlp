hi everyone in this episode we're going to be rigging the character that we made last episode so let's make sure that the 3d cursor is centered in the scene so remember that's shift c and then just make sure we're in object mode we can press shift a and under ameture just add in a single bone now let's going to go into the amature settings over here and just enable x-ray so that the bones get drawn on top of the mesh and then entering edit mode with tab on the bone we can select the head of the bone here and just move it up on the zed axis to the base of the hips and then let's move the tail of the bone also on the zed axis just up to the middle of this joint here we can then extrude this up on the zed axis to the neck joint and extrude that once more to the tip of the head now you can see when we're working with bones we've also got pose mode which is what we use when we're actually animating the bones so here we can see that by extruding these bones we've been parenting them in a chain so this one at the bottom here is the parent you can see if we move this or rotate it then all of the others follow and then this is next along in the chain so if we rotate this then it's child follows and this doesn't have any children so it just rotates on its own so let's press tab to go back into edit mode and i'm going to left click on the shoulder joint here shift a that will add in a bone and let's just drag the tail down to the elbow joint we'll just want to align line this from side view as well something like that and then let's extrude this out to the wrist and once more for the hand let's then go down here for the legs shift a add in a bone bring this down to the knee let's check this out from the side view all right extrude that down and then extrude this for the foot okay so if we go back into pose mode we can see that since these two were added in as separate bones they aren't parented to anything so if we move the hips they can just sort of wander off on their own so going back into edit mode we're going to want to select this upper leg bone shift select the hip bone and press contrl p and make parent keeping the offset we'll do the same thing with the upper arm bone parenting that to the spine bone here so contrl p keep offset now if we go into pose mode you can see that the arms will follow the spine and the legs and arm will also follow the hip bone let's quickly go through and name these bones so we can do that in pose mode or edit mode it doesn't matter it will just go onto the bone properties here and let's call this hip and then this is the spine bone followed by the headbone and then here we're going to have upper arm. l because it his left arm and then lower arm. l and just try to be consistent with this naming convention dot followed by capital l that will help us later on so call this handl then upper legl lower legl and finally footl all right now if we think about animating this character say we want to create a simple walk cycle you can imagine that the arms are pretty straightforward to animate because they just sort of swing in a simple arc the leg is of course going to be much more difficult because it follows this complex path now we can make this a lot easier for ourselves when we're animating by creating what is called an ik or inverse kinematics constraint for the legs so in pose mode here i'm just going to select all of the bones and press alt r to just clear what i've done and then let's go into edit mode and we'll select the ankle joint here and we're going to want to extrude out a little bone this is going to be our leg i bone so let's name it here leg i i k dol and we're going to want to turn off the deform property because this bone doesn't actually directly affect the mesh but it's rather going to control the leg bones which in turn will deform the mesh so we don't want this bone to actually be parented to anything else so let's press alt p and say clear parent going back into pose mode we'll select the lower leg bone and then head over not to the constraints tab but to the bone constraints tab and we can add in an inverse kinematics constraint set the target to the armature and the bone to the leg ik bone we also want to set the chain length to two which just means that this ik bone controls the two leg bones so now if we grab the ik bone and just move that around you can see we've got this nice ik action going on now in case yours isn't working one thing to make sure of is that in edit mode the the sort of knee joint is slightly bent if it's completely straight or if it's bent the other way then you'll have a hard time getting that to work properly all right so you can see that when we move this too far it sort of flips around to the other side now to prevent this from happening we're going to add in what's called the pole target so in edit mode we're going to left click somewhere out here level with the knee and just press shift a to make this a more reasonable size and i'm going to go into the bone settings here and call this pole target dol and this is also not a defamation bone so now in pose mode can select the low leg bone and back in the bone constraints set pole target to amateur and the bone to the pole target. l now might happen that your whole leg chain will rotate to some funny angle so we can just select this lower leg bone and adjust the pole angle until that is back in line so mine is at 90degrees all right so now if we move this you can see it behaves much better and we can also control where the knee points by animating the pole target bone let me quickly clear what i've done here in pose mode by selecting all of the bones and pressing alt g now if we press tab to go into edit mode we're going to want to mirror the arm and leg bones onto the other side of the character now to do this we're essentially going to be duplicating those bones and then scaling them by -1 across the xais around a central point so let's press zed to go into y-frame mode so we can easily select these bones now you can see oops didn't mean to select the hip bone you can see that by default these will transform around the average of their positions which is this point over here so if i were to rotate it or scale it they all move towards that point now we can change it so that instead of the the transform point being the average of their positions it is instead the 3d cursor so if we press shift c to center the 3d cursor and then press period or the full stop key that will change the point of transformation to the 3d cursor so shift d to duplicate the bones then right click to cancel the sort of automatic move control that you get when you duplicate we now press s to scale x to scale around the x-axis and then type in -1 to flip those across then hit enter to confirm and we'll now want to go onto the amateure here and we'll want to say flip names now because we were so strict with our naming convention ofl it's picked that up and on the other side here you can see it's changed it to upper arm. r all right so our rig is now set up all we need to do is make a so that if we're in pose mode and we rotate a bone it actually affects the mesh now you can see it's currently still transforming around the 3d cursor so let's press comma to change it back to its default setting now what we're going to do is we're going to select the character object and then shift select the bones and press contrl p and we're going to parent with empty groups so we'll see what this has done in a moment for now just make absolutely sure that you have the armature selected and that it is in pose mode and then we're going to want to select the character and go over into weight painting mode now if you were in pose mode previously you can see we are able to select the bones in weight painting mode and if we go over here onto the mesh data you can see that vertex groups have been added in with the same name as all of our bones it's also important to note that the only names that are missing here are the ones belonging to the pole target and the ik bones and the reason for that is of course that we specified them as being non-deformation bones all right so let's start with the hips here with that bone selected we're going to press tab to go into edit mode mode on the mesh and let's deselect everything and then just hovering over the hips here let's press l to select that and we can hit assign if we now press tab that will take us back to weight paint mode and you can see that the hips are now red showing that the hipbone has been assigned those vertices we can now select the spine bone and then once again press tab and let's just select this chest and the joint and assign those and repeat this process for all of the bones so the upper arm select that and the shoulder joint and assign and what's cool is you'll see that this has been mirrored over onto the other side so let's now go ahead and do the lower arm assign that then the hand oops the leg the the lower leg and finally the foot all right so we should see that we can now control our rig very nicely and that that controls the character let's get out of weight painting mode by pressing control tab and and then i'm going to select the amature which is now in pose mode and one thing that would be very nice is to be able to control the entire leg as well as the foot with just this single bone but currently if we rotate this nothing happens so in edit mode let's select the foot bone shift select the ik bone and press contrl p and parent with offset the foot to the ik we'll do that with the right foot as well so now back in pose mode we can see that we can rotate the foot just by rotating the ik bone now this comes at a small cost if we move the hips up you can see that the legs can actually detach from the feet this can of course be solved with a more advanced foot rig but for now we'll just be careful when animating to make sure that the joint doesn't disconnect oh right another thing i'd like to do is to create a root bone so that we can easily move the entire character around so with the 3d cursor at the center i'm going to go into edit mode press shift a to add in a bone and i just like to move this all the way down i can hold down control to make it snap in increment so i can make it perfectly aligned with the ground plane and then i'll just move this in make it a little bit smaller and and we're going to want to parent the hip bone to this so select that shift select the root bone contrl p keep offset and let's just quickly go and actually name this root and turn off the deform property for that as well and then we're also going to want to parent both of the ik bones as well as both of the pull target bones to the root bone so contrl p and keep offset now to get rid of all of these annoying lines that have filled our scene we can press n and let's just go up to the display options if i can locate those right here and we can turn off relationship lines all right that wasn't entirely successful but they will be gone in pose mode so that's something so we can now see that moving the root bone around moves the entire character with the exception of the ankles which i seem to have somehow forgotten so let me do this whole thing again select the character go into weight painting mode select the feet and let me just zoom in here so that i don't miss them and going to want to assign this to foot. l and okay that one's been set up automatically now as well all right we are very nearly done with our rig just one thing left to do so when we're animating it's extremely helpful to be able to flip a pose from one side of the character onto the other side of the character and we can do that by selecting the bones we want to flip pressing contrl c and then shift contrl v now you can see it hasn't got it quite right at least in my case it may be different in yours so what's going on here if we go into edit mode you can see that each bone if we go into the bone properties has got a roll value now what we want to do is we want to let it automatically recalculate all of these r values so that they're correct so let's select all of the bones and please make sure that you're in edit mode for this next step we're going to press contrl n and of course if you're not in edit mode then this will load up a new file and you might lose all of your progress so make sure you're in edit mode and then let's recalculate the role based on the view ais which i have set to front at the moment click that and what we should now see if i just reset the bones in pose mode is that if i repeat this process contrl + c shift control v it is pasting the pose correctly it's quite possible that this process of recalculating the bone roll will have messed up your ik setup as it has mine so we'll want to go onto the lower leg bones and just give the pole angle it's new correct value it's a little bit hard to see what it should be when the foot isn't sticking out at an angle since it is now parented to the ik bone so what will probably be easiest is just to quickly grab the foot bone and parent that to the lower leg bone and then in pose mode we've now got an easy indicator of what forward is so it should be at 90degrees now and i'm going to assume that that is the same for the other leg and then we can just go ahead and parent this back to the ik bone so we're back where we were but now our ik is working again all right that's very nice so we're going to leave this here and in the next episode we'll be animating the character until then cheers