a viewer named natalie sent me in this youtube 
short about minecraft which apparently had an   interesting math question in it it starts showing 
a player trapped on a platform in the air and the   only thing they have to escape with are some 
oak planks how on earth are they going to get   out of this situation so what do they have to 
do it's super easy just make a boat which is   what they did and what why did they die it turns 
out in minecraft if you fall in a boat you don't   sustain any damage except at a few very specific 
weird heights unless you fall from 12 13 49 51   111 114 202 310 or 315 blocks cuz for some reason 
from these heights your boat breaks and you die   i have no idea why and i have no idea why either 
so i don't play minecraft and don't panic if you   don't you just need to know that you can mine 
and collect resources build things and if you   build a boat it should protect you from falling 
but something weird is happening and it involves   some numbers but what is it about these numbers 
which mean if you fall from those specific heights   and only those heights suddenly the protective 
effect of the boat sinks i did all my usual   approaches to work this out i had a look on the 
online encyclopedia of inder sequences and nope   nothing googled them nothing i spoke to my friend 
oliver dunk who helped on my previous minecraft   video many years ago about the dream speedrunning 
controversy and ollie managed to find a bug report   boats crash sl break and can kill their passengers 
when falling from certain distances this is the   bug report and you can see it was created back 
in 2017 glad we're finally getting on top of this   and there's a lot of discussion people trying to 
work out what's going on there's the values we saw   earlier there and then a lot of discussion 
down here saying what's going on people trying   to work out what the codee's doing work out 
way different values appear which versions of   minecraft it does or doesn't appear in and even 
here they've reverse engineered the source code   from minecraft to try and sort out what's going 
on so huge thanks to all these very clever people   from digging through it and trying to work out 
what's going on and of course we're not just going   to trust camman' or the bug report we're going 
to try it ourselves oliver set up a huge grid of   boats one at every possible height let them all 
fall and we tracked exactly which ones broke and   which survived and sure enough the vast majority 
survive except for a few at those very specific   heights the solution to this problem involves both 
triangle numbers and floating point inaccuracy in   binary representation of numbers it's so good 
the two things you need to know about minecraft   before we go into the explanation is it's a world 
of blocks everything is not rounded to the nearest   block but when you're falling you're really going 
block to block and the distance from where you   start to where you land is going to be a whole 
whole number of blocks so we care about complete   blocks there is also gravity here on earth we 
have about 9.81 m per second per second gravity   so if you start falling every second you're 
falling the velocity at which your falling   goes up by 9.81 m per second you know how gravity 
works it's acceleration in minecraft acceleration   due to gravity is 0.04 blocks per tick per tick 
so instead of putting it in seconds it's in the   minecraft tick which i believe is one 12th of a 
second and that's how often the code updates where   you are and how you're moving so quite pleasingly 
we don't have to worry about continuous constant   acceleration where you can keep subdividing time 
as small as you want there's a finite little chunk   of time and we just recalculate each one of those 
so we can see what happens if you fall by going   through it one tick at a time time so you start 
your free descent by either dropping off a ledge   or destroying the block underneath you and at t 
equals z right at the beginning your velocity is   zero one tick later your velocity will be 0.04 
blocks now the actual what the time is i don't   know how the code deals with when it updates your 
velocity based on the acceleration and actually   the exact times are ir relevant so don't panic 
too much about those the point is after one tick   later you've now fallen than 0.04 blocks but it's 
a teck later so now your velocity is 0.08 blocks   per tick so after the next tick you go an extra 
0.08 but now your velocity is 0.12 so after the   next tick you do the extra 0.12 now your velocity 
is 0.14 you get the idea and then you go that far   down so the total distance you've traveled is 
0.04 in the first tick 0.08 in the second tick   so there are multiples 0.04 it's one of them 
and then you add on two of them and you add on   three of them you add on four of them all the way 
down and that's your equation for how far you're   falling and we can rearrange that in a nice neat 
form it's just 1 plus 2 plus 3 + 4 however long   you're falling for and then you multiply the 
the total which some of you may recognize as a   triangle number by 0.04 but let's have a look at 
what happens when you reach the end of the first   block so before you get one block down the tick 
before that you're a little bit above it but in   that interval you're going to move 0.28 blocks 
which means a tick after you're below it so   between the calculations of ticks you will cross 
the threshold from the first block to the second   block much later on when you come across the 
12th complete block of falling something very   interesting happens right before you hit it you 
are above it but then the distance you fall 0 this is the same thing but showing you there's 
a tick where there's a one and there's no tick   where there's a zero so that lead zero there 
that's the sign positive or negative this is   a you know signed number and then you got the 
exponent that's the next eight of these so this   is basically a scientific notation scientific 
notation for binary numbers and then yeah here's   your actual value and this is just telling you how 
much to shift it to get at the right size however   because we want to do four which is kind of fine 
in base 10 putting that in the binary doesn't fit   neatly like here this has to be truncated and 
because it's been truncated we've lost it's   like trying to write a third in base 10 you you'd 
want to have you know infinitely many threes but   at some point you got to stop writing them down 
and at that point you lose you lose a little bit   of precision and so this is how much precision 
we've lost and then here this is showing you the   actual value stored which is so close 0.03 no no 
no no but it's not it's not quite it's not quite   four and i blame binary what this means is you are 
ever ever so slightly off where you should be you   don't exactly line up with the edge of the block 
you're just just above it if we go back to our   previous time when we were crossing over the one 
block barrier the slight inaccuracies here don't   matter but i do want to use it to show you what 
the code is doing as you are falling so at tal 6   inside the minecraft code it has a value for your 
current status which as you for is in air this is   just recording the fact that you were just you're 
in the air you've also got another value assigned   to you which is if you're on the ground which 
feels weird that it's separate but this is a a   true false this is just boolean are you on the 
ground are you not on the ground cuz you can   not be on the ground while not being in the air i 
don't know maybe you gone for a swim or something   i don't know i don't play minecraft a lot of 
you do put it in the comments how can you not   be on the ground but also not be in the air i'm 
sure it's a situation that happens a lot and now   imagine instead of passing through the block that 
you started falling one block from the ground so   you can't you're not going to go all the way down 
there for t equals 7 you're going to slam into the   ground now the code when you hit the ground the 
first thing it does is update your on ground value   to be true you've now smacked into the ground that 
causes another bit of the code to kick in which is   the check full damage code it's going to work out 
how damaged the boat and you should be because of   the fall except before it does that it has a look 
at your status and if your status still says in   air it knows that this fall damage is of a result 
from falling which i know sounds repetitive but   this is what the code does and it then doesn't 
apply the damage so if you were like falling or   som getting damaged but you were already on the 
ground you would receive the damage but because   and it know it hasn't updated your your status 
yet because it says in air it's like oh that's   fine no damage for you you were in a boat well 
done but what happens in the case where you're   very very close to the ground well the code still 
doing exactly the same thing except on this point   here you've not hit the ground yet because you're 
only 11.99 n99 blocks down you're still 0. you're   a tiny amount above the ground so on ground 
hasn't changed however the part the code which   checks to see if you're in the air or not it's got 
a tolerance on it it's within .1% it checks 0.001   block away from where you are just to catch edge 
cases i assume this was fixing a previous issue in   the code they're oh fine just check around a bit 
so if you're so close but not quite it's still   going to register it so it actually records you 
as being on land now you slam into the ground now   on ground is true it enacts the check fall damage 
that has a look to see if you were previously in   the air but you're not because the previous tick 
even though you hadn't hit the ground yet it has   still recorded you as being on land so it assumes 
the damage you're receiving is not because of   a fall it's for some other reason and you're not 
protected against that and that's why the boat and   you get damaged it doesn't realize you're falling 
because one tick the smallest quantum of time in   minecraft you would not quite on the ground so 
on ground was still false but you were close   enough to the ground that your status switched 
to being on land now it's time to work out where   those numbers were coming from we saw before that 
it's 1 + 2 + 3 + 4 all the way uptimes 0.04 that   gives us the distance you're falling if this is 
all the way up to some number n we can replace   all of this with the equation for triangle number 
which is n * n + 1 all / 2 and that times our 0.0   4 has to equal i don't know some whole number k 
to get that alignment we need the 0.04 to become   a whole number which means the triangle number has 
to have a factor of 25 which is to say actually if   we were to simplify this down we could remove it 
on that side is 25 * some constant cuz 25 * 0.04   is 1 so how do we know when our triangle number 
here is a multiple of 25 well triangle numbers as   you can see at the top are some number n time one 
more than that number n + 1 actually which is why   triangle numbers are always whole numbers despite 
being divided by this two here because you got two   consecutive numbers one of them is a multiple of 
two so n * n + 1 is always an even number we need   this whole number to have well a prime factor five 
and another prime factor five so there's a 25 in   there somewhere famously multiples of five are at 
least five apart so we can't have like n can't be   one multiple of 5 and n plus one another multiple 
of five one of them has to be a full-on multiple   of 25 and actually can be n or it could be n + 
one in this equation time for a worked example so   let's take well let's take 25 why not it's 1 above 
24 the triangle number of 25 * 24 / 2 is 300 which   if you divide that by our 25 that equals the 12 
block drop that we saw at the beginning but the   next number up is is 26 and the triangle number 
you get from 25 * 26 / 2 is 325 also divisible by   25 that gives you a drop of 13 the next number 
on the list and the next multiple of 25 is 50   that works the triangle number between 49 and 50 
is 1,225 that gives us a fall of 49 blocks and 50   to 51 1,225 gives us 51 the equation in general 
is you've got 25 some multiple of it you then   multiply it by the number either above or below 
it because both work you divide that by two to   get the triangle number and then you divide that 
triangle number by 25 to get the number of blocks   you're going to fall and this equation perfectly 
generates and explains all the numbers we saw in   the original short oh yeah and we could cancel 
these fun side point of course i made a spread g   to double check my formula definitely worked and 
checked that it would generate all the values we   saw in the short and sure enough it does except 
this one here which was missing this one wasn't in   the original short for some reason when it comes 
to this pair they've only got 202 there you go oh   and yes of course you can extend this for bigger 
values but this is the ones that we see in the   game one last footnote i had to mention before 
the boats were empty in ole's simulation because   he noticed if you've got a player in the boats it 
slightly changes the behavior and it doesn't break   falling from some level something to do with how 
the game is processing whether or not it counts   as a vehicle but we decided that was one step too 
far for now that's it and that perfectly gives us   that list of numbers we saw in the original short 
they haven't that's how floating point errors and   triangle numbers solved a mystery in minecraft i'm 
so pleased with how this went huge thanks natalie   for sending that in and if any other viewers see 
interesting mathematics and the wild please do   let me know thanks to cam man8 i assume that's 
how it's pronounced for making the short in the   first place and bringing it to our attention and 
thank you to all the people who got to the   bottom of this ol of a dunk for giving me a hand 
uh sorting it out and everyone on the bug report   trying to reverse engineer the code and do it i 
will link to all these things below if you want   to check them out for yourself and thanks to my 
patreon supporters who mean when i discover some   breaking minecraft news from 2017 i can within 
the decade i can i can leap to it i only found   out about this last week so thanks for patreon 
supporters they mean that i can drop what i'm   doing and put together a video like this whenever 
i come across a really interesting bit of in this   case programming and and computer science combined 
with mathematics and and counting and hopefully if   you're watch this because you're into minecraft 
youve now also realized that as well as enjoying   playing minecraft you can enjoy doing some 
recreational mathematics please subscribe   plenty more where that came from probably start 
with the dream the dream video is probably the   video for you if you're here for minecraft reasons 
for everyone else i don't know watch it again