this video is going to be all about screen replacements and compositing screen comps and screen replacements are real vfx bread and butter it's one of the first things you'll get given to do if you're a junior compositor and it will continue all the way through your career before we get into the technical side of how to do it in nuke i think it's important to touch on how to shoot for a screen replacement so first of all for tracking you want to have something to track and in most cases you're better off putting some sort of matte tape on the screen rather than having the screen on with any tracking markers on it the reason for this is that when you get reflections passing over the top of the screen they can complet completely go over the top of your tracking markers and it will make it basically impossible to track whereas if you're using some matte tape that reduces the sheen effect you get from highlights of light sources it's a common misconception that shooting with a green screen will actually make this process easier i guess the thinking behind that is you can key out anything that moves in front of it in most cases i'd recommend actually shooting with the screen completely off so it's much easier to extract the reflections the reason the green is so problematic is because it's a very bright color and when you have a very bright color on the screen it will actually make it harder to see the reflections and extract them later you can see here as i turn up the brightness on the screen and it goes from black to green the reflections become much harder to see and in some cases completely disappear so with that out the way we can now jump into nuke and go over the technical aspects of doing a screen replacement i've got a few different setups here where i shot in different circumstances so we've got the black screen here i shot with a green screen to show why this doesn't really work very well there's an example of doing this with motion blur i've got an example where i'm actually touching the screen and then the same thing but with the screen set to green all of these pieces of footage will be available on my patreon for people that want to download them and try this out themselves for practice and i'll also be sharing this n script so you have the setup and you can copy it and see how it works so starting off with the main plate this is the one that's going to be doing the majority of the work as you can see here throughout the course of the shot i'm just slowly moving around the screen this means we get some nice moving reflections over the top i'm going to actually take this and move it over here and start from scratch so that we do this together and you can see the whole process so the first thing to do with screen replacements is you want to actually remove the markers as you can see i've done that over here and what that means is that when you go to put the reflections back on top obviously you don't want the markers to be there so we're going to be merging a nice clean black screen over the top of what we do later to remove the markers all i did is do a onepoint track for each of them so add a tracker node next up i'm just going to jump in and add my trackers okay i finished all of the tracks once that's done the next thing we want to do is actually remove the markers so what i'm going to do is unplug this and add a transform mask node this is one of my favorite ways to get rid of tracking markers nice and quickly i'm going to add a roto node and just draw some shapes around a couple of these tracking markers what i'm do is take the pixels above them and move them down so i'm going to do these two first cuz i can move both of those down and then i'll do these two at the top and move the pixels below them up slightly so plug the tracker into the roto node and then the mask input of the transform mask into the tracker and then i'm just going to move these down as you can see add a blur node and just crank that up a little bit and that's working pretty well it's not perfect but once the screen goes on top you won't really see that patch so it doesn't really matter too much if this was a proper shot at work i'd probably put a bit more effort in to save a little bit of time i'm just going to grab the cleanup setup that i've done over here and copy and paste it i do have a tutorial that's specifically about removing tracking markers and cleanup so if you want to watch that i'll leave a link to it below now onto the main event adding the screen for these demos i just used a checkerboard so let's just add another one of those next up we want the checkerboard to go onto the screen so to do that i'm going to use a corner pin node then i'm going to add a merge node and just merge this over the top of our cleanup i'm going to turn it off for now so i can see what i'm doing and double click the corner pin node and just grab these corner points and move them inwards like this once they're inside of the screen i can then zoom in and actually go into details and move them into the correct position a lot of screens actually have bezels so for example my macbook you can kind of see it along the top here the screen doesn't go all the way to the edge it actually sort of stops about here so make sure you keep that in mind whenever you're doing a screen replacement usually you don't want the screen to go all the way to the edge that looks about right to me so now if i turn the merge back on you can see what it's doing and then just make any adjustments if you need to now obviously this is only on one frame so what we want to do now is apply some actual tracking onto this so that it moves correctly with the screen we've already done the tracking because we tracked the markers earlier for the cleanup so what i'm going to do is double click on this tracker i'm going to select all of the trackers so i'm going to hold down shift and click the bottom one so it selects all of them and then i'm going to click export on this corner pin 2d node if i press create it's going to create a corner pin node then if i come down here i'm going to put this underneath the existing corner pin node and now if i scroll through you can see that it tracks so that's the basis of actually replacing the screen one thing you should probably do and i'll touch on a bit more later is turn on the motion blur in the corner pin node setting motion blur from 0 to one will actually turn it on and then the motion blur will appear and i also normally change the shutter offset from start to centered that just changes at what point the motion blur is calculated i usually find the scented is the one that looks more correct with the actual liveaction footage and again i'll talk about this more in a bit the next thing i'm going to do is just match the sharpness of this checkerboard to the actual plate as you can see currently the checkerboard is perfectly sharp whereas the actual plate has a little bit of softness to it might be that the laptop screen was a tiny bit out of focus or just generally the softness of the plate so i can do this by adding a defocus node and i'm just going to keep it really low probably less than 0.1 maybe a little bit higher maybe about there and as you can see that softens the edges slightly and it softens the pattern on the checkerboard itself maybe that's a little bit strong that looks pretty good next up i want to make sure that my black and white points of the screen content are roughly in the correct place to do this i'm going to make myself a little bit of space i'm going to unpre the image and then i'm going to add a preol afterwards and copy the alpha in just to make sure that our edges stay the same while we're doing the color correction so i'm going to copy the alpha in from above the on premolt up here then we can add a grade node and start to mess around with the black and white points to check the white point i usually gammer all the way down this allows you to see just the really hot highlights in the shot and it gives you a good sense of how bright what you're adding in should be so in this case i think the computer screen could probably go a little bit brighter the reflections and the lights in the background and everything and even this highlight from the window on the laptop are quite a bit brighter obviously the laptop screen isn't the same brightness as the sun outside so it shouldn't match exactly but this is a good indication that it could probably come up a little bit so i'm just going to take the white point and just push it to the left slightly until it feels like it's a bit more in the the right place i'd say something like that probably feels about right this is a little bit subjective there's not really a right or wrong pixel value to get it to then if i reset my gamma i can turn the gain all the way up in the viewport to check the black point and here i would say that the black point feels like it's a little bit too high you can see the dark stuff in the shot is a bit more crunchy whereas the checkerboard itself is actually pretty light and lifted so i can take the black point and just push it down a little bit again it's a computer screen so we don't want it to be too punchy but just a little bit lower probably feels more correct so that's the difference if i turn it on and off that might even be a little bit strong looking at it in the normal view so what i might do is just turn the mix down a little bit it looks a bit more like it's actually on the screen now and it matches the contrast in the shot better next up what we want to do to really add this into the shot properly is add the reflections back on top and like i was saying earlier the fact that this is shot on black makes it much easier to extract those it's really simple to do this because we've got this un premolt and preal setup all we have to do really is just merge the footage over the top of this checkerboard and set it to screen so if i do this add a merge node in here before the copy node set this to screen and there we go our reflections are instantly on top creatively you can choose to turn the mix up or down to add more or less reflections i tend to leave it on the default setting cuz mathematically that's probably exactly what would happen that's already looking pretty well embedded into the shot now we probably want to introduce a little bit of grain onto the image that we're adding on top just so that it matches what's underneath it if i crank this up you can see there is some grain on the screen so underneath this defocus i'm going to add a grain node this is obviously too strong at the moment i normally turn these right down usually about half of what they are by default is a good starting point and then just go from there just subtle but it helps to bed it in slightly more another thing i sometimes do depending on if the screen is a bit dodgy or if you're looking at it from an angle is add a bit of a vignette onto the edges it's the kind of effect you get when you look at a screen from side on and it doesn't display the picture perfectly a really simple way to do that is to add a crop node look at the alpha and then just turn up the softness a little bit and that will actually eat into the edges of the picture then i can blur this a little bit more if i want to as well maybe like 300 and then add a crop node back onto this and copy this alpha into the the checkerboard and preol it that's obviously way too strong at the moment so you can turn down the mix on the copy node and this will determine how much of that eroded alpha is actually copied into the main stream it just adds a little bit of variety into the screen so it's not exactly the same luminance across the entire thing cuz normally screens don't display exactly like that and lastly we can also add a little bit of a glow if we want to as well probably wouldn't get so much of it in the daytime but if you shot at night this is obviously going to be a light source and if it's on a dark background you'll get some kind of bloom and glow coming off of the screen so if i add a little glow node down here we can add a little bit of it in again less is more with this kind of thing it's really easy to go too heavy-handed when you're adding glows and comp if it was a darker shot i'd go a bit heavier but for this daytime scene i think this works pretty well so just to summarize if i turn off all of the things that we've added that's before and that's after so that's a pretty comprehensive look at how to do a screen comp so just to touch now briefly on a couple of the other bits that i showed over here at the beginning this is the same sort of shot so it's filmed at the same angle but but for this one i obviously turned the green on the screen on and if i try and do the same thing so let's do an un premolt and then a preot and screen the footage over this very clearly doesn't work because it's not black and white and we have the green in there there's not enough contrast in the reflections to be able to extract anything as you can see there's some in there but the dynamic range of the screen is massively less than what we had before on the black so that doesn't work and then you might be thinking well maybe you can key it because it's green well this is what happened when i tried to key it so this is using a key light node and i just color picked one of the green areas first of all the key is obviously very noisy that's because although this looks like quite a flat green it's not actually a very good reproduction of the color to try and do a chroma key so it's really messy and there's a lot less that i can extract from this as well so if i ed that key to mask out the footage and then put it on top you can see the reflections are absolutely terrible the other thing like i mentioned earlier is adding some motion blur into your shot so in this one i moved the camera very quickly from side to side so that i can demonstrate this so again i did the clean up on the markers and then i put the checker board over the top in the tracker node here i've got my motion blur set to one and i actually turn the shutter up above 0.5 which is the default and set it to 7 you can change this to taste just kind of depends how much motion blur you want if i set it back to 0.5 you can see it didn't feel like it was stretching quite as much as the actual plate so i just turned it up a little bit to 7 which seemed to work nicely a lot of people that are just starting off doing screen replacements and stuff in after effects when they're learning v effects won't add motion blur and so their screen replacements will look like this this is a bit of an extreme example but you kind of get the idea it without it it really sticks out because the screen remains perfectly sharp while your background plate has lots of motion blur so let's turn that back on and it looks much better i also mentioned earlier that i changed the shutter offset from start to centered if i set it back to start which is the default you can see what happens it's a different way of calculating the direction of the motion blur and the origin point and as you can see it now feels like the checkerboard is a little bit offset from the actual laptop screen so i usually find that changing it to centered makes it behave in a way that you would expect and lastly i've got a couple of examples of touchcreen so if you have someone actually interacting with it and again it's much better to shoot this on black than it is to have a green screen so again if i remove the markers you can then put the the checkerboard on top with all the bells and whistles replace the reflections like so and then roto the hand back on top in this case i didn't even really roto it my hand was light enough that i was able to pull a luminance key quite well and then a couple of rotor shapes just to fill in any holes and do a garbage mat if i was doing this on a professional shot i'd probably actually send this out for roto just to be safe or i'd put a bit more work into the key but again just for a youtube video i can get away with this and so that works really well you can see you've got the reflections of my hand still in the screen the reason i think people sometimes think shooting on a green screen might help is for this situation because you might think that if it's green you won't have to do any hand roto because you can just key it like i discussed before obviously the issue with the reflections is one of the big things the other issue is that the screen is so bright is actually casting loads of green light onto my hand so if you were to try and ke this it would actually be very difficult to separate the green of the screen from the green spill on the fingers so for example if i just try this very quickly let's add a key light sample this color and as you can see all of that green on my knuckles and everything is also being included in the key this example is not actually that bad because i probably could make this work with a little bit of a grade but i'd have to go quite punchy and i'd be losing some of the detail in the fingers and again even though that might work okay you still got the issue of restoring all the reflections which is going to be a nightmare and it's particularly problematic when you've got someone actually touching the screen because that's where you should see their hand reflected in the screen like you did on this one so i did my best just to slap this together the green one isn't terrible but it definitely doesn't look as natural as the one that's shot on black and it just saves you a massive amount of headaches later down the line so there we go hopefully you've learned a fair bit about the nuances of replacing screens in vfx like i said earlier the assets are available on patreon if you would like to get the footage and download it and have a play yourself and until next time thanks for watching and i'll see you in the next [music] video