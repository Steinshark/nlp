hello in this episode we're going to look at two very basic trigonometry problems which crop up quite frequently when making games the first problem is if we have some angle say for example 120degrees how to calculate a direction vector from that the second problem is just the reverse operation if we have a vector pointing in some direction how to calculate this angle along with solving these two problems we'll also be looking at how to convert between radians and degrees and how to actually use these trig functions inside the unity game engine all right let's start with a unit circle which is just a circle with a radius of one centered at the origin so if we create a pair of axes the circle obviously cuts the x axis at xal ne1 and x = 1 and cuts the y ais at y = -1 and y = 1 we can also label the angles starting with n degre here on the right and increasing anticlockwise okay now say we have a vector pointing in some direction and all we know is that this angle over here which will label theta is equal to 120degrees we're trying to find the coordinates of the point where the vector touches the circumference of the circle since those values are of course the x and y components of the vector by drawing in these components we get a nice right angle triangle now i want to emphasize that it's technically incorrect to think of x and y as being the lengths of these two sides of the triangle since lengths of course can't be negative however i like to think of them as representing the side lengths anyway and i'll be referring to them as the lengths in this video since i find it to be the most intuitive picture all right time to introduce three trig functions s cosine and tangent as you can see the s function takes in the angle theta and calculates the ratio y over the radius cos calculates the ratio x over the radius and tan calculates the ratio y /x so if we want to calculate this y value we can use our s equation to write y / r is equal to sin theta since the radius of the circle is equal to 1 we can simplify that to y = sin theta and we can likewise write that x is equal to cine theta so that is in fact the general solution to this problem our vector points in the direction cos theta comma sin theta in this example we said that theta is 120degrees so we can just use a calculator to find cos 120degrees equal half and sin 120degrees is about 0.87 before we move on to the second problem i'd like to look at the graphs of the s cosine and tan functions so we saw that sin theta is simply the quote unquote length of this blue line and cos theta is the length of the green line from this animation you can see how these values change as theta increases so plotting the length of the blue line as theta goes from not to 360degrees we get a plot of sin theta we can do the same thing for the green line cosine and we'll notice we get the same curve just offset by 90degrees from this we can tell that sin theta is equal to cosine of 90- theta and conversely cosine of theta is equal to sin of 90- theta now what about the tan graph well tan theta gives us the ratio y /x so it's equal to the blue line divided by the green line this means that tan theta is equivalent to sin theta over cos theta anyway way let's plot tan theta unlike s and cosine which are both in the range -1 to pos 1 tangent has a range of negative infinity to positive infinity okay we're going to come back to the tan graph in a moment but for now let's take a look at problem number two in this problem we know the x and y components of our vector and we're trying to figure out the angle so in this example we know that x is equal to. 71 and y is equal to positive. 71 let's try solving this using the tan ratio so tan theta is equal to yx therefore in this case tan theta is equal to 71 over. 71 which of course is just equal to -1 let's head over to our tan graph and see if we can use it to figure out the angle if we look at where tan theta is equal to1 on the graph we'll notice that there are two possibilities either theta is equal to 135degrees or it's equal to 315degrees in this case we can you can tell by looking at the diagram that the correct one is 135degrees now obviously you won't usually be manually looking up the answer on a graph you'll instead use the inverse functions which are arc s arc cosine and arc tangent now these functions will just return one of the two possible solutions which is a little bit inconvenient and it's for this reason that many programming languages have got an extra function called a tan 2 instead of taking in the value of 1 x it takes in the y and x values separately to see why this is helpful let's divide our circle into four quadrants obviously y is positive in the top two quadrants and negative in the bottom two while x is positive in the two on the right and negative in the two on the left so if we use that a and 2 function passing in 71 and negative. 71 the function can see that the y value is positive and the x value is negative meaning that the answer must be in quadrant 2 by narrowing the search down to a single quadrant the function is now able to find a single correct answer all right so the general solution to our second problem is that theta is equal to a t 2 of y x okay so having covered the two problems we set out to solve i'd like to move on to radians as you may know radians are an alternative to degrees as a way of measuring angles the idea of radians is as follows if we create an arc with the same length as the radius of the circle the angle that it makes at the center of the circle is equal to 1 radian if we keep going around the circle you'll see that we can fit about 3.14 of these arcs into a semicircle more precisely of course that figure is pi so n degre is simply not radians 90degrees is pi/ 2 radians'0degrees is pi radians 270degrees is 1 and 1/2 pi radians and once we reach 2 pi radians we're back to zero knowing this we can easily convert from degrees to radians by multiplying by pi over'0 and to go the other way around by multiplying by'0 over pi unity's trig functions all work in radians as we'll see in just a bit but first i'd like to point out that if we're creating a 3d game then the convention in unity is that at not degre on the y axis a character faces forward along the zed ais as we increase the angle the character rotates clockwise so we could represent this with a circle like so which is of course different to the unit circle we've been using where not degre represented a direction along the positive x- ais and the angles increased anticlockwise let's put these two circles side by side the conversion between the two is very simple it's just 90 minus theta take for example'0degrees from this circle to convert it we just do 90 -'0 which is equal to ne 90degrees which is of course the same thing as 270degrees and converting the other way is exactly the same 90 - 270 equal -'0degrees which is the same thing as postive'0degrees keeping this in mind i'm going to go into unity where i have a simple player setup just made out of a capsule and it's holding little cube object you can maybe imagine as some sort of weapon just to show what the character's forward direction is i'm going to right click create a new cop script and i'll just call this trig test and i'm going to apply that to the player object can then open that up and in here i'll start by creating a public float called angle in degrees and then in the update method i want to get a direction from that that angle so we saw how to do this we can create a vector so let's make this a vector 3 call it direction is equal to a new vector 3 and now we use cosine and s so mathf do cos of angle in degrees and we need to convert this to radians because all of the unity trig functions work in radians as i mentioned earlier so we do that by multiplying by pi over'0 well alternatively unity's actually gone and stored this conversion factor inside a variable called degrees to radians which is a little bit easier to remember so you can just write multiplied by mathf do degrees to radians and you can see this just stores the value of pi/'0 all right then on the zed axis for this vector let's have math f do sign of angle in degrees multiplied by once again math f. degrees to radians all right now just to see what this direction looks like let's draw array so debug. draw aray from transform. position in the direction that we calculated and we can multiply it by some distance say three and then let's give it a color maybe color do green all right let's try that out so press play and you can see the green line sticks out to the right along the x-axis and as we increase the angle it goes around anticlockwise now as i was talking about earlier if we want that direction to point forwards at 0degrees and increase clockwise with the rotation as our character does then we have to do that 90 minus theta conversion so over here before we multiply by degrees to radians in brackets we have 90 minus angle in de and same thing over here 90 minus angle in degrees if we save that now we'll see that it works as expected now recall that when we actually plotted sin theta and cos theta we saw that cos 90 minus theta was equal to sin theta and likewise sin 90 minus theta was equal to cos theta so if we wanted we could remove this 90 minus business over here and here and instead just swap cosine with s so make this s on the x axis and cosine on the y ais or in this case the z axis and you can see that this is exactly the same thing all right so that was the first problem let's now look at the second problem of getting an angle from a direction so i'm going to to use the example of getting the keyboard input for the arrow keys and using that to find the character's rotation so say we get a vector 3 called the input direction so it's equal to a new vector 3 and on the x-axis we have input. get axis raw horizontal on the y-axis we have zero and then on the z axis input. get axis raw vertical and we can now normalize that to give it a magnitude of one so it's a proper direction vector and then we can move our character around with transform. translate input direction multiplied by time do delta time let's just give it a speed of five say and then this should be relative to the world okay so if we try that out let's press play can use the arrow keys now to move the character around okay now to actually set the rotation let's create a float called input angle and we'll set this equal to math f. aan 2 passing in the y and x components of our directional vector or in this case since we're using a 3d vector it would rather be the zed and x components so input direction do z and input direction dox and 8 10 2 returns the angle in radians so we need to convert from radians to degrees of course by multiplying either by'0 over pi or simply using math f do radians to degrees okay let's then write transform. oiler angles is equal to vector 3. up multiplied by the input angle so we're just rotating our character around the y- axis by the input angle if we save that and press play can move around and we'll see that the rotation isn't quite corresponding correctly to the input by now of course that's no mystery to us it's this whole 90 minus story again so we just add 90 minus our angle over here and that should now work correctly so we move around and we can verify that it is working how we wanted to the last thing i want to mention is that similar to how we could get rid of the 90 minus in this example over here by swapping s and cosine can also get rid of the 90 minus over here by swapping the two components so i can swap x with zed and if we save that now we'll see that it works in exactly the same way okay that is everything for this video over the next few episodes we'll be working on our second mini project to put all the stuff we've covered so far into practice until then cheers