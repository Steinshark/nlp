okay, so today we're gonna talk about this fantastic little puzzle it's called the 15 puzzle and you can see it's a tray with 15 little squares each numbered 1 through 15 and one blank so we can move the squares around let's say we want to get these in order so i'm gonna move these around i've got 1 2 3 already and then the third row should have 9 10 11 12 and then 13 14 15 oh you're good at that! so there we go. we can only make moves where we switch one tile with the empty spot so i can't switch this one and that one for example because there's no blank to move them around in what we want to talk about with this puzzle is some of the mathematics behind it so we went out yesterday and found some examples of these puzzles that you could buy in the stores around here and we found something very interesting on the back of the package. it shows you some of the patterns that you might try and arrange the tiles in so the one that we just did was 1 through 15 here this one has 1 2 3 4 in vertical lines rather than horizontal you might want to do evens and odds, the various possibilities you could come up with including a natural one you might try and do which instead of going from 1 to 15 goes from 15 down to 1 so in reverse order but this is very curious: try as you might, you will never be able to do this arrangement so, how they ended up on the back of this package is a real mystery, but that's the mystery that we want to explain today. so that's like they're giving people this impossible task? it seems like it i don't know what they were thinking. did you play this game when you were a boy? i had several versions of it including the standard ones like this. i also had some versions that instead of having numbers had pictures. i had one that had a map of the world and the object was to you know recreate the map of the world. but yes, i certainly wasted more time than i should have on these puzzles it was invented in around the'70s . a famous american puzzle maker named sam lloyd claimed that he had invented it but apparently that's not case but what he did do in around the early'70s was he issued a challenge to the public and he offered $1,000 to anybody who could accomplish this so his challenge was to take the 15 puzzle in the arrangement where the numbers are in order 1 through 15 and rearrange it so that 14 and 15 are switched he offered $1,000 for this but the sneaky thing about this is that this is also an impossible arrangement but this caused an absolute national frenzy everybody was involved in trying to do this. a serious mathematics research journal called the american journal of mathematics published a paper called 'notes on the 15 puzzle' and what the editor said was "the 15 puzzle for the last few weeks has been prominently before the american public and may safely be said to have engaged the attention of nine out of ten persons of both sexes and of all ages and conditions of the community" and then he goes on to say that this wouldn't have been enough to persuade them to publish a paper on this but they felt that it was a chance to educate the public on some important mathematical concepts. so they were jumping on the bandwagon? actually, this paper is two short notes: one proving that some of the configurations are impossible and the other saying exactly which ones were possible. okay. so the first thing we have to do is we have to convert this puzzle into some mathematical language so that we can use the tools of mathematics to figure out what's going on. so let's first of all just make all of these things i'm sort of put them all on the same footing so let's think of the blank square as the number 16 so now we've got the numbers 1 through 16 in some order so we're going to focus on those lists of numbers so each arrangement of the tiles we're going to think of as some arrangement of the numbers from 1 to 16. every time we have a pattern in our puzzle i'm going to write down the list of numbers 1 through 16 in the order that they appear in the tray so for example this arrangement would give me the list five one three remember the blank is 16 then 9 2 6 4 13 10 7 8 14 15 12 11 so it's the same set of numbers 1 through 16 just written in a different order. in mathematics that sort of thing is called a permutation. in our case it's of the numbers from 1 all the way up to 16. at this point i would have assumed every permutation is possible if you juggle them around enough times, you can list the numbers in any order right, that would be a reasonable assumption and if that was possible anything on the back of this package would have been fair game so what we're going to have to show is that among all the permutations there are some which have one property which is good for us and one which have a different property which is bad for us and we're going to use this property that we will identify as a way to distinguish the possible from the impossible so let's think about what the sliding move that we can do is doing to the permutation so when we slide a piece we're swapping the blank square from where it is to where the piece we slid into it came from. 16 so 16 and 4 have switched places if i make that move. if i made that move the blank and 3 have switched so 16 and 3 have switched. so the moves we're allowed correspond to switching one number with just one other. in our case in the moves from here we can always switch 16 with something else let's just say x and i'm gonna write it like that. when i write a pair this means switch 16 with x. if i do that i obviously get a new permutation. so we've now translated our puzzle into the mathematical problem starting from one configuration get to another configuration by doing switches like this. these are called transpositions. so now that we've translated it into mathematics we get to use everything that mathematicians have learned about permutations and transpositions and there are a couple of crucial facts that we need to use so the first fact: we can convert the permutation that we start with - everything in order - into any other permutation of the same numbers using only transpositions. so you're including the impossible ones at this point - at this point those impossible configurations are within our reach true, if we're free from the constraints of the puzzle and only dealing with the permutations then we can convert any one into any other of these. alright, simple example with the permutations just of 1 2 3 and let's suppose we want to end up with 3 1 2 so how can we convert 1 2 3 into 3 1 2? we can first get 3 into the place that we wanted to go by switching 3 & 1 so we make the transposition (1,3) that will turn this into 3 2 1 we haven't done anything to 2 but we've switched 1 & 3 and now i get to the 1 into place. so now i switch the 1 and the 2 and there we are from there to there by 2 permutations. if you have a longer set of numbers then you might need more but that's the idea that you can get from any one to any other just by switching two at a time so fact 2 addresses the fact that there's more than one way to get from one to another - we can always do it by transpositions but for example in the case of these two permutations i could have done something different. okay now let me show you a longer one again going from 1 2 3 to 3 1 2 first switch the 1 and now let me move 3 over by switching it first with 1 and then with 2 and now i still have to get 1 and 2 into the right place. so that will take one more switch switching 1 and 2 that will put this into the right place so now i've got a chain going from 1 2 3 to 3 1 2 that involves one two three four steps whereas in our original example, we have only two steps can you show me a three-step example? i cannot because of fact 2. and fact 2 says that even though there are many ways to get from one permutation to another they don't have to involve the same number of steps but if one path involves an even number of steps then all paths have to have an even number of steps. so the number is not fixed, but the parity - whether it's even or odd - is fixed so it could have been odd? like, with some numbers it will be odd as well? right, between some permutations so for example if this was the way we wanted to end up if we wanted to go from 1 2 3 to 3 2 1 then i would have only needed one step or three steps or five steps. so the fact number two: the number of steps required is not fixed but the parity of that number - whether it's even or odd - is fixed. i'm taking your word for that that's like a proven thing right, we're taking these as facts that- and not just because we want them to be - these are proven facts. right, right. these are you might even call them theorems about permutations. so like in the example, we did we had one path that had two steps and one that had four. the number was different but both were even. and i could try until the end of the universe to to do three and i wouldn't find it. you wouldn't find it. yeah or 5 or 7 or 9 even if i was like duplicating my steps and things. right, you could have a sequence where you just went round and round in a loop for a while and then cut out of the loop and made progress that would add a lot of unnecessary steps, but it wouldn't change the parity of the number of steps so what this means is that starting from the numbers in order every other permutation is reached either by an even number of steps or an odd number of steps another way of saying that is we can attach to each permutation a thing that we might call an invariant of the permutation that is the parity of the number of steps needed to get to it from the starting configuration. now that we know that all permutations are either even or odd we will see that the impossible ones have the wrong parity. when we go back to our puzzle and we want to know which configurations are possible and which are impossible we're going to use this relation to even and odd permutations and we'll see that if the arrangement corresponds to a permutation with the wrong parity, then we'll never be able to get to it. one extra consideration we have to bring in is we have to look at where the blank space the number 16 in our permutations starts and ends. so like for example if we wanted to start with the pieces all in horizontal row let's suppose we wanted to get to the vertical arrangement so here we see that in this vertical arrangement we're going to end up with the blank square again at the bottom there so if we start and end with the number 16 - or in puzzle language, the blank square - starting in the bottom-right corner and ending in the same place, what's going to happen between start and finish is that the blank square is going to move all around the tray as we make our switching. so here i'll start it we want to get to the ending configuration. so we have to move the blank square all around so that i can rearrange the numbers keep your eye on the blank square you can see it's moving all over the board and we will just keep moving the blank square around until the pieces do what we want etc so let's count how many times we have to move the blank. that will be the number of transpositions we have to do. so you might think this is an impossible thing i mean there's going to be maybe dozens maybe hundreds of moves that we have to make but remember all that we care about is the parity of the number of moves and if we think about what's going to happen to this blank square if it's going to start here and end up at the same place? so let's suppose that when we're doing this we make a certain number of moves to the left a certain number of moves to the right a certain number of moves up and a certain number of moves down. if we're going to end up at the same place we have to make as many left as right because if every time we move left we'll have to compensate if we're going to end up at the back at the same place and the same with up and down. the number of ups will have to equal the number of downs so the total number of moves is the total of the lefts and the rights and the ups and the downs but the lefts and the rights are the same so i can write that as twice the number of lefts and there are as many downs as ups so that's twice the number of ups so you can see that whatever the number is, it's twice something. it's even. it's even. so to end up with the blank or the 16 in the bottom right corner definitely even number of moves. definitely an even number of moves. so that means if we start from this configuration and we end up with the blank square in the 16 we can only rearrange this to correspond to an even permutation all right, so to prove that this one is impossible all we have to do now is check whether the permutation corresponding to this arrangement is even or odd. if it turns out to be odd then we know we cannot reach it by these moves. okay, how do we do that though? that looks like such a complicated thing to show. alright so let's write out where we want to start from and where we want to get to. so we want to start from this configuration and we want to end in the permutation corresponding to that arrangement so that starts with 15 so 16 is going to end up in the same place, but all the other numbers have been rearranged. let's construct a sequence of transpositions that is going to take this permutation to that permutation and this is actually not too hard. so we have to switch 15 and 1 14 and 2 13 and 3, 4 and 12 5 and 11, 6 and 10, and 7 and 9 and if you make all those switches then you'll get 15 first 14 13 12. you'll get it in this order of course, you can't make that switch in the puzzle game quite so easily, can you? you can't do it in the puzzle game, but- without cheating and taking the tiles. right, but we know that the sequence that you would have to use in the puzzle game would have a different number of steps but the parity would be the same so we only have to worry about parity so if i can show that with this sequence the parity is wrong then whatever sequence we could do there would also be wrong these are the switches that will get us from there to there and well how many of them are there? there's 1 2 3 4 5 6 7 so odd that's enough to tell you that it's impossible? that's it. so that means we cannot get from the starting configuration in order to the ending configuration in reverse order with the blank square in the same place. let's think about sam lloyd's original nasty challenge, which was to take the original configuration and end up with a configuration where everything is the same except the last two are switched. so if we analyze this using our math superpowers that we've just acquired we have to compare our starting configuration compare this to the configuration where everything is the same except i've switched these last two tile numbers and 16 stays the same. how many transpositions do we need to get from the starting one to the ending one? well all we need to do is switch 14 and 15 so it's the transposition (14,15). that's all we need. there's one of them - odd - so that's odd, but we know from this little argument that we made if we start with the blank at the lower right and we end with the blank in the same place 16 at the end then the number of steps that we have to have performed to get from start to finish has to be even so there's no way to start there end there and do an odd number of steps. so no one won the thousand bucks. no, so sam lloyd kept his thousand bucks. so these other ones that these package says are possible or impossible we've got to- we have to check all of them. we don't know which ones of those are possible or not. right, let's see if we think it's possible to end up with the arrangement where the numbers go around the board in a spiral and now we end up with the blank over there. let's see if this should be possible. so we're starting from the standard starting configuration so the blank starts in the bottom right. and we want to know, can we end up like this? what's the parity of the number of steps that it would take to get the blank from starting to its ending position? well, it started in the bottom right. to get to where it is at the end of this configuration, we have to move one two to the left and one up so the number of steps has to have the same parity as three so the fancy math way of writing that is to say that the number of steps has to be 1 mod 2 in other words odd yeah, odd. ok. that's a very fancy way of saying odd! alright, alright. let's write odd as well, write odd under it. sorry unnecessarily rather than 1 mod 2. yeah, yeah. ok. so it's odd. whether this is possible or not then depends on whether the configuration corresponding to this which is 1 2 3 4 12 13 14 5 11 remember blank is 16 15 6 10 9 8 7. is that odd? so this one - it's not as easy to draw a map in the same way there but we can certainly figure out a path from the starting configuration to there, how are we going to do it? so we don't have to do anything about the first four. 12 13 14 in the starting configuration are over there they all have to be moved to come after 1 2 3 4 so we can do that let's see 12 would have to be switched with 11 then 10 then 9 then 8 then 7 then 6 then 5 so that's 1 2 3 4 5 6 7 hops that would put the 12 in front of the 5 then the 13 can come behind it another 7 hops and the 14 behind that another 7 we can get this much correct by doing we had to do seven hops for the 12, seven for the 13 and seven for the 14 so that's going to take 3 times 7 odd - there's odd hops. odd number so far okay now 5 is in the right place as well. so we're good up to there. we have to get 11 into the correct place behind the five. so that's going to take five hops. now we're good up to 11. now we need the 16 that's gonna be one, two, three, four, five, another six hops, now we're good up to there. 15 into its correct position, that's gonna take one two three four five hops nine ten. that was another one. now we've got 15. 6 happens to be in its right position so now we've got to just switch the last few we've got to get 7 8 9 10 into the order 10 9 8 7 here we can - actually we can short-circuit things we switch those two and those two - that will do the job. so that's another two that's odd don't even need to know the actual number. all we need to know is, is it even or odd. here we have another 10 steps that's even so an even number plus an odd number is odd. good news because look up here. good news. right. because that's what we wanted. good news. that's gettable then. so let's do it you can edit this mathematics wins, okay i'm gonna make your prediction:the number of people on the youtube video that write comments saying "oh i just take the tiles out or i cheat" and things like that is going to be odd odd but not peculiar! odd, and a lot of them elements here, which these are not quite tetris because tetris is four squares, these have five. so these are five squares so these are all the possible ways you can put five squares together. if you were to stop right now this is area 20. so if you were to stop right now your score would be 20 that's your biggest, minus your smallest 4, your score would be 16