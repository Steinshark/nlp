a properly configured smart home is great it makes just about everything faster easier and even more efficient through automations unfortunately mine isn't configured properly most notably the fancy in-floor heating system that's supposed to be configured with these is not initialized at all but canadian winters here which is why my poor heat pump system is struggling to maintain room temperature the only reason this one is even close to what it's set to is because the server room is no longer pumping heat outside it's pumping heat out into the basement i blame jake who assured me the whole thing was perfectly simple and it would be done well before winter came my kids have been going to bed with two or even three blankets at night because the upstairs is much colder than the downstairs guilt trip me now thankfully we have the solution just like we have this segue to our sponsor build redux build redux takes the challenge and hassle out of building your own pc with pre-done configurations support guides to aid you and competitive pricing versus building a pc yourself why not kick your feet up and let build redox handle it for you head to build redux.com linus and start your new build today foreign [music] pains me to say this but jake's not actually wrong the system is pretty simple the way this used to work was that each of these zones was wired up directly to one of those old school like the mercury tilts and completes the circuit thermostats which would activate it if it got too cold it's really not that much more complicated our ecobee's are positioned strategically around the house in each of the heating zones that is fed by one of these pipes so that reports back the temperature instead of a little tilting mercury vial then in order to actually activate that zone we use one of these cool little relay boards basically what you're looking at right here is a wi-fi chipset and an antenna power in and then eight dry contacts here each of which can activate one of our heating loops these are running tasmoda firmware which is open source and super cool and integrates perfectly with home assistant which is running on a virtual machine on this server right here home assistant can also talk to our heat pump to ensure that the two systems aren't working against each other and because the server is right here physical hardware that i can touch and and smell none of these systems are reliant on sending data to the cloud or receiving data from the cloud in order to work once they're set up but we're going to do that now right i don't remember what you said we're gonna fix it right oh yeah yeah we're definitely gonna fix it realistically this is the kind of thing i probably could have figured out on my own eventually but as you can see i was very busy mounting the shelf you can fit so many cute little eaten duckies on here you're gonna be happy those finally made it into a video they specifically asked for us to show them when we put the new ps in the rack over there and we just totally didn't tasmoda is great and all but there is a little configuration involved you might have actually not have been able to figure this out on your own we need a few things first tasmodo devices use something called mqtt which is an iot messaging protocol it's really lightweight it's pretty cool actually but to run mqtt you need something called a broker it's kind of like a hub a smart home hub just a piece of software that actually facilitates the communication now if you had like a commercial smart home that would probably be your smart home hub yeah but for something like home assistant because it's infinitely configurable it's also infinitely easy to screw it up and miss a particular plug-in or module definitely so once we have it set up we're going to be using something called mosquito which is like one that's built into home assistant really easy to run yeah this is how i feel every time i come here it's really easy to set up it's just in the add-on store you can install it then we're going to install the mqtt integration which is going to hook everything up from there you can add specific username and passwords for mqtt or you can use home assistant existing users yeah that's what we're going to use to make it easy okay why don't we just do that the last thing tasmoda you add tasmoda and then it's going to see mqtt devices wait you already did all of this did you like screen cap it at least so then you can show the people it didn't okay but you will later yeah i will later yeah we still have a problem though remember those ecobee thermostats i mentioned well ecobees do communicate through the cloud and one of my requirements in setting up this system was that i didn't want to not be able to change anything about it if there was some kind of internet outage so how do we work around that fortunately ecobee's have a trick up their sleeve actually for once i'm gonna say thank you apple they have home kit integration which all runs locally now we aren't using apple devices but home assistant has a kind of hacky way to connect to basically anything home kit so we can use homekit protocol to connect to all of them locally no cloud required one thing i forgot to mention now that we have the broker set up we have to tell the tasmodo devices where that broker is so we have to set an ip address a username and password like i mentioned before and once that's hooked up it just finds it's like magic and look they're right there really yeah so let's do a quick test why don't you press oh you already pressed it in home assistant so look over there whoa hey the living room's getting heat baby watch right down here yeah these ones move all the way over here it's open cool you might be wondering how does the boiler work into all of this well fortunately these valves you see they have four wires two of those go to a thermostat which in our case is this guy and the other two go to the boiler and that's what triggers it so when this valve opens it physically like clicks the switch inside that that bridges those other two wires you know how many times i've come down here and gone boy i sure wish this didn't say system idle on the front of this you ready watch this boom boom i love local connection stuff tell me about it so responsive anytime something goes through the cloud you can feel it even a really great cloud connection it's like why these devices are on the same network this could be literally fractions of a millisecond of latency now that all the valves are open and the boiler's on we could verify that hot water is running by simply touching these but this is linus tech tips and i've actually been meaning to talk about this super cool phone from cat for a while that i brought home to play with my kids it has an integrated flir thermal camera so we can actually see right here there they are they're all lit up hey jake what where was the return for these guys which ones ah you can see the return is actually still quite cool which means that the concrete in the floors hasn't really heated up yet so that heats being dissipated these are returns down here too i mean these are closed these ones that's the out that's the hot side oh i guess i can i can validate that easily enough obviously i'm mostly just playing with this thing right now but i'm sure you can see how this would be an invaluable tool for contractors say for example if you were trying to diagnose an overloaded circuit by finding a hot wire looks like everything here is in pretty good shape so that's definitely good to know does it find tools find which now tools tools well there's a big glowing yellow blob on it right now that's why our ecobee's are hooked up in a bit of an unconventional way if you check the manual it says oh well you need four conductors for this kind of configuration and five wires for this i mean you can you can have up to 10 freaking wires in this thing but we've got only only two hooks this red one's not even real it's fake all we've got is power and that's for an interesting reason now conventionally these would not hook up to those valves they're just different kinds of systems so there's probably some way we could have hacked it or you know had direct contacts to the whatever either way we're doing it over wi-fi now the nice thing about ecobeez is we can plug this in and tell it hey you actually do have a heat wire connected you actually do have a cooling wire connected even though it doesn't detect it i still remember how stoked you were when it was like it was hidden in like a support article somewhere or something like that it's like we found one yes so that means they can act as a thermostat and think they're connected to a boiler system of some sort but they're actually not and we still read the date off of it so we still get the brain he just thinks he's helping glorified thermostat yeah yeah basically i mean it's a glorified thermometer yeah actually yeah what there's a fancier version of these the one that i have in my house that has built-in occupancy detection shut up i think these ones they just released this whole fiasco was so avoidable so avoidable in a valley is working on a switch with like millimeter wave occupancy detection there's also that cool product from one of my fellow youtubers i know you can't get their product on lttstore.com but who knows maybe someday maybe we'd be interested in carrying it along with cool color block hoodies like the one i'm wearing i'm a homeowner it says only rc so that would be the wire for cool we'll go next these are the wires that are detected and you go huh no modify we want that one once an individual ecobee is connected to wi-fi we go over to home assistant and you can see it's already been discovered over home kit oh that's super cool we just hit configure it should pop up a home kit code here no way in a second i swear to you we had it working it was working perfectly i just did it and i was like damn it why did i do that buddy i might need to restart it well in the meantime we could go do another one yeah let's go do a different one do i need an iphone to do these things no this just makes it way faster if you do it this way if they just opened the standard for making things easy or everyone could use it if when it's really not as easy and it's not working properly there was obvious workarounds that would be great okay it's here let's see if we can do home kit now configure ah there we go that's it devices so i could tell this thing hey yeah you don't actually really need to do that and i could set this guy to like i don't know what's a good room temperature so here's the thing we do maybe still want some supplemental heat from your heat pump because the problem with in-floor heating is the run up and run down takes hours like maybe this is a big slab this could take like eight hours to yeah to cool off so if you're trying to heat it to like 22 that's your ideal temperature and you do it with your inner floor heating you're going to hit that it's going to shut off but it's going to keep heating up right and then it's like oh now it's too cold so you kind of have to set a threshold that's like a bit lower i mean my understanding is you just set it and forget it never touch it that's what i mean so we're gonna set it and then these are the ones you would touch if you want to go a little bit hotter a little bit just temporarily or something yeah so then yeah so then i should just set this guy to i mean you'd never want to be lower than 19 inside and if i just have the this set to 22. i set that one to 20. now the ecobee should compensate a bit it's going to learn the run up and run down times that will help you definitely want to be careful why does the ecobee think it's 23.5 so that's because it's not yeah that's another thing that's a little bit interesting so you can have weird temperature readings if there's like if we look behind here if there's like an air gap and there's hot air blowing in there or something this stupid thing is exhausting heat which it kind of is actually crap do you feel that yes i do it's totally warm are they all like that no no they're all kind of different depending on how the studs were laid out and everything i'm gonna go look this one's even worse why is the small one so much hotter look there's a silver lining here it just means we get to make more content about your house i just want my heat to work okay here problem solved i mean he's not wrong fortunately the upstairs is mounted the other way around because this time i'm gonna do it so sorry which one was it so click modify what is your ideal home temperature during the winter why is it in fahrenheit yes who cares just click next to it but i don't know 69 nice that's probably what the temperature is in here yeah 19. it's a little chilly in here it's a little chilly in here okay the wife doesn't like it honestly it's fine for me that's like an ideal sleeping temperature i agree but she is not stoked on it she's got the extra blanket on her side of the bed she's got the fuzzy pjs on and she's like can't live with them can't live without them so how do i i don't i don't hold i just want that to be like the temperature right so oh i got a set of schedule yeah it's way better to do this on your phone has it not found this one yet no but you know multicast on wi-fi is a whole whole other bag of worms especially when you have multiple aps you know if you opted for the ruckus controller thing we could probably configure multicast enhancement but i don't think we can do it with unleashed check this out andy it's totally working already it feel not really no you're not going to be no you're a lot warmer than the floor is still but see that you can see the in-floor lines man i'm stoked why don't we try another one of these wanna show me how to do it that would be pretty cool yeah so i'm going to make you a script that is one script that takes all the inputs from all the thermostats and then when it detects a change on any of them it like plums the input into the output so it's just one script but for now let's just we can just make one for each we got to select the climate device which is boy and then the attribute is hvac action that means what it's doing right now so that'll either be a value of heating or idle you could also have cooling if we had ac but we don't yeah so we're just going to detect that it's changing at all well we do but as a reminder the ac must go through these american standard thermostats that i did not want because of their stupid proprietary communication protocol american standard more like american non-standard very annoying because realistically everything could go through this otherwise especially because your stupid thermostats are heating up the ecobee's throwing off the temp sensor now we're gonna have to have separate temp sensors okay we got a little script action here so we have a choose action so it's going to choose between two conditions first one we're checking the trigger which is the device that triggered this automation it's hvac action is heating then we're going to switch turn on and we got to set the entity id to the switch of the tesmoto device right okay and then we also have an option for if it's idle and then we're going to turn the switch off this basically allows home assistant to take what the desired status of the ecobee is that is to say if it thinks it should be heating or thinks it should not be heating and then use that to trigger the relay on the tasmoda device which is going to open the valve there we go it's working yes if you go downstairs and i stay up here and i change the temperature below the heating threshold theoretically that valve should go off yeah okay sure let's give it a shot actually we're going to go the other way around i've got it set to hold it 16 right now and then i'm going to set it to i don't know 25. sure theoretically downstairs jake should see the valve open hey jake it worked work did he say he turned it on yeah hey jake did it work it worked yes you see it click on it worked it's gonna open in a minute oh i heard it i heard it click it's starting to open oh that's awesome oh i didn't bring the thermal camera with me or my phone i left my phone oh all right cool just like i left this segway to our sponsor squarespace if you need to build a brand online you need a website but but linus i just learned how to turn on the little flashlight on my phone how am i gonna build a whole website you ask with squarespace squarespace is a one-stop no frills all in one platform for expanding your presence on the internet squarespace lets you build beautiful websites engage with your audience and sell anything and everything from products to content without needing to attend the linus techwort school of tech wizardry we love squarespace so much that we use it here at linus media group it's custom templates make it easy to stand out with a plethora of themes and customization options to fit your needs and you can maximize your visibility thanks to their suite of integrated seo features there's also analytic insights to help you optimize for performance so you can see what's working well and what needs tweaking so don't wait get started today and head to squarespace.com forward slash ltt to get 10 off your first purchase if you guys enjoyed this video well it's not so much about enjoyment or not but you should definitely go check out the part where we laid out the plan because it had a fair bit more detail about what exactly is going on here yeah and get subscribed because we're probably gonna have to move all those thermostats now yeah i'm very unhappy right now okay we might just have to get separate temperature sensors or something i know i know i know i know i know i know