hat problems joe: hat problems is a genre, many people like to use it to frame various combinatorial problems. if you go far enough with these you end up with error correcting codes, (of course your smartphone depends on those), but today i'm just going to show you several hat problems. the two hat problem, uh, involves two people, each of whom is going to have a blue or a red hat placed on their head by an impartial referee who's going to flip a coin to determine whether i'm going to have a blue hat or a - whoops - a red hat *laughs* brady: so you're wearing a blue or a red and i'm playing too, aren't i? j: that's right you have a blue or red - b: on my head. i can't see it. j: there are a bunch of rules here you might imagine me doing that and looking up like that and that's not allowed. in fact, if this were being played for money, we would each be locked in a jail cell with a tv screen and the only thing we would see is our names. and under your name, i would see a hat. and under my name, i would see a choice. i can predict my hat colour. i can say either blue or red. let me talk you through a game. ok, so the hats have been placed on our head by a referee and now i see your hat and i'm supposed to, first of all, predict my hat colour on a signal. simultaneous with your prediction, we each make a prediction of our hat colour. i haven't seen mine, which means my prediction is 50/50, your prediction is 50/50. b: because both of our hats were randomly chosen and the choice isn't connected in any way. j: the choice is not connected the referee flipped a coin for each one. there are four possible ways the hats could be. they're: two reds; blue red; red blue; and two blues. we make a prediction but the goal is a little unusual. the goal is that exactly one of us is right. in other words, we succeed if you're right, and i'm wrong or vice versa, we fail if we're both wrong or both, right. b: so one of us has to be right, one of us has to be wrong about the colour on our own head j: this looks awfully challenging. [mhm] my guess about my head color is just a guess. it has 50% chance of success. your guess has 50% chance of success, and the goal is not only to try to be one right, one wrong, but to get that all the time. somehow combining these 50/50 s and coming up with certainty certainly sounds impossible at first glance. once you see the idea you'll see that your mental image of that was not right. b: oh yeah, that's not bad. not bad not bad j: ok, here's the winning strategy: the night before we agree that, on the following, you will be agreeable and you will say whatever colour you see and i will - b: so i'll say red, you're wearing red. j:  i'm wearing red, so you're gonna say red. b: ok j: and, on the other hand, i'm going to be disagreeable, and i will say the opposite of what i see. and, you're wearing blue, so i'm gonna say red. we're both going to say red in that circumstance. you can make a table and figure out why we're -- there's always going to be one of us correct, but if you think about it, there's a very intuitive reason. i'm betting that the colours are opposite, and you, being much more agreeable, are betting that the colours are the same. and so therefore, clearly, one of us is right and one of us is wrong. b: what if the rules of the game had been that we both have to be right? could we have had a winning strategy then? j: if we both have to be right there is just no way we can do it. and so there's something about this particular set of rules that enables this magic trick. 3 hats there's a famous three hat problem that arose about twenty years ago, it got a lot of press. and let me describe that one to you. there are now three players: alice, bob, and charlie. and the rules are still: we're going to have hats placed randomly on our heads; we are not allowed to communicate once that's done; at a bell, say, ten seconds after the hats are replaced, the three possible answers are red blue and pass. and those are predictions for my hat colour and of course the rules include the fact that everybody sees to hat colours, but not their own. and ag-- maybe i should have this off of at this p-- 
b: i like it! but anyway, it's up to you. *laughter* b: what's the idea to win the game here? j: so here the, uh, each of the three of us makes a prediction or passes. and we win if there are no incorrect predictions, and at least somebody makes a prediction. or, we lose if anybody says something wrong or if everybody passes. have to scratch your head a little about that, but it's actually, uh, fairly natural b: so at least one person has to make a guess and everyone who makes a guess must be correct. 
j: that's right so if we do that, we're all freed from jail, or get a million dollars. pick your favourite reward. now -- b: yeah, well, it depends on your current circumstance. j: you might start thinking of some strategies. one that you might take, if you didn't have a strategy session, was: everybody guesses. ok, let's think about that. alice bob and charlie each make a guess by the rules, namely, each hat is randomly chosen, each of those has probability of 1/2 of being right, so the chance that we would win with that strategy is one out of eight. if you think about it a little bit it would be better if just one person, say, alice, guessed. one reasonable strategy is bob and charlie pass, alice guesses. now that comes down to a coin flip. alice is betting on her hat colour, so she has 1 and 2, or 50%, chance of being right. b: ok, well, that's a ok strategy. j: it may seem that nothing better can be done. why is that? because, anybody who doesn't pass, (and somebody has to not pass), is making a 50/50 guess. so that almost seems like it's a proof that you can't do any better b: because there's no connection between the hats. there's no quantum entanglement here. like, like, the hats are all completely independent. random. j: the hats are all placed by a coin flip. so how could anything improve one half, improve the probability of one person guessing. there is an amazing strategy, the first time you see it, that gives you a chance three out of four of winning, b: huh! seventy-five percent j: and that's 75%, and you can't do any better than that, so you're not always going to win this game. it's not like the, the two-person game. but three quarters seems pretty amazing. but let's start with the strategy, then i'm gonna do, of all things, draw a cube and work you through how you could have come up with that strategy. here's the strategy you're two friends. you don't know your hat colour. if you see two hats of the same colour, you say the opposite. may seem a little odd. that's what you say. b: so if you see two blues, you say "i've got a red" j: that's right. if you see two hats of opposite colour, one blue and one red, you pass. i actually want to work you through how you might come up with this answer really there are two cases. let's think about what happens if all three hats are the same colour. if all three hats are the same colour, for instance, everybody, like me, has a red hat on, according to this strategy, we all say blue. the only other case is two hats of one colour and the third hat of the other colour. let's think about what happens in that case. alice bob and charles have these colour hats. what is going to happen? both alice and bob each see one hat of each colour, so they're gonna pass. what about charles? charles sees two hats of that colour and he announces the opposite colour, red. so now that's a win. now we have to ask the following interesting question: first of all, how many ways are there to place the hats? there's two choices for each of the three players, two times two times two means there's eight ways to place those hats
[2x2x2=8] how many [cases] are there where the hats are all the same colour? two! all blue, all red. those are the cases where you're going to fail. you have a 1/4 chance of failing. the other six cases are all the two and one, and in that case you succeed. so your winning strategy is to do this, and you win with probability [3/4] three fourths. b: easy peasy!
j: easy peasy. b: i don't know what you're talking about cubes and stuff for, this is li--, this is j--, this is sorted. j: yeah, it's cute so far. what i want to try to do is give you a feeling about how to think about it, and how you might come up with it. brady insists i draw pictures, so i'm going to draw a picture of a cube. *laughter* um, here's a cube. now, of course, your immediate reaction is: what does this have to do with anything? well, we agreed there are eight possible hat placements. being a mathematician, it's very hard for me to keep track of colours like blue and red. all i can keep track of is zeros and ones. so i'm going to label these with all possible triples of zeros and ones. ok, and they're labeling the vertices of the cube and and uh, bradys being kind and not pointing out that i didn't label this one *laughter* and if you look at it carefully you'll see that any adjacent vertices differ in one symbol. fine. here, 101 and 100 b: is that the reason that the triple zero and the triple 1 are at opposite ends of the cube j: ye-- uh, they are as far apart.. you have to make three changes: 1, 2, 3. of course, you can make those in in many different ways, but they have to be antipodal. so why are we looking at this? well these correspond to the hash placements. and now, suppose that you're charles. i claim if you see two blue hats and blue is 0 and red is 1, you don't know whether you have red or blue. in some sense, you are sitting on that edge of the cube and you want to know what to do. your choices are to name a hat colour or pass. i'm gonna put a dot on the edges on which you should pass and an arrow so we know what charles did he said red. i'm recording the strategy on this cube. and here alice says red. here, bob says red. here, charles sees two alike and therefore says the opposite. so there's this funny picture that emerges. what's happening here? ok, who is this? well the coordinate that changes is alice. so alice sees blue and red, so she knows that she's supposed to pass. six edges have labels and the other six are all passes somehow the magical secret of this is: there are two land mines here and here. b: these are the times we lose the million dollars. 
j: these are the monochromatic hat placements and we don't want to step on the landmine. so we predict we aren't on a landmine. and maybe rather than saying we're not trying to step on it, what we're really saying is, if the landmine happens, we all three want to get blown up at the same time. the magic way we've converted these coin flips into a three quarters advantage is to having all the correct answers in separate cases, and the incorrect answers happen in two cases where everybody is incorrect. so if we have more than three players the situation starts getting interesting. let's consider four players. well, one thing we know we can do in that case is: in our strategy session dave agrees to pass, and alice bob and charlie play this game, and what that means is the probability that team of four with that strategy is three quarters. rather surprisingly they can't do any better than that. if there are five people. there's a more complicated strategy that is a little better. it's it's messier than this one is how i would describe it. same with six people. all of a sudden with seven people there's a nice strategy again. it's not quite as easily described as this but it gives you the best possible probability of success. if you work through what's happening here the property that makes this work is that these two points are adjacent to every point on the cube. why is that necessary? well, if you're talking about strategies, in other words, labeling in this way, it turns out that if you have a losing position you might as well have all arrows coming out from it. and the next little thing, (i'm leaving this for you to figure out in your mind), every vertex either has to be in that losing set or adjacent to it. ok, so now you can draw a four dimensional cube. well, what would that be? what is a four dimensional cube? um. it would have vertices labeled by all strings of length four symbols of zeros and one. there are 16 vertices, and there's a lot of ways to draw that. but it really doesn't matter whether or not you can visualize these higher, uh, dimensional cubes, all you have to think about is these strings of zeros and ones. so this makes gives you some way to at least think about the problem for any number of players. b: what if everyone in the world was playing? j: so, the magic numbers, like 7, are powers of two minus one and for those, these magic sets are completely explicit, and they're called hamming single-error correcting codes. they are perfect codes because they touch everything perfectly, without duplication. b: professor, does that mean when we get to 15 players and when we get to 31 players. we see sudden jumps in the probability of winning? j: well, so when you come to 15 players, you can describe a very nice solution. if we could find the best possible ones after that, the probability would slowly increase until it 31 it would again be nice. in fact, [of] the numbers right below 31 it's not known what the best number is. so your probability of winning is only going to go up, but it's as elegant elegant solution when n is a power of two minus one, [n=(2^x)-1]. at those places, the probability is one over, well, n plus one. one over that power of two. [p=1/(n+1), or p=1/(x^2)] so with 31 players, our chance of failing is 1 over 32, our chance of winning is 31 over 32. if it was the population of the planet, our chance of losing would be 1 over well, i don't, know four billion, let's say. its distinctive feature is that all the players have infinitely many hats, each one of them equally likely to be blue or red. so here is just the beginning of infinitely many hats.
b: and that would go all the way j: all the way up to the ceiling and through. and now, um, maybe if they get smaller, it will only have finite height. so now the game sounds pretty impossible,. you have some number of players. each players, of course, sees every... numberphile subscribe