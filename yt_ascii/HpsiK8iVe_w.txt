the stockholm syndrome of squeal why relational databases need a diverse competitive ecosystem of query interfaces i don't know what it means i don't know what it means this is part one of a series analyzing the relational database landscape and criticizing the design of structured query language this article our ecosystem of technology tools is a modeled after a free market is all of our technology tools free market win we have many platform tooling and people competing to be the best the best browser the best language the best text editor neovin by the way the best terminal emulator the default one probably you may have heard of xterm 256 back in 1986 you may have heard of that one the best shell the best line of text that appears above the bit where you type commands into your terminal there's competition everywhere and that's great it's great for people who build infastructure and products because better tools make their jobs easier it's also great for people using the infrastructure and those products because they get better experience doing whatever they need to do with those things a question i've asked myself my mentors my friends and colleagues is what the hell's wrong with viewer what's the deal what's the deal with databases and why is there no richf free market of competing d ideas what isn't there literally like 9,000 databases i've often met with responses such as squeal is fine don't fix what ain't broken everybody uses it why try to change okay so i'm actually really intrigued by this what is he what is what is barnaby trying to sell us here because obviously maybe there's something different that we have all missed i can always buy that there is a better way of doing things that we've optimized into a local minima that may seem nice but actually isn't good which is honestly odd considering that this is a the industry within which there are entire movements almost religious in nature around fixing and replacing old tools with new tools yep of course asking these questions as a developer straight out of university was not normal the general vibe was that the bright eyed and bushy tailed desire to make everything perfect would soon disappear well i mean i think i feel the the the the first problem which is that one can strive for but obtaining h but now but i'm now a senior engineer i've built a ton of products and tools from dev tools to consume apps and i've written a huge amount of database related code from simple queries to long chains of or methods calls method calls and all manner of multi-level joins recursive spaghetti and the odd mongod db aggregation who doesn't love a good mongod db aggregation where you accid put limit first and then you never get any results and you're just confused as to what's going on because you didn't realize that your serialization method for your mongod db abstraction puts limit first and you didn't know that cuz you handrolled your own mongod db aggregation thing that one time you know you did that you know you did it and it was a mistake okay i may or may not have done that last year i've still got a lot to learn at this stage in my career but i feel like i'm at a point where i can vocalize my thoughts on this gap in the market okay so let's talk about the free market of software okay i'm ready just call me trustbuster big big data okay here we go i'm ready trustbuster big data let's do this typescript is an entire language backed by a trillion doll corporation with the sole purpose of reducing the likelihood of undefined is not a function popping up in air messages i love how wrong that is but i love i love that it's stated that way you know what i mean i love i love it i absolutely love it the t the goal of typescript is to make it more like c so that c programmers think the web is microsoft i also love that take a lot dino was started by ryan d who created node.js in an effort to provide a better platform to build applications v8 i think there's nothing more hilarious than ryan dll after seeing his first child and going you're ugly and created a new child and created effectively the same child again i just think there's something very funny about that there's just something so funny about it it's just so good it's pronounced vate wait what what uh you can't escape heritage dto throws out backwards compatibility and attempt to fresh start and do things right it has a decent following and looks somewhat promising it uses normal typescript compiles to javascript under the hood and executes on the v8 runtime yes of course because i mean it's v8 you can't can't run typescript it's basically no. js but with native typescript support and a different approach to dependency management okay okay okay it's actually pron wait stop shut up llv m and jvm both facilitate the existence of about 16 major languages not including small side projects and non-commercial stuff i don't think i've ever really heard these two things compared in this way this is the first time i've ever heard these two together at the same time okay just throwing it out there they're both lowish level platforms that provide a runtime optimization and crossplatform usage if you write a new programming language and it can be compiled with llvm or jvm your new language will run on basically any computer on the planet barnaby got me on that one barnaby got me he managed to start off a statement in which i didn't i didn't see coming and ended it in a way in which i can't technically disagree with just saying just saying might have done it might have just done i've been barnab i've been barnab on that one there are three major web browsers currently on the market market chrome chromium and chromium well firefox and safar yes they all have slightly different advantages it can be frustrating for a developer sometimes to build a website and we web experiences because of because of this but it's all for a net good consumer choice innovation and market competition safari introduced a way to check if the user prefers a dark color scheme and shortly after it became a standard across all browsers firefox created development tools and they are ubiquitous nowadays which is funny because i can barely use firefox development tools you know chrome pushed for web assembly and that exists now so that's cool i guess oh my goodness oh my goodness that bird was too intense barnaby the barnaby burn just was so intense i don't even know what to do with i don't even know what to do with that you get the idea there are examples of market competition modeled all over the industry even though the vast majority of these products are often free to use open source and accessible access i they are still treated as products and the teams building them treat competition products as competition or competing products as competition okay the database market it's far less interesting trust me okay pretty much every mainstream relational database out there uses some dialect of squeal there are no mainstream relational databases that use any other method of interfacing with data the top 10 databases according to db b engines.com seven of them are relational all of them use squeal okay this isn't very diverse why do you think that is i'm kind of just thinking about that why why is that and so i'm just going to throw something out there as like my kind of guess okay is that at some point you had a relational database that used squeal and then for a second database to come in and compete they too used squeal so that it was an easy translation from one to the other i'm just just throwing it out there as my guess the reliable operation of databases is about 10,000 times harder than drawing clippy it's much much much harder to evolve product under those circumstances with this kind of change of change resistance fair thank you princess again i appreciate that it's an interesting take it's it's certainly an interesting take i'm trying to kind of wrap my head around why why squeal is the culmination of 50 years of engineering by some of the most brilliant people in the world it's not so easily replaced fair that's what you'd still have new projects being non squeal but you don't really i mean some projects just use excel right dump all your data into excel every attempt at no squeal has been a total cluster fck yeah it really has this isn't very diverse is diverse the goal right like is that just simply the goal i thought the diversity on these things was what they offered not the language that it's back ended by right like i thought tiger beetle was a finance hyperfast database still using squeal but what it does is the competition i'm a little confused as why squeal has to be the point of competition and i'm not sure if i'd want squeal to be the point of competition because then you have three different versions or five different versions or x different versions of squeal you're going to have to do versus just simply having the operation of the database itself be the competition to me that seems better but let's keep going i'm just saying to me that seems much much better each database has its own dialect of squeal with innovations on top of the bass language but there are no really new ideas here squeal is actually a backronym it was originally named squl as in a sql to square specifying queries using a relational environment yes that's the whole mouthful why do nerds love long acronyms so much i don't know we also love initialisms okay because if you say it sql it's actually an initialism so next time you're arguing with someone about the how to pronounce squeal you can drop this knowledge bomb yeah it's pronounced squeal squeal was designed in 1973 and made available in 1979 it hasn't really changed much since unlike the rest of software development world okay yeah but do you see what they're working on okay do you even know what that is and aim database admin mixing on a turntable in order to perform a join query yeah i mean is is she a a dj i don't even know i don't even know okay i don't even know the problem here's the actual criticism part because there's a lot of to unpack here regarding what's actually problematic with the status of status quo of relational databases i'm going to summarize the issues here and expa expand in the future posts i'm aiming to keep this less of a rant and more of a set of proposals for future work in the relational database market each future post will outline the issue and a detailed solution in hypothetical new product okay a human machine interface versus application programming interface why not both i can't say quite understand this i might i honestly just might be too dumb a language within a language via string literals is how you lose all static analysis and type safety fair fair that sounds like a javascript problem honestly other languages do have type safety built into it and even sounds like javascript might even have type safety being built in with like squeal templates right squeal is too high level to foster an ecosystem of novel approaches to interface design i think there's just like a lot of fundamental problems even with that statement which is i mean real talk who here would want a novel approach to interface design for your production database it sounds a little risky i mean i think that's part of the problem is that there's a reason why squeal sticks around shout out me on twitter yeah yeah south claus i mean i i like the name south claus that's a great name by the way i i i don't i mean i there's a lot of worries here which is it's just oopsies i accidentally clicked it it's just it's interesting there you go boom follow did it oh it's his birthday yay birthday ah birthday anyways happy birthday happy birthday isn't it all just a huge waste of time trying to change the status quo may feel like a sopian task but there's value in it did you guys watch sisifus on is it called sisifus on netflix korean drama space time travel i watched it it was nice the squeal specification is fairly antithetical to the open source and free software world you don't have to pay to get access to the latest an specification if a budding new software engineer wants to dig into this document for whatever reason and understand what text is behind the world's most common data query languages they need to fork out 150 yo which is a lot of money if you're not already earing earning a fairly decent software engineering salary in the us uk or europe meanwhile i can freely access the poix specification the hp specification the ecmascript specification better known as yavas script the tcp specification or anything written by the ietf which are actual web pages not awkward pdf files i like this that's good take i do like that i think any of these things should be fully available i do think that it's very interesting that ansy specifications are pay to play we're not that den degenerate okay calm down ryan winchester i can take essentially anything any existing technology the world software depends on by the way that i mean i when i got to implement websocket protocols it literally it was just me opening up the rfc reading it and making it and then it worked with autobon it's like pretty cool like that's a pretty cool aspect of javascript or of not of javascript of rfc's it's pretty cool i can take essentially any existing technology in the world the world's software depends on and build my own version of it and test my implication against a written specification yep if i do decide to pay the price and read the spec i'm greeted with a huge document because squeal is a huge complex language and it's far from structured and far from declar ative i read part of the ansy 1999 specification which is 23 chapters spread over a thousand pages every spec gets ever more comp complex sounds familiar c++ suffers the same fate to the point where professional c++ programmers i know have told me their company just sticks to c++ 11 because the majority of the new features in 17 and 21 are superflous there's some nice things that happen later on okay there's some nice things if you want an open standard just use postgress just use the postgress one there are plenty of examples of attempts some successful to break away from the status quo and build something better go rust and deno are brilliant examples of these both rust and dino aims to not only provide languages but also ecosystems rust cargo and rust up tooling is far superior to the sparse landscape of c++ package managers and compilers fair statement that is a fair statement it's a rust article by the way it's a rust article and by the way rust rust is just c++ o camel dina throws out compatibility for a newer go inspired approach to dependency management i'd honestly like to see a similar movement in the database world hot take what prior art some people already trying to build better tooling for databases most of this work builds on top of squeal similar to how languages built on top of javascript there's some great projects out there that are attempting to make working with databases easier i do think all of these are just frankenstein's monster style abstractions on ever still complexity that is squeal though i do love that it's correctly instead of saying frankenstein said frankenstein's monster did you know that there's a line from frankenstein in which the author shelly she was reading it and i believe it made her lover pass out from how scary the line was and it's a line from the rhyme of the ancient mariner my wife read me rhyme of the ancient mariner last night it was very beautiful it was it was a beautiful moment we read poetry together weird by the way not a big deal it's a woman it's a real woman you wouldn't understand i get it you wouldn't understand i'm probably going to air you guys if you reach out on discord cuz i'll be hanging with a woman a real one you wouldn't get it back in 2019 prevus wrote we can do better than squeal and it was received with fairly decent sentiment across hacker news and lobsters this is definitely a rust we're definitely we're we're running towards rust real fast there's a lot of don't fix that ain't broken mentality and no desire to innovate on the hacker news side which is to be expected but there's clear desire between those replies for something novel in the database world that being said i don't think hdb really solves the problem it's still string literal oriented query language not an api sure it proposes some more logical syntax but it's a whole new language see part one of the follow-up post for more details on this isn't the string literal api like isn't the string literal i mean i have a slight problem with this because isn't the api wouldn't that just be an omm right like if a database offered an api isn't that just an om string literal is a literal transport to a separate process across ipc yes no yes and no no yes kind of right because you couldn't just have it like what would the api b you'd have to it' have to be like chainable it would have to be within your process to build up something to send across the quote unquote wire to the other process andor other service across the internets camera died come on gosh i left it on all night again okay i left it on all night again dang it come on okay i'm dead all right prisma i love this tool it's really something useful that saves a ton of time while not succumbing to the usual downsides of traditional ors the ones that map objects to relations i think there's a lot of database world can learn from prisma it solves the type safety and schema source of truth problems outlined in part two by generating type safe code so in other words i feel like i got pretty close there and saying maybe just maybe it's not the database that needs this problem solved this is not without criticism though some of the existing complaints behind ors are valid for prism such as they need to perform complex queries not being satisfied by the generated code another issue is the code generator must support your language prisma users have already been burned by this when they dropped support for go i mean it's why i don't use prisma it's as simple as that well i mean there's other reasons but one of them is javascript exclusive library boo an an is a goto replacement for prisma for go developers it's another code generating database first tool for go programmers to talk to relational databases i've been using this on a few projects since 2021 and it's fantastic i've not had to write any raw squeal yet apart from one instance where i needed recursive common table expression okay okay okay interesting i mean i maybe i should check out end and feels like the conical database adapter for go i'm using it for all my go projects now and i have no real complaints except for how the source code bas schema definition is quite complex and requires frequently reading of the documentation combined with trial and error that is this is just not a way to sell it man i feel like i just walked into that one that was just like such a glass door walking right into the glass door it's fantastic but it sucks prisma's fully declarative schema format also generates safe migrations is hard to beat yeah no raw dog in that squeal squeal c there's another go tool i'm a go programmer by profession so naturally a lot of my evaluations are in the go ecosystem fair and this this one parses squeal files and uses that to generate go code that binds the arguments to the squeal statements it's a neat idea and definitely a solid choice if you don't mind writing raw squeal i don't mind writing raw squeal real talk i i'm fine writing raw squeal one benefit of writing squeal files is that you can get sometimes decent editor integration if your editor is hooked up to live databases which you can totally do that's an lsp i mean that's literally an lsp if you can send your credentials over the lsp or have them available in an environment you can create an lsp that queries the tables and understands what you're saying like to me i i don't understand the problem with that since squeal has no native way of writing declarative schemas you have to connect to a running database yes visual paradigm this is an old school business process modeling suite that also happens to provide code generation from database schema definitions is actually the only other tool i could find that does one it works with java only yeah there's like my sque i think there's my squeal editor isn't there isn't there like my squeal something like that it's a some sort of visual editor where you can create your tables and do everything and then you can generate the squeal from it if we didn't have squeal we would need some other way to do condensed and audit the the operations that the client is trying to send to the server even just for debugging i don't see the problem my squeal workbench that's what it's called workbench yeah my schol workbench i used that way back in the day it was nice that was a long time ago though i was using php during those days i was php with the best of them can we do recursive of for loops and squeal what all right cockroach db i'm throwing this in here because this is an example of modern implementation of an squeal of an squeal database that's post post squeal compatible it's written in go and has venture backing driving the development of software cockroach labs also provides a cloud offering which claims to be scalable across regions oh very interesting their blog is a brilliant resource for the internals and the database core is open source so it's been a great learning resource for me but what i really think is impressive with cockroach d db is how they've managed to disrupt the status quo being post squeal post squeal compatible and horizontally scalable is a huge sell for a large applications which need to store a ton of data and be fail resistant very cool okay so cockroach is pretty neat all right now all right all right all right all right and now one interesting detail is that cockroach db isn't fully a conforming of the squeal specification or even post gre squeals dialect of and features it still rose to fame and became a fantastic tool why because a lot of the applications literally just need four features create read update delete what cockroach db shines in is providing an amazing overall experience all the way from deployment to queering to scaling out see again i i still think that there's like a confusion in this article which is tying squeal the query language to the tooling around squeal right like what makes cockroach nice isn't the squeal it's the things around the squeal and so i feel like there's like this this this this this general confusion that i'm seeing which i i don't disagree with i actually really agree with what he's saying like completely barnaby i agree with you it's just that landing on squeal as the problem just seems weird because dino still uses javascript so the problem wasn't javascript if you're saying dino fixes it right like i'm just saying it's it's the tooling around it that you want there are some great tools out there but a lot of them in my opinion don't quite solve the true underlying problems with existing relational databases i think there's a lot that can be learned from cockroach db rust go and deno i like to say it different every time focusing on the ecosystem and tool chain side of things and understanding that they don't need to be perfect and satisfying every use case if a language has a decent package management decent performance decent community and a decent compile time then it's far superior to a language that only has perfected performance and sucks everywhere else go versus c anyone bold statement because i think there's there's definitely time for c like the reasons why i'd use c go wouldn't be the like alternative does that make sense low-level learning is not happy not happy about that like i know go and see are practically the same language like they are super close in how they feel and how they look it's just c is not meant to be used in the same places literally go is like if c had a baby that's meant for web if feels odd to compare yeah it does feel odd to compare it's just an odd two to put to pit against each other it'd be better to say go versus like say js right js does not have perfect performance but it it also has like sucks everywhere else right just saying it sucks everywhere else and it doesn't have perfect performance it seems like js would be a fair comparison may maybe you want two garbage collected languages but one with great tooling versus one without great tooling that probably be a fair way to compare so i think there's a huge gap in the market here for database system that provides a decent features decent type safety via code generation decent command line interfaces and a decent api it doesn't need recursive common table expressions and windowing functions because the people who need those features will likely stick with existing databases anyways if you like this article or if this article makes you feel things at me on twitter i think there's a lot of cool things said in this art honestly a lot of cool things i know i'm sponsored by turo but definitely check out turo i think that turo offers something very compelling which is squeal light edge-based replicated squeal light which i think is really cool local reads remote wrs like there's a lot of cool things and so again that's a tooling around a database which kind of falls into this category which is you want tooling right people want tooling squeal light is actually amazing there's a lot of super cool things with squeal light like the fact that you can just point a squeal light driver to a file url and it just works means that you can do some really interesting things with testing and i mean that there let's see i still think every programmer should learn c so many computer science concepts explained i do agree see there's a lot of great things a lot of great things i use lib squeal i just say squeal light because everyone knows squeal light but lib squeal is turo for work and it has more stars than squeal light and it's open to the public to make contributions to so it's kind of like the neovim of squeite it's the neovim of squeite you're a squeal heavy kind of guy yeah yeah yeah i get that i get that welcome to costco i didn't mean to turn on alerts i meant to turn on that hey hey the name is hold on what is this hot take what is the hot take we're looking at i want to see the hot take give me this hot take dude i wish i could just see the thread or click to it all right my hot take is a beginner should learn on se i don't think that's a hot take it always it was always that or pascal fair i do think you can learn a lot by learning c even if you're like even if you've been programming javascript for 10 years and you have absolutely no other language experience learning c can really help you in day-to-day life honestly there's so much you will understand about javascript by programming and c there's so much you will understand about the world by programming and see even if it's just for a moment you don't need to do it always like i'm not someone that's that that that is like a c supremacist right i don't i don't think it's the greatest language ever i think c is incredibly inconvenient i would rather go use go and just make a web server but you can you see can c help me get my girlfriend back i mean you would have been a chat to begin with i'm just saying i learned all about ub pointers and segals when i got into c exactly you get the exact idea which is it just helps you understand what's happening in javascript it helps you understand what's happening in go it just helps you look at a language and go okay i think i get this i think i think i can get this you got to be careful though c does transfer hair from your head to your to your to your chin okay they call neck beards for a reason se fault will teach them something all right yeah c paid for my honda civic let's go let's go you actually talk to a computer and see like literally you talk to the computer you're like give me some memory i'm going to make the memory say these values and i'm going to point to it and i'm going to interpret those values in this shape and it like works it's great there's a lot of cool things about it the name is the primagen is the cagen