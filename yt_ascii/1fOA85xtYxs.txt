a human hair is about 50,000 
to 100,000 nanometers wide. a virus is about 20 to 300 nanometers wide. and a fingernail grows 1 nanometer each second. when an asml machine positions 
a wafer for duv or euv exposure,   precise machinery must hit the exact 
right position to within a few nanometers. these margins of error boggled 
my mind and inspired this video. so how does an asml lithography machine hold and   move a wafer? it's magnets. if you want 
to know more, let's dive in together. ## beginnings
all right, people, let's do this one last time. an optical lithography machine is 
essentially a $150 million camera   that uses high energy light to 
transfer a very complex chip   design pattern onto a wafer - which is 
usually made of silicon but not always. the workflow goes like this. first, we 
apply the photoresist - a complicated   light-sensitive polymer chemical - onto 
the wafer using the spin-coating method. after a few other preparatory steps 
which are important but i won't mention,   it goes into the lithography exposure tool. inside the tool we have several sub-components 
- the light source, the condenser lens,   the photomask, and the objective lens. together, the light source and the condenser lens 
makes up the illumination system or illuminator.   its job is to deliver light widely, evenly, and 
at adequate intensity to transfer the pattern. illumination is very important, which is 
why asml dedicates multiple mirrors in   its euv machine to illumination at the 
cost of significant power reduction. that illuminated light then passes through 
or bounces off of the photomask or reticle,   which contains the chip design pattern. in the early days of the semiconductor industry,   the whole mask contained the whole design. 
but as designs got more complicated,   the industry started using "reticles", which 
represent a portion of the whole chip design. nowadays, since almost all masks are reticles, the 
terms are used interchangeably. like the wafer,   the reticle is placed on a positioning table 
so they can be moved to compensate for natural   errors. a robot automatically handles the 
work of exchanging the reticle when needed. after the reticle/mask we have 
the objective lens. it collects   and properly focuses the light, 
and then shrinks down the image. the light then goes on to strike the 
resist-coated wafer. when done right,   we now have a 3d relief of a portion 
of the chip's design on the substrate.   later, we can make that design 
permanent using etch processes. ## challenge statement
the wafer and its stage are pretty heavy. fully loaded with a 300 millimeter 
wafer, the stage weighs about 15   kilograms - which for illustration is the 
average weight of a grizzled tree-kangaroo. the platform has to be able to 
move these wafers and their stages   extremely quickly. but it also has 
to be capable of abruptly stopping   and holding absolutely still - if 
needed during the exposure stage. and at the exact right place too - just nanometers 
of margin. machines need to have good "overlay",   meaning the relative position of any 
pattern layer relative to the others. calculated as a percentage of the feature 
size, overlays can get to be just a few   nanometers. errors will damage the device's 
capabilities and maybe cause short-circuits. overlay requirements get even more strict when we 
are executing multi-patterning. that is where we   use multiple exposures - positioned just right 
- to create lines smaller than before possible. inside the machine, the wafer stage can 
accelerate to as much as 20 g-forces,   twenty times the force of gravity. 
three times the maximum force on a   formula 1 car. or twice the maximum 
permitted force in a jet fighter. at the same time, the system has 
to execute these fast movements   and changes in movements without 
causing vibrations. this is for   obvious reasons - vibrations throw off 
the precision targeting and cause errors. ## history
asml evolved from philips in the netherlands. philips has been building semiconductors for 
many years. their machines reflect this heritage. their products were first developed in eindhoven 
at philips' natlab ("natuurkundig laboratorium").   there, the lab produced its pioneering 
lithography machine - the silicon repeater. some of philips' first wafer steppers 
like the pas 2000 used "hydraulic   linear motors" to move their wafer 
stages around. these systems use a   high pressure pump to push oil through 
hoses and valves to generate movement. hydraulics worked well from 
a precision-standpoint,   but lacked the necessary reliability. 
with all the pumps and oil around,   any leak would be utterly 
devastating in a cleanroom fab. so the philips engineers built 
strong seals to prevent leakage,   which bulked up the device. semiconductor 
customers nevertheless refused to accept the   product - in part contributing 
to asml's rough early years. it is an example of over-engineering to 
fix a problem that shouldn't have existed   in the first place. after a high profile lab 
incident involving a burst hydraulic oil pump,   the team decided to explore 
electrically-driven systems. to build that system, philips tapped 
their experience in producing the   precursors of today's optical disk 
technologies like the compact disc. earlier, philips wanted to build 
a gramophone-like product but for   video. but since video is so much more 
data-dense than audio, they replaced the   gramophone's stylus - which physically touched 
its disk - with a contact-less optical laser. this approach required the creation of 
small precise linear motors to control   the unit reading the information 
reflected back from the disk. linear motors are motors that directly 
convert electricity to movement without   the use of a rotor. they do so using the 
lorentz law, exploiting how electric and   magnetic fields interact with each 
other to generate motion forces. natlab engineers realized that they 
can apply these same technologies to   position the silicon wafer. such 
systems were widely successful,   and asml machines are particularly 
known for their precise maneuvering. as we moved into the 2000s, 
the industry also moved from   200 millimeter to 300 millimeter wafers 
while also shifting to a smaller node. the lithography machines had to be 
re-engineered for multiple criteria.   they had to accommodate larger 
and heavier wafers but at the   same speeds and demands. they also 
needed to process smaller features. while pondering a way to 
handle all of these issues,   asml created the twinscan platform - 
their main brand of lithography machine. ## meet the twinscan we call it the twinscan because the machine runs 
on a dual-stage cycle - measurement and exposure. during operation, there is a wafer on 
each stage - clamped and secured using   electrostatic forces. the chuck has 
tens of thousands of burls to reduce   direct contact to just 2% of the wafer 
surface area, cutting contamination risk. at the start, we load or unload 
the wafer into the machine using   a robot called the wafer handler. they 
start off with the measurement stage. in the measurement stage, the machine runs through 
a series of scans. these scans help the computers   prepare how to align the wafer in relation to the 
reticle to ensure good focus and accurate overlay. then the machine swaps the stages, rotating the 
wafers. the measured wafer now goes under the   lens, and the machine turns on the light source 
until we hit the required dose of light exposure. during the swap, the machine can use 
the downtime to exchange the reticle,   though doing so requires a 
new reticle alignment step. in the twinscan, these wafer 
movements are coordinated by   control architecture reference 
model motion control platform,   or carm. these are powered by a bunch of fpgas 
and process controllers in a cabinet rack outside. this whole setup seems a bit obvious. 
but lithography machines prior to the   twinscan ran all the measurement, alignment, and 
exposure steps sequentially on a single wafer. pulling off the dual stage setup was a major 
engineering project. the tool's architecture   had to be reworked to re-balance all the 
new weight and mass on the machine's frame. not to mention handling all the 
vibrations from two processes   running at the same time. it required the 
lens and metrology equipment - mounted on   what we call the metrology frame - to 
be isolated from the rest of the tool's   main frame using air-bearings - which use 
highly pressurized gas to cut friction. key to hitting throughput benchmarks 
is not the exposure stage, but rather   the measurement stage. a duv machine 
handling 175 wafers per hour - average,   in the market - exposes each wafer for 
just 20 seconds of a 2 minute cycle. the rest of the time is spent 
on measurement. i am reminded   of one of my favorite documentaries - "jiro 
dreams of sushi" - sushi master jiro says: > [customers] think the staff in the kitchen have 
it easy. and they think the master making sushi   has the hardest job. but in reality, the sushi is 
95% complete before the fish is brought out to me. in the twinscan, the exposure stage is sexy and 
where all the economic value is added to the chip. but when the machine sends 
the wafer into exposure,   the sushi needs to be pretty much complete. so 
for asml, figuring out the right sequence of   actions during measurement is crucial 
in shipping a competitive machine. ## twinscan today today, the twinscan name has a 
number of product categories. "nxe" twinscan machines do euv lithography, "nxt" 
machines run with 193-nanometer arf duv light,   and "xt" machines use 248-nanometer krf duv light. the nxe:3350 euv machine can 
process 125 wafers an hour,   so one every two minutes. sophisticated 
duv machines can even do 200-300 wafers. the numbers in the machines' name 
correspond to their optics systems   and lens. the machines themselves 
are built in a modular fashion per   the customer's requirements 
- kind of like how pcs are. this is because machines are expected 
to run in customer fabs for decades,   they are set up to receive upgrades to keep 
up with modern requirements. for this reason,   there is a vast diversity 
even within the same category. ## fine and coarse the typical lithography machine 
has two movement systems inside. systems transporting the wafer from one 
work station to the other are referred to   as the "coarse stage". the motors handling 
these are referred to as "long-stroke"   because they are designed for extended 
range - about 1 meter - and high speed. then we have the "fine stage" - because they 
value precision over distance. as you might guess,   we use what are called "short-stroke" actuators 
- often voice coil motors - to handle this. to get this wide range of movements, 
systems are often stacked on top of   each other. so the fine stage on 
top of the coarse stage. this is   known to have caused weight issues as 
more stacking and movements are needed. ## generating movements it is interesting to review how precision movement 
technologies have progressed inside the machine. early machines like the old philips 
wafer stepper moved their wafers   around using mechanical systems - like the 
aforementioned hydraulic linear motors. tools like canon's fpa-2000 photolithography 
machine - for the 500 nanometer process node,   introduced in 1992 - used mechanical 
guides. kind of like rails,   stacked one on top of the other for movement. but such computer-controlled 
systems suffered unexpected   alignment errors due to friction - 
forces that act on the stage prior   to motion. these little errors 
added up to create big problems. worse, over time that friction wears 
down the mechanical bearings. they   then needed to be replaced - requiring 
expensive downtime and human intervention. in response some time during 
the 1990s and early 2000s,   the industry implemented "aerostatic 
systems". this means that they created   a thin film of extremely dry air between 
the wafer stage and a granite slab. it is kind of like the puck on an air 
hockey table. this air cushioning cuts   friction and reduces vibrations 
from the wafer stage's movements. for these machines, asml used interferometers 
to track the stage's positioning, essentially   lasers - mounted on sharks of course - reflecting 
off a mirror mounted on the side of the stage. the precision guidelines are tight. so 
tight, that additional calculations were   needed to compensate for the refractive 
index of the air, which changed as the   stage moved around. it threw off things by as 
much as 1 nanometer, which was unacceptable. nevertheless, air-based systems did a fine job 
for many years. but as lithography continued to   advance, cleanliness benchmarks like those for euv 
would eventually require the presence of a vacuum. air systems are not viable in a vacuum. 
so in preparation for this, asml in the   late 2000s began switching over to suspending 
their wafer stages using magnetic levitation. ## magnets magnets. how do they work? according to a 2017 presentation by a vendor, 
the wafer stage sits on top of a 1,400 kilogram   magnet plate array with over 2,200 magnets 
- precision placed to within 20 micrometers. 1,457 of those magnets are arranged in a 
halbach array, which is a special arrangement   that strengthens the field on one side 
while canceling it out on the other. for metrology purposes, asml switched 
from lasers bouncing off the sides of   the wafer stages to lasers firing down 
from a grid mounted over the stages. now for nxt immersion systems 
which are not in a vacuum,   the metrology lasers don't have to travel so 
far - 15 millimeters versus as much as 300   previously. this simplified the air refractive 
index calculations and improved overlay. some of the challenges of the design 
include having to deal with errant   magnetic fields interfering with 
the wafer. as well as cooling,   which might require the use of umbilical 
cords or hoses impeding movement. i have seen some interesting proposals 
to use a single mag-lev system for   generating both short and long-stroke 
movements. such a system would get   rid of the stacked fine/coarse stage 
system - saving on space and weight. it is a compelling idea and a lot of 
demonstrations are floating around,   but the latest documentation that i 
have seen still shows the presence of   separate electromagnetic motors 
for these different movements. ## conclusion an asml machine has to position a 15 kilogram 
wafer stage with below-nanometer accuracy. i on the other hand wear t-shirts because i 
have trouble buttoning my collars. ergo it is   a bit difficult for me to comprehend the 
insane precision necessary for this work. something that i did not appreciate as much going   into the project was just how big of a 
role software played. from 1989 to 2000,   the number of cpus and sensors in asml's 
tools grew six and eight times, respectively. that 1989 stepper - the pas5000 - had a 
total of 200 million source code lines,   including comments. the 2003 twinscan 
has 1.25 billion lines. i know, i know,   you can't judge complexity by lines 
of code, but that caught my eye. this aggressive leveraging of 
software - the former ceo said   that the team doubled in size every 
four years - is probably a key driver   behind their strong performance. 
worth looking down the line.