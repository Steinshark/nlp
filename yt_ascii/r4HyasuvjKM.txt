i made jsx for lua because i hate static sites you know without reading anything in this article hate's a strong emotion and it can make you build almost anything and this seems like one of them all right here we go i like jsx but for lua you can write a lua file that returns a chunk of html you can compose more interesting pages by writing functions that return hml here's what the homepage of my site looks like in lua x i define whatever data i want in plain old lua okay okay okay article okay look at this i cannot believe i cannot believe this is real someone made this oh my goodness ben ben viness this is the ben viness this is the business you're giving him the business business dude this is awesome you can use lua package system to organize my templates that's pretty sweet whatever oh my goodness that is actually pretty okay this is actually pretty sweet why yeah why because i hate static sites no seriously i actually hate static sites i got into programming because i wanted to make websites when i started out you could just copy hito files up to your server and you had a website it was magical and php made it even better you could throw in a little snippet of serers side code and you had a dynamic page those days are gone they're gone because react strangled it in its bed slowly today i spend my time organizing markdown files and folders so a janky tool can cobble them together into a website i spend my time learning weird template languages with weird functions and bad control flow i spend my time in cloud control panels getting confused by bucket permissions and cdn settings this man's been you can tell right away it feels like we've regressed 15 years ago it was fine to run a script from scratch on every single request but today we insist that you have to serve every personal website from a cdn that means no fun allowed if you aamai no fun never so if you want as much as the cc20 copyright 2023 in the footer update you'll need to rebuild and deploy the site i don't want that i want my 2023 update dynamically damn it what's saddest to me is that when people do want that dynamism and they often do they end up doing it with javascript making their pages heavier and slower then to compensate for this they'll add some kind of serverless backend serving rendering plus hydration in a pile of extra complexity instead of just doing a little server side code they're wasting people's cpu time and their own money i don't know who this person is business with the business but i love you i love this this is so this is so good i love the fact that he got so frustrated by today's development experience just wrote a gosh just literally wrote lua x i mean how pissed off do you have to be to write lua x so the reason why okay so people are always wondering why do i hate jsx but i do something like lua x or temple right so if you don't know temple temple is the same thing not that temple this is different this right here why do i like these but i hate the other it's very very simple when you do lua x it only executes on the server there is no client side integration here i think that's the big downfall of jsx is that jsx is both a serers side and a client side language and so you end up getting this weird things where you start tying stuff in together and you're trying to reason about client and server constantly when something like a web component or something else could do such a good job cuz most your functionality is pretty thin when you really understand the difference between server and client side functionality and now you have this huge thing that you end up having to create because once you go down that route that also means all of your client side rendering has to go through all of the jsx so that means you need to start figuring out how you're going to be doing your state updates this is why redux was born is because you can't simply just update a place you have to update the gosh darn whole thing luckily solid with signals and all that kind of helps the entire thing but you still end up with this giant replication state tree all over the place it makes development really confusing and upsetting and and emotionally bruising okay okay buddy but why jsx because i like it i've tried so many templating languages over the years like mustache liquid nunchucks blade jango and of course go templates commonly seen in systems like hugo go templates aren't half bad but i'd put them as they're almost there they're missing like a couple things but they're pretty good of all these languages have basically the same design which i'll call a pre-processor model yep they all start with the assumption that a template is mostly a static piece of content and in this case html with some slots to paste dynamic values it's more or less just c pre-processor a simple find and replace passover the original content legitimate javascript emotionally damaging i love it but this is never actually enough you start out with simple values and ranges but rapidly escalate to tricky conditional logic weird inheritance systems and eventually custom functions written in a host language that are injected into the template language fair this is actually fair the inheritance system is dude i forget what i forget what templating system is a ginga but the inheritance is like all backwards and i absolutely hate it i think go templates are as close as you can get to pretty good basically these languages are too weak to do anything interesting when i write my article about doing advent of code on a ps5 i found myself frequently reusing specific layouts on a wide layout that displayed two columns side by side but reflowed to vertical mode on mobile in go templates this was an utter disaster okay define wide start define wide middle define wide end i wonder if there's a better way to do this i wonder if there's a better way to do this there might just be a better way to do this but that's funny the problem that is that no pre-processor style templates actually allow you to manipulate the html as data the html is opaque the template language doesn't understand it the web pages are complex documents that often need serious logic to assemble logic that requires the template language to work with the document structure instead of just text i'm shook shook right now even php falls short of this standard language jank and terrible design aside php is at least a real programming language it has arrays and loops and functions and so on but it still doesn't understand html it's just basically a fancier version of a pre-processor model yeah that's fair that's a fair take but isn't lua isn't this just all pre-processor fancy aren't we all just in the end just pre-processor fancy when you really think about it we're all just string concatenating i mean at the end of the day you're just string concatenating that's it that's all you do if you think that you're doing anything else you're mapping you're filtering and your string concatenating over and over and over again at the end of the day it's night it's true unarguable facts i've been doing someone's back end for the main portion of my life okay how does that feel and once in a while when i peek at the front end i get scared and run back to the back end huh i don't even know what that means to tell you the honest truth real string processing is the friends we made along the way it's true it's absolutely true this is why jsx is so much better better than js inside html it's html inside of js it flips the ownership around when you need to do something interesting you don't need to learn some underpowered language or contort your work to fit a broken system or remember which escaping functions to use you just write code and the rest sorts itself out so my one disagreeance here besides for the client side stuff drop the client side stuff one thing that i find true among temple i find it the same among jsx on the server and i find it the same probably in lua as well is that you end up making really complex abstractions for things that if you just took a little bit more time and thought about you could probably do much simpler if you reduce the language the complexity of the language bleeds into the complexity of the ways you solve problems and javascript is an extremely simple extremely complex language it allows you to do anything in any way shittily sometimes and so that causes just like i swear i've seen some of the craziest code because javascript lets you do it javascript i love it sometimes yeah sometimes sometimes you there's some clean javascript out there there's some clean ones okay i've seen arrays being used as objects yeah we did that in falor of course we did by the way you should use arrays to look up values until you have like 30 values in the array then you should switch it to a set or a map depending on your need carac said any programming language feature will eventually show up in a good code base that is such a good way to put it that's actually really funny that's actually really really funny am i preferring go templates over temple i'm not sure i i honestly don't know i need more time to tell you which one i like i'm going to i'm going to try i'm going to try leptos again which is rust's version effectively of temple and i'm going to try that all over again and see how it goes and really just try to make my decision on these things because i just keep on doing back and and keep doing them over and over again i think temple is better because of the compile time syntax checking i agree with that compile time syntax checking right and type checking very very good it's important to note that jsx is distinct from react or spelt or whatever front end we usually associate it with i'm not a fan of those frameworks they have they have a lot of ideas about client side reactivity that i don't like and don't care about but i really like writing html inside of a real programming language okay i i mean i get the motivation right i i i'm kind of in this camp that's why i keep coming back to lepto temple is because i i want that right i want that to be true why lua because i like it that's actually just a good enough reason i've considered using jsx but my website is built in go and i wanted to keep that it that way i find gh toing to be best in class when it comes to deploying a server build a binary start it up the end in contrast every time i've deployed a node app i have suffered immensely yeah and also go super fast you can literally build a million line go project in like a second and a half it's incredible and then you throw a little bit of air on there it rebuilds so fast i can't navigate to the browser and this is me navigating to a browser it's like going d d d d d d d it's already refreshed it's blazingly fast what i wanted was something i could embed easily into an existing app this is so good already this is actually a dude this is why people love lua and i i'm shocked that lua is not used more is that this guy is using a gob back end and he's going to just put lua in it okay just take a second and think about that lua fit the build nicely but even more importantly lua is extremely easy to parse the entire grammar fits on one screen and the official parser is less than 1,500 lines of code furthermore lua didn't use this for anything except comparisons so there was no ambiguity hml tags could be used wherever tables were used it was therefore easy to create a custom recursive descent parser i mostly just ported the official parser to go and modified parse simple expression to parse tags as well as tables this is this is badass i want you to know that this is badass my transpiler doesn't even produce an abstract syntax tream it doesn't need to it just emits vanilla lua code as is and converts htl tags to lua tables as it goes the the end result is less than a thousand lines of code about 700 of them are just parsing lua with the remaining 300 being used for my new features and it took me only a couple days this is super sweet embedding lua into a go took about 17 minutes of my time on a saturday and i haven't really changed anything about the runner since then there is something very nice about dynamic languages like i'm totally on team dynamic language but i like constraining it and this is like such a cool i i should figure out how more times how to use lua maybe i want to play with lua i bet you there's already a lua to rust thing and so you can build bits of your rust system with lua something about that just sounds super compelling because lua when if you've ever used enough lua here sorry this is rust you may have heard of rust by the way that's markdown apm one thing that i actually have become i' be begun to like about lua is that you can just simply use these simple doc comments something like j something like whatever you call what's the stupid thing called js doc and i can just be like emitter and it just tells me right i here's my functions right i can put little app comments on it i get all the auto complete not only do i get auto complete complete i get all the jump i like you get all the pain of you you just get it all it's like right there if i wanted to you know there we go i just added a type to that thing and now it knows do you even java bro i put that comment there i put that comment there okay i put it right there you can see it lu is pretty neat lu is a embedded language that is used in a lot of like c++ lower level projects vim being one of them so vim embeds lua into it because it's just it's just a great scripting language i think i've spent more time fig fing out louis package system than writing the transpiler be aware of that that's fine oh my goodness let's go let's go business with the business oh my goodness thank you this by the way this article is freaking awesome i just want to let you know this article is awesome i absolutely love that and yes the the package system is probably the confusing part of lua you have to have think i don't really understand how pathing works other than at least i understand it from a a vim based thing one based arrays annoying but it's not the most annoying thing it just isn't the most annoying thing i don't like it that's it d nice i like to see that all right before go templates oh yes you have to do this picture source yep you have to do these this if you guys don't know what's happening here you can define your own functions you want to be able to call inside of your go templates right and so you can see that there's this whole template thing going on right here a lot of blah blah blah blah whereas you get to do the exact same thing in lua and lu is probably just easier to do it in because you're not really caring too much about types you got fast iterators you actually have iterators which is great unlike javascript loser there we go this is great my demos 3d article required me to generate unique ids for each desmos graph in hugo i had to use the scratch system to store and manipulate data in hugo itself i can just do a global in my lua x file furthermore i register a new des desmos short code globals across my entire site this is now just a lu of function specific to the article this is cool i think this is a this is actually a really great argument for why you should do it i i i like this maybe i could be more into this maybe just maybe i could be into this this is great i'm not going to dude too long i'm not going to read all of that congratulations or i'm sorry closing thoughts my goal with this project was to make myself happy and i think i succeeded again i keep i feel like i'm a broken drum sometimes this is one of the most important goals of any side project find something that upsets you and fix it your way what you think is a great way go research and come up with a stupid new solution doesn't it doesn't have to be life-changing it doesn't have to be twitter cred just do it and make something and guess what you're g you're gonna learn a crap ton this guy's writing a descent parser okay viness over here is writing a descent parser just to get everything done added in some htx into the parsing called it a day it's beautiful absolutely beautiful beautiful i love it i'm very happy now with lu xf so far i it's it's not ready for production in the sense that i have cut several corners on the parser but it meets all my needs right now and i love using it taking a step back though it's very gratifying to be able to bang out a transpiler in a weekend earlier in my career i would have started with lex and yak and probably got gotten lost this has happened multiple times these days though i understand compilers well enough just to sit down and write one and it feels great this is awesome business are you are you in the chat are you still in the chat if you're still in the chat what what's your go-to book don't build reactant lua please don't do that produ temple jsx good enough what's your book please cuz i personally am a big fan of interpreter book i think that interpreter book is the best one the bible it's a pretty good one but that's not really it's not really good for learning how to make a compiler i like this one a lot and you get 30% off and i get zero money for lou is my passion at least emojis at least emojis aren't your culture okay let's see if i don't know if viness is still here but if he is thorston is a legend thorston is a legend rus go to rust exactly the dragon book the dragon book is pretty definitive for compilers i agree i like the dragon book is really good but i really really do like the thorsten one it's super simple and it just it gets you right into the saddle and it's really really good and you can complete honestly if you really sat down and you were really motivated you could complete it in an extremely small amount of time 20 hours complete the whole gosh darn thing jonathan blow things the dragon book sucks i mean to be fair jonathan blow things everything sucks okay i like the guy don't get me wrong oh he did gary bernard's screencast about making kers nice okay okay my bad i i like john okay i think he's great i think his advice is super good he also hates everything so it's like is it bad i don't know john blow is hypers specialized in one area of programming how come everyone cares so much about what he thinks contrarian equals john i'm pretty contrarian myself though so like i i don't want to i don't want to dunk on the guy i'm pretty contrarian myself i'm i feel like the lone voice in the wilderness crying that you shouldn't use react constantly i'm just trying to be like people stop using react for everything maybe like maybe javascript isn't the best answer for everything i spent almost all my year working on projects for other people while i'm am proud of the work i did i and i enjoy it there's still something special about making tools for yourself does anyone else in the world want to make their websites in a weird dialect of lua maybe not but i do and that's enough agreed i don't know what the future holds for lua x and it's not ready for other people to use and i'm not sure it'll ever be so rather than tell you to go to lu xdev and start building your website with my tool here's what i'll say try building something yourself my goodness this guy is just based just there's going to be a literally on youtube there's going to be a wall of comments that are just based that's it business based business based try writing code for you and you alone don't worry about whether it will look good on your resume or attract lots of stars on github just write something that feels good for you explore weird ideas and see where it takes you who knows maybe someday other people will like it too earned earned based and followed and reported so good love that this is great this is absolutely great this is i mean this is the literal reason why i'm building apm i just want i just want to have an apm counter it's just a i just want an apm counter notice how the profile isn't an animu waiu facts and logic that is not an anime waiu i can tell right away that's not one i can tell with using just my eyes it's not glad you enjoyed it dude it was this is such a good article i like go templates but i can i can tell that they can become a bit of a pain in the ass i'm still worried about jsx though i think okay here's my real take i'm going to give you guys an honest ass take and not just like a stupid take okay go templates suck temple. guide sucks lua x sucks react sucks lepto sucks they all suck they just suck differently choose your suck and enjoy it hdmx sucks like everything sucks it's all broken none of it solves the problem universally because you can't have a universal solution embrace the suck discover each way things suck and then choose the least sucky for your project there you go that's it the name the sucken wow