so i'm going to be real with you guys i don't like turner statements i've never liked turner statements specifically a bunch of how much you want to bet there's a hu huge number of them specifically a bunch of these like when i see a statement like this i think that you've done messed up i think that you have greatly screwed up your code and whatever shortcuts you think you're taking you're just not taking the right shortcuts i already knew that was going to be in here because of course it's about turn aries right and so when i see that and we try to make it more excess to use turn aries to me this feels like we've gone the wrong direction okay i'm just throwing that out there now let's read this article so that's the mentality i'm coming in with okay it's the mentality i'm coming in with all right just so you know november 13th 2023 alex rray rat rat tray rat tray rray i'm going to say rray because it feels like when you say rat tray it feels just like can't be that can it can it tary formatting has always been a challenge and we finally addressing it in 3.1.0 with the introduction of novel formatting style all right read on for the journey and the motivation behind this change along with early developer feedback and an overview of curious tary style okay okay please give us the experim please give the experimental turn aries a try option a try and let us know what you think all right okay introduction formatting nested turn aries nicely in a wide variety of scenarios is surprisingly tricky challenge absolutely developers have long found them so confusing to read that they end up just refactoring the code into an ugly series of if else statements i don't know if i believe this statement so i'm just going to just i'm again i'm going to lean into this okay is a series of if else statements ugly compared to turnar i just don't know if i buy that because what it says to me is that if you have a ton of if else statements perhaps there's a better way to organize your code and that you're kind of hiding the problem by having pretty turn statements and so this is my big worry is that it just leads people to just crazy code as opposed to more maybe different thought about code like what is the core problem here what are we doing wrong are we effectively needing some like a bje a map that makes more sense to kind of reason about our code than whatever we're about to get so i'm a little bit worried early returns great way to kind of simplify code i don't know thoughts thoughts really okay okay okay okay hold on hold on hold on just beautiful thoughts all right let's see according to the beta testers oh sorry often with a let declaration an immediately evoked or immediately evoked function ex ex expression or a separate function entirely now that also seems kind of that seems wild i would also argue that if you're doing an if you're doing an i if at any point within your code to me you've already goofed up like this should be a good example that you already are kind of on the wrong side of things that should be a really just a strong indicator that's why again this is actually i make this strong argument a lot of times and i really want you to think about this argument which is should you have two or four spaced indenting now maybe you like two space you feel better about it but there's a reason why when i program i have kind of a strong 80 column line right here that's not a requirement but it's an indicator to me and i go with four space indenting the reason why i do that is so that i can kind of signal to myself when i've goofed up a little bit when i've gone a little too far on my indenting so by having a four space indent i'm able to early signal myself along with an ad column that i'm just creating really long code and really long code i feel is a lot harder to follow than very vertical code again that is my take you can have your take okay i don't care if you think vertical code is harder i think it's easier i think it's easier to debug i think it's easier to step through i think it's easier to add print statements in okay personal opinion so shut up 80 column is not enough for four space and denting that's the point i'm keeping it between one to two levels right that's why i do it like that's precisely why i do it is because by the time i get to a third indent i'm now going i've goofed up a little bit now granted i don't write java facts facts of life i don't write java all right historical background prettier original naive approach just added indentation to each level of the nested taries worked fine in simple cases but obviously doesn't scale with long chain of nested taries and had other problems i would say that you've the problem doesn't exist the problem exists because we're solving the wrong thing that's oopsies i just clicked the link that's still my that's still my take so in 2018 we replaced the flat with that with flat turn aries which seemed like a good idea at the time but it was not well received the issue was let's see the issue asking it to be reverted had well over 500 up votes while we did ultimately revert back to int indented turn aries we wanted to find a better way by the way i'm going to throw something out here okay i know this is a complete adhd moment but i want i want to say something okay right now we are reading a about nested turn okay you know what i'm actually going to save i'm going to save this take okay i'm going to save it i'm going to save it because i feel like there's a better place for it i feel like there's a better place when we get down to here okay when we get down to here i'll come back i'm coming back i'm coming back adhd reback in we're reb backing in over the last few years we've explored the and experimented with many many possible solutions which would be as readable as indented taries in common cases but would scale well in a wider variety of situations okay challenging criteria ideally we find one scheme of that would meet our criteria in all cases it should be easy to follow what's the if what's the then and then what's the else that they ma to okay this is good criteria i like this the code should fluidly flow from a single turner to a chain of two to a long chain of simple cases to something more complex with a few nested conditions most alternatives we explored failed this test okay okay the syntax in jss typescript conditional expressions which cannot be expressed with if and normal js should all feel free or should all look and feel the same again this right here should be the greatest ident this is one of react's worst gifts to mankind is to normalize using multi-change turn aries use a function people okay a function can return null you could think of a better way to do this it's wild okay it's wild that you're doing this okay stop it stop it use a function figure it out all right it should scale to nested tary chains of arbitrary length imagine typescript conditional types with a dozen of alternative cases indented taries clearly failed arguably one and even three have always almost always printed jsx taries in flat but readable format with unfortunately felt unnatural outside of jsx many people in the community were excited about case style drawing inspiration from the match syntax from languages like rust or o camel o camel mentioned can we get an o camel mentioned o camel mentioned december 1st advent of code o camel getting excited december 6th tj will be at my house te the o camel second most influential o camel streamer on twitch will be here and we're going to o camel together o camel our camel okay but it did not mean number two and other goals okay a surprising solution the good news is that we found a formatting algorithm that met our criteria the bad news is that it's novel and thus unfamiliar to most developers in beta test testing this feature we found developers were quite skeptical when they first saw it okay but then after using it for a bit they didn't want to go back all right all right this is good so everyone's saying oh yay nice not convinced okay anyways another developer had to say this my first few hours on the rule i felt a little odd but by hour two i'd used it a few times to solve problems that otherwise would been would have been ugly would have been ugly refactors to if statements that i'm not going back man this is worrying me so much the state of javascript is just i'm i'm actually getting anxiety over what i'm going to have to read i used to hate nested taries good good feelings but i have let's see but i also hate re structuring a nice line of code to if el statements the new rules add an understandable linear if else if else expression to the language and is much nicer than multiple turn aries as nested branches okay so we felt we had a winning formula but we knew it could be jarring introduction to the community as a result we're formatting behind a temporary experimental okay let's see it just let's just see it styling overview so what does the new style look like here's a quick contrived example and the thinking behind curious turn aries okay pet can bark is scary wolf else dog else outer else can meow inner then cat inner else of the outer else probably a bunny okay every line with the question mark is an if if you see fu question mark it's like asking if fu then every line that starts with the colon is an else if you see colon that means else fu yes if you see else if you see this that means else if fu every line with this or this is a then yes okay yes these are all rules of turn aries here's the code rr to demonstrate k style turn aries all right animal well hold on dang it i mean you inverted the logic though this dang it i really wish you would have kept the same structure notice that he flipped it inside out is scary is now on the inside as opposed to the as opposed to the outside in fact i'm not even sure if they they yield the same results do they yield the same results they don't yield the same results i don't think so if it so so okay so look at this this statement right here if i'm not mistaken if the pet is not scary but can meow you will get this you can only meow no wait that's not it at all okay damn okay yeah okay this is the same this is this does yield the same thing but it's just organized different okay i see it turnar suck i see what's going on here you can see this is a nice concise way to to get something approaching matched out i don't think this is nice i think this is if i saw i i would say that you done effed up rethink how you're doing things it's just how i feel our new formatting is fluid a blend of curious turn aries where the question mark is always at the end of the line and k style turn aries where the question mark is in the middle of the line yeah see the problem here i have is i really have no idea where i'm going with it right this is if this mouse else if can bark else inner if scary wolf dog else if can meow cat els if can squeak mouse i mean you have it twice here else bunny you know i just don't think we want to write this kind of code i really think we should try to do something a little different you know like if you're doing all of this one would have to ask you've messed up a lot of things right if you're doing this many checks i feel like you've you've goofed up somewhere else right like i feel like maybe you need a function or an interface that's going to say like if only there was a pattern that existed in which normalizes this like say two string or something that you can call on the object to produce this as opposed to whatever this is like i don't like that you're inverting the responsibility to some function on the outside to like determine like stringified type like something about this something about this just really bothers me strategy strategy pattern meant yeah i know it was a strategy pattern that's what i'm saying is that there is a strategy in which makes this easy to pattern out i like it it's a quick brain dump but the problem is is that the problem here is is that every time you add any sort of variation on this you must alter this ever growing line of turner statements what happened if each one of these functions are expensive this also means that if you have this thing that exists you can't have a variation of types right your type every time you want to add a type it has to be can squeak it has to have can bark it has to have is scary it has to have can meow it has to have can squeak twice right like it has to have all of these things existing on it whereas if you invert it and try to do more of a composition version you just have to have the thing right so to me this is solving a problem i know this is a meant to be an example i understand this but when i see code like this as an example what i'm kind of getting fixated on is that if you're writing all these ifl statements are you sure you're not just doing bad typing are you sure you're not messing up composition that's what i'm saying maybe there's a composition pattern that just works better here as opposed to whatever we have going on does that make sense okay just something give us your feedback we we we we like the more readable new default we really hope you can give us the experimental turn aries i feel like i'd rather have an es lint rule that's like you can only use a turn ar in a return statement and that turn ar can only have like single member call expressions and constants or constant variable return right like i would want it so constrained it's like the complete opposite right i would rather have it so that it's just like brutal brutally tiny where you can use and how you can use a turner i would want the exact opposite honestly so do i think this is beautiful do i think it's more readable i absolutely think this is more readable this is many times more readable than how people organize turnar today i like what they have done this is good do i like the outcome of this no i don't like the outcome of this at all the name don't give me turn aries boy okay i don't want it a jet