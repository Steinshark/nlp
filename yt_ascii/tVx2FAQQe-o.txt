alerts are off because i'm a genius smartest man alive hey don't try this home don't wait don't try this home don't try this at home css as a back end introducing cascading server sheets who here's excited who here immediately got a ton of anxiety and is very excited about this things that probably shouldn't exist two-part series don't try this at home css only image detail zoom okay and css has a back end it sounds like this person really knows pascal first off beautiful name second off it seems like you know a lot about css that we probably shouldn't know okay long as we can get can we get tailwind version for back ncss to make it easier is that a thing can we already do that i i'm pretty sure somebody can invent can we get front wind for the back end and tailwind for the front end did i just make a really odd observation that it's named backwards oh my goodness let's do it make front win somebody make it all right here we go here we go again another one of these and promise you will be questioning this my sanity after this one okay let's turn down the this thing headwind we can do headwind i like front wind a little bit better because it just sounds funny all right i was just getting the groceries i walked down the street to the local shop when it hit me cascading server sheets i love these moments in life they are the greatest moments in life when you're just walking doing nothing and all of a sudden you realize my goodness i could do something truly atrocious love it today we will use css as a server side language that's right use css to declare routing do maths quick maps heck even use css to do templating and we're not using anything like sas or less i don't even know that i don't even know that he did that i was already just due to due to lesson now i'm over here you know like i do the king make a squeal connection now that's the real thing if you can squeal in css hell yeah we don't do no stinking we don't need no stinking loops but plain old css what why smbc has lately put it quite well although it's part of a comic about quantum computers let's see the deep abiding goal is every of every engineers to take a thing and make it to do a thing it wasn't supposed to do this is true this is this is some internal thing in deep inside of me somewhere that does exist in my younger years i would spend an inordinate inordinate amount of time doing something that should never have been done but i loved it like you know like here's a good example actually i still do it in my older years i still try to write things in rust that shouldn't be written in rust what is that a front end right in rust right like that's the same thing except for now we call that engineering you know what i mean you know you know what i mean nah nah i mean let's go leptos i actually love leptos leptos is one of the greatest frameworks of all time so you know personal opinion there imagine changing a tire with the hubble telescope doesn't exactly work out does it oh i'm sure you can make it work though well how awesome would it would it feel if you managed to do it though and that's what i'm after this man is chasing the dragon severely chasing the dragon [laughter] you know i just wanted to be able to change that with the double the hubble telescope didn't get that feeling over and over again hey maybe i'm starting a new trend here who knows you're not starting a new trend because remember people have been putting doom on odd devices such as like even like a doom on a pregnancy test no first let's see no first person shooter jokes a hardware wonk successfully played to doom on a pregnancy test yeah so like look at that there you can even see it right there hold on we'll turn it down so this is not new ladies and gentlemen what's going on people actually friends there look at this look at that it was great look at that that's level one you can tell you turn left and you can get the shotgun guys oh okay you're going straight for the m okay there's an imp yep yep go through the door here it is there's the door okay open it up here we can see oh there's the empire wait no the m comes next doesn't it oh that's right there's this as an output how sweet is that oh my goodness quake i know but no one cares about quake okay it's all about putting doom everybody knows that it's all about doom it has a yeah you can also pee on it and it'll tell you if you're pregnant so like how amazing is that are you pregnant or are you just simply playing doom who knows quake and css oh i bet you someone could port if you can actually get logic someone will port doom to css all right who knows even if this trend is just laughing at my silly ideas and never taking me serious ever again you might know that the saying that people were so obsessed with whether they could that they forgot to ask if they should i think this isn't quite the the slogan that's a jeff goldblum quote from jurassic park one scientists were so obsessed with whether or not they could they forgot to ask if they should i think it's the more appropriate version of that that quote i'm well aware of the fact that i probably shouldn't but the question is is i could is i could oh and i mean stupid this tool will be something i'll never ever ever use in production and you dear reader should never do it either please there you have been warned okay cass let's see okay cascade server sheets it is let's first let's define how this thing will even work i was thinking about an interface to express okay interesting a slightly better language than css for a back end javascript that is basically define a catch all route in express load the css file parson interpret the styles this part will be fun i guess and shoot whatever dom emerges over the wire okay that seems good oh htmx would be a great front end for this you could do an htmx front-end and make this a real thing to do that first let's install express please note that i'm using let's see a node version manager to switch between node versions okay so apparently we're doing 14. okay awesome now let's create a little app and start let's see and add a start script okay there's a bunch of this don't try this at home thank you this is a great license by the way pascal i appreciate that i like the little details that this guy does right he didn't just put the like the joke in the description he he tossed it in the license you know but the one thing he did miss was the version you know i love your your extensiveness but please oh one three three seven a 69 a 420 a 42. you know there's still a lot of availability to to explore here in the express app but we define a catch-all route that tries to figure out if a given route corresponds to a css file or not if it exists it simply returns the content of this file if not a 404 will be thrown okay do a little bit of this do a little bit of that fantastic use one of these and there we go awesome i like to see this look at this this judo already is talking about llvm back end for css it could be done this could be done all right so anyways we read file sync okay utf-8 hey good i want to make sure this is utf-8 appropriate and then we just send the css so this is the confusing part how does it how does the css produce html this is what i don't get okay quick test shows that everything except small small index.css field yields or file yields a 404. okay good evaluating css thinking out loud all right okay so here's the fun part someday we'll need to figure out how to execute the css a server side and take whatever it outputs as the app response the first thing that comes to mind for rendering is simply use the css content rule to render well content it can use css variables and counters so we can technically even do math with it quick math probably there's just one problem the browser evaluates counters and bars on the fly so we cannot just evaluate the css oh my goodness is this client-side reactivity i've been hearing about do you think that css is actually just use client under is that what use client is underneath the hood for the new for the new use server use client react server components don't think i'm not looking at you dan abramov i i know what you're trying to sneak in okay i get it take whatever is the content and i'll put that so the computed style approach doesn't work believe me i tried basically you'll get what you let's see you'll get a what you see in the css tab for your dev tools imagine this piece okay so we got some numbers we got some this and then we do one of these oh my oh oh my goodness and this is what you'll get okay the sum is 15. yep that doesn't doesn't quite work okay oh my goodness it's using before oh this is disgusting so why don't we use a browser to do that the browser does evaluate this stuff somehow right the only issues that were shifting the problem here there are node implementations of css they are offered compute let's see they offer computed styles and browsers and the browser we would be using would only offer the same thing right if there was a way to let the computer read what's on the screen ideally the browser would load the css file and we wouldn't inline anything otherwise we can't cannot really use stuff like import so we'll need another controller that loads css anyways sounds like a lot of future me problems so let's first introduce puppeteer oh gosh oh no we're already into puppeteer where i feel like all good problems turn into web scrapers that make elon musk reduce the amount of tweets some people can read let's go thank you chrome debugger protocol appreciate what you've done to everybody to load the css we need some html we can create that on the fly and check the loaded css with the link base64 encode the entire blob and make the browser parse that okay so we got this thing create dom oh but this is not what i wanted to see now now but now but now you're doing javascripts right this is javascript this isn't coffee script i can't tell because you're using terrible syntax what is this anyways that's just me ripping on modern javascript in their arrow functions i swear what is wrong with you arrow functioners why do you create a variable that has an anonymous function did you know that v8 team actually had to create it so that their stacked races would consider the const variable name as part of their stack trace because it's such a stupid pattern emerged that even they had no idea people would do that do you realize that for like a year you just got anonymous function instead of the name of the variable because because the vip were like no way people would actually do that that would be dumb right they're gonna just create functions and then they'll do anonymous functions arrow functions where you actually want arrow functions right am i right wrong i like how it looks no you don't it has way more symbols why would anyone want more symbols i don't get it note that let's see how we already added the http method as the data attribute in any args of the css variables okay okay we got this thing we got the body data datified args okay interesting next we need an internal route to express to our express app that serves the requested css file all right so we got internal oh nice go conventions no one's gonna be able to get in here don't you hate when you do go and you find a method that you need and it's in the internal like one time i had a stats package and i wanted to do a man whitney test but the actual man whitney test in the stats package was behind something that i couldn't actually just just give me the effing man whitney test that's all i wanted and i couldn't get it so i had to like go and copy the code because stupid internal package anyways here we go do one of these things yeah yeah this is great internal file resolved okay app path okay okay a request to internal index css would then load app index css weird just weird and serve it puppeteer can now load our apps and execute it we could do more validation here but i kept it basic for the sake of implicity for the sake of implicity now get to the puppeteer game okay we're gonna go here we're gonna create some dom the browser is going to launch fantastic no sandbox never needed no son of a sandbox anyways we need the page we're gonna get the page we're gonna get the dom we're going to base64 and code it we're gonna hit that we're gonna go to this one we're gonna set it as some sort of base64 goodness load timeout wait for 30 seconds oh magic now try this with a little bit of index css low and behold puppeteer executes the css and displays the results let's go let's go now all you gotta do is set that content to html and boom we got it rendering exacting the content the future me problem right yeah well or we know that we cannot use computer styles to get any elements content especially if it contains variables or counters we can also we also cannot select the copy paste the render text since chromium cannot do that so how do we get the rendered and evaluated text every download let's see ever downloaded oh my goodness ever downloaded the website have you ever downloaded the website as a pdf the evaluated text gets selectable can the puppeteer create a pdf from a website yes it can just when you think something couldn't get any worse you put it into a pdf right really like that's actually how you get end game worse you wouldn't download a website as a pdf would ya yes i would i would just like to state right now i will download a website as a pdf you know we can somehow parse the pdf to get text of course we can a pdf parse absolutely this library lets us parse any given pdf and extract the text do you know that i worked in a previous company web filings which is now known as workiva and during that work we actually made so many commits into the whole pdf ecosystem pdfs are just straight wonky there's no rules there's a thou it is the most ambiguous parsing exercise of all time it is crazy their standard they have set forth it is crazy it's like a bad idea on top of a bad idea on top of a bad idea on top of a very well known and distributed format that's what it is it's worse than printers it is the worst thing ever 30 years of backwards compatibility yeah okay anyways we're not doing any shenanigans with images layouts and whatnot here we only render out plain old html as an unpar string we can copy and paste that there we go people do you hear this htmx right down the path do this bamba bam we're doing a little bit of this then we're gonna go here we're gonna get the page with as a pdf we're gonna render that data look at us go then we're going to resolve that beautiful text let's go and as the last step we adjust all the catch-all route to get the text hell yeah girl look at this this is beautiful we get the little file we get the little content we do a little bit of promise we do this i mean you could have technically you know this is you should have made it async and a weight and you can do all the sweet new css things since you're already doing all these sweet arrow functions come on that should do the trick it's demo time let's put this thing to test calculator using a form a basic hello world is simple enough let's build a css a calculator title calculator method form i hate my life wait what the  going on here who allowed this into css who allowed that into css is this why web3 consortium has 11 110 million levity five million pages of documents because of stupid things like this why would you need why would you want this why would you want and i gotta quit asking why why did we not have this earlier when i was younger doing nothing but raw dog and css and a and ie8 why did i not have this why did i not have this is beautiful you get a form you get the sum you get the content this is beautiful this calculator uses multiple features reacting to get and post doing math displaying the results so what does it actually do well we render the title on the form with two input fields called num1 num2 if the app encounters a post request it displays the result which is calculated by the css counter the css counter is first set to num1 and later on increased by num2 yielding the sum of two numbers hence basic addition calculator does it work it does simple two-page app with navigation let's abstract away some of the header and footer into global css file of course oh this is standard so we got the root we got a navigation level we got this we got a little footer copy copy 2022 input global look at that look at this this is this is pretty much php at this point works like a charm beautiful this is just absolutely beautiful absolutely i'd even by the way i don't even know like dash dash footer is a thing i didn't know that this is some sort of thing i don't even know about this stuff at all works like a charm fantastic phew what do i edit so since this apparently sparked some confusion let me explain why i used mainly js for this product even though it says css in the title every programming language that's executed runs through an interpreted interpreter or compiled written in some other language node.js for example was originally written in cc plus it still is actually the css server i've built here would be equivalent i use js to execute the css css is the userland code for the css server just like js is the user land code for node yep absolutely so this is just an interpreter on top of an interpreter that's all simple your interpreters puppeteer that launches a browser that runs everything so you actually have v8 and chrome headless chrome right that's puppeteer it's just headless chrome right so you got v8 launched to run css to get parsed out the results using node which is v8 so it's two v8s double the v8 v16 it makes sense who would be confused by this i don't know who'd be confused by this it's beautiful amazing score of two soviet-like tech this is soviet-like tech this is governmental tech to the max v8 v8 squared v64 it could be v64 it's like a bugatti things fast rust server can serve anything wait till you see my css server serving it hard okay css i love it i think what this really goes to show me it's not that css can be used to create a server it's that css is entirely too complicated that's what i see right here i think that we can all agree that css has jumped the shark sometime a while ago like i think all css really wanted and should have had was flexbox and transitions or grid layout grid layout sometimes is a pain in the ass sometimes grid layout no matter what you do is just wrong it's just always wrong it's just wrong forever sometimes i wonder maybe float was actually better maybe just maybe float truly was the superior layout mechanism float is still the best it gets the job done do you even float css is pronounced cis oh is it i i have got that t-shirt nice yes that's the gen 8 the name is the css edition