hello and welcome to the fourth video in the iron man visual effects tutorial series before i start if you're watching this on the day it goes up which is monday the 14th of december the day after is my birthday and because the world is currently in chaos there's not a lot to do so in the evening i'm going to do a live stream and i'm going to just do some visual effects basically i'm going to be mainly doing some more of the iron man shots that i won't show in these videos so if you're interested in seeing more of the process then that'll be a good look into it so feel free to come along and join in if you're stuck and you want to ask some questions or you just want to come and hang out it's going to be probably about 9 p.m uk time again that will be tomorrow if you're watching this the day it goes up so hope to see you there and let's get on with this video okay so this is the first video where we're not going to be starting in the iron man master project file what i recommend doing when you actually start working on the visual effects shots is have the iron man suit and rig saved separately and then link it into all of your shots the reason it's a good idea to link it into your scene is because if you then decide to change something like the rig or the texture on the suit afterwards you'd have to go into ten different shots and change it for all of them if you have a master file that all of your other shots are referencing then you only have to change that one and it will update across your entire short film so that's what we're going to do here so i'm going to go file link and then find the iron man files and then we're going to link in the collections for the suit the rig when you link stuff in you can't edit it like you can a normal mesh so for example i can't go into edit mode by pressing tab on the object i can't go into pose mode on the rig what you have to do is create a proxy of it which is what you work on and that's what you move around in the viewport so all you have to do is search for make proxy on the rig for example and then meta rig and then what you can do is select the original just press h and hide it now i can select the proxy go into pose mode and i can move all of the parts of the armature how you would expect it to work so the first thing i'm going to do is add a camera into the scene and then jump into the movie clip editor and open my background image sequence hit set scene frames and prefetch which loads it into the ram i picked this shot because it's going to combine two techniques i'm going to do an object track for tracking the helmet onto the head and then for the body and the hand i'm just going to eyeball it by animating with an armature and a mesh of a person so at this point in the film the whole suit is on me apart from the helmet and then in this shot the helmet comes on which means that basically from below my neck i need to replace all of this with the iron man suit we'll get on to that in the second bit of the video for now i'm gonna do an object track of my head and just track backwards to just before i take my glasses off or just after so basically the glasses come off and then some robot arms are going to come in and put the helmet on my head so for an object track what we want to do is go to track and under objects add an object track by pressing the plus button the camera and length settings make sure that they're right i know this was a 50 millimeter lens and i know that my camera sensor is 35.6 millimeters then i'm going to turn on normalize which will account for any changes in lighting not that there probably will be any in this shot anyway and i'm going to change the motion model from perspective to a fine probably slightly overkill for this track but basically the higher up this list you go the more accurate the trackers are so location is the most basic one perspective is the most advanced don't really need perspective cause i'm not twisting my head around or anything so i'm just gonna go for a fine i covered object tracking in the thaw tutorial that i did a few weeks ago so i'm not going to go quite as advanced in this one basically press control and click which will add a tracking point and then i'm just going to track some areas of contrast like my nose ctrl shift t to track backwards and i'm just going to go through and do this about 10 times so we have lots of tracking data okay i think that'll probably do let's see how this goes so i'm going to select all of them i'm going to go to solve turn on keyframe which will let the computer do the guesswork of where all the parallax is press solve object motion and i've got a solve error of 1.51 which is okay not amazing let's see we can filter those down a bit let's see if we can do cleanup error above one okay i deleted the one on the ear and i got 0.88 which is much better so next up what we want to do is go into the 3d viewport i'm going to select the camera add the camera solver constraint and then if i turn on motion tracking in the viewport settings i can see the tracking points i forgot to clear the tracking data before the bit that i want to track so let's go to once the glasses are off and then clear all the tracking data before this by doing that and if i resolve that that might make an improvement on the tracking data there we go 0.24 that's much better now we go to 3d viewport the tracking points should line up a bit better so now what i'm going to do is import a 3d model of a human head i have this model of a man that i use in basically all of my videos these days because it's really handy to have something like this on hand so i'm just going to delete everything except for the head and then bring this over here so it's kind of roughly in the right position and then just scale it up to roughly match the size of my head doesn't have to be exact because we're not going to be doing anything too crazy with it and then i'm going to make sure it's also lining up with the tracking markers so place it about there so it's at the right depth in 3d space then i'm going to add the object solver constraint onto this and then select object and camera press set inverse and it'll ping back to where it should be and now this head should move with the tracking markers which is what we want so the idea with tracking the head is i can now take the mask line it up on the last frame and then basically animate it in reverse to get pulled off by some arms and that's how that effect works so now i'm going to do is unhide the suit i've just made a proxy of the helmet and the visor i'm going to delete everything else and just use these two for this i'm gonna parent the visor to the helmet to be honest i don't really use the rig we've been making in the last few videos for all of the shots for shots like this where for example it's just a helmet i usually just bring in the model of the helmet and either track it on or parent it to a different armature having the whole rig is a bit overkill for something like this because it's just like two objects basically so what i'm going to do is line this up with my head i'm going to remove some of my hair in compositing but that's fine i can do that so the idea is at the end of the shot the helmet should be attached to the head track but then also at some point we want it to detach from the head and be attached to the robotic arm and you can't do that by just parenting it to both objects because you can only parent something to one object at a time otherwise it creates a bit of an infinite loop so the way to get around that is you can use something called a child of constraint which is basically a manual way of parenting it with a constraint but the difference is the child off constraint has an influence slider that you can animate on and off so first of all i'm going to name the head to head track just to make it a bit easier to find i'm going to select the helmet add a child off constraint and then i'm going to set the target to be the head track and then press set inverse so it jumps back and now the helmet follows the track and i can also turn off the influence and then the head moves independently from the helmet as well then once that's done what we want to do is bring in the robot on select the rig make proxy and we can go into pose mode grab it and put it over here and make it a lot bigger okay so the robot arm is in and i've positioned it kind of roughly where it's going to go i find it's always easier to animate this in reverse because now the helmet's on then all we have to do is animate the arms come in and basically take it away so it's attached to the head let's say we want the helmet to be put on about frame 85 so i'm going to put the robot arm into position on frame 85 i'm going to turn on location and rotation keyframing so now whenever i press i it will add a keyframe then i'm going to go forward a little bit more and animate the robot arm to move away again and then hit i and then i'm going to go back and animate the arm to move away and this time the helmet's going to be attached to it in a second probably going to make a little bit of a gap in between so i'm just going to duplicate those keyframes so that there's a couple of frames where it's just holding still so now we look at the keyframes the helmet needs to switch from being parented to the arm on frame 84 to being parented to the head so what we can do is go to frame 84 select the helmet hover over the influence and press i which will add a keyframe so set this to one and then go back one frame and set it to zero and then press i again so now to attach the helmet to the arm i'm going to add an empty first of all which is what we're going to connect it to plain axis scale it up a little bit i'm going to set it kind of roughly in the center of where the claws meet which is probably about here and then with the empty selected i'm going to shift select the rig press ctrl tab to go into pose mode then again i go into the bone layers reveal all of the bones so i can parent it to the right one and i'm going to shift select this bone in the center which is what's controlling this end bit of the claw press ctrl p parent to bone and that means the empty is going to be attached to that section of the rig now we want to attach the helmet to the empty so with the helmet selected add a second child off constraint then set the target to be the empty and then set inverse so it jumps back to where it was and then we're going to do the opposite of the first one so here this is zero so i'm going to keyframe this to be one now one frame later when this one changes to one we want to change the influence on this one to zero so it lets go and now if we played this through you can see the helmet comes in gets attached then the arm moves away and it leaves the helmet attached to the head track obviously you would go in and do some animation on the claw to open and close and in the last one i had the two separate pieces of the helmet come in and then sort of attach together i'm not going to go into all that detail in this just because it's an example but if you wanted to do that you would have basically a second arm over here and i just split the helmet in half down the middle and then had them come in and attach together the second part of this is going to be the manual animation putting the iron man suit on my hand for this section i'm going to import the entire rig and then just go through and basically animate it to line up over the top of my body so if i go to file link and then let's import both of these then select the suit make proxy of the rig hide the original and then let's go into pose mode and make this a lot bigger so it fits onto my body like this then basically all you do is go through and kind of watch how the body is moving and try and sort of animate the suit to do kind of the same thing a little bit of a manual process so i've selected the waist bone and then i can press g and move this around and it will kind of move the whole torso of the body so i'm going to line it up pretty much where i want it to be on the first frame and then hit i and then go through probably about every 10 frames or so and just move the suit where i can see the body is moving if you hold shift when you're moving you can move uh with much more precision which is really handy like this because obviously my body's not moving much so i don't want to be moving it by massive amounts each time the main thing is going to be the arms obviously for this so what i'm going to do is pick a frame like this where the arm is kind of pretty much in position and then we're going to rotate it so it's in position it's probably not going to line up exactly so what i'll do when i'm compositing it is take a freeze frame of the background section here and just put it over the top so i can remove my hand from behind here and it will just be the suit on top so once that's all in place i'm going to select all of the bones that i've moved and then press i to add a keyframe and then sort of go through to another key pose which is probably going to be when the arm moves out of the frame and then just move it out the way and then basically you just go through to all the frames in between and start to refine the animation a bit more and as you can see now if i hit play the animation lines up pretty much exactly with my hand so then what i'd have to do is obviously render this out and with a bit of comp magic to remove my hand underneath this would sit really well into the shot i'd have to do things like adding some shadow onto my neck from the neck of the suit and stuff as well obviously but those are pretty much the two techniques i used to do the animation in the last video it was a combination of doing object tracks on some stuff like the head and then manually animating armatures and stuff for some as well i think this is actually going to be quite a short video which is always good news in the next one we're going to look at doing the rendering and making it look realistic and then we can move on to compositing which will be the final video remember tomorrow is the birthday livestream so if you're around feel free to tune in be really cool to see everyone there thanks for watching look out for next week's video and i'll see you very soon [music] you