i bet most of you forgot about the million dollar pc here and honestly i don't blame you it's kind of been a while since we touched the thing but i swear it's not our fault right before we were gonna do the big demo it broke then it broke again and again it's just been the worst kind of problem to troubleshoot sometimes our full petabyte of nvme ssds gets detected and other times some of them don't but i wouldn't make a video just to tell you it's still broken would i the solution ended up being shockingly simple and something that i bet you've actually seen before but that's in the past this is the now and it is finally time when this video is over we are going to have the largest and fastest storage server on youtube at least until we have to find all the boxes pack it up and send it back to them did i tell you they threw away the boxes sorry what oh my god they're not behind me how are we going to deal with that how are we going to segue to our sponsor d skill g skills trident z5 neo ddr5 memory is built for amd ryzen 7000 series processors and one click memory overclocking learn more at the link down below [music] the culprit was this guy but not this guy entirely four of the drives specifically out of the 12 had this erratic behavior where we would fire up the whole system and they wouldn't be there then we replug the cables and they'd come back and we could benchmark it and test it and validate it and then and then they would be gone we tried everything from moving those drives to different bays to different servers even unplugging and replugging the cables and it just kept freaking happening and in the end it was one of the most basic troubleshooting steps in the book have you tried unplugging it and plugging it back in but not the drive not the back plane or the cables the cpu because when it's hard to wrap your brain around is that these are nvme or pci express drives and through the connector on the back through the back plane through the motherboard to the cpu socket they actually connect directly all the way back to your processor which means that on loosely seated cpu could actually cause a broken link in that chain and here's the thing after the servers have been running for a few minutes that's just enough thermal expansion for that cpu pin that's just not quite touching bam now it's touching boom intermittent problem of course with the system already on it's not going to pick those drives up again so when we were rebooting it after reseeding the cables they'd show up again it makes perfect sense now but oh my god trying to figure this out you got to think outside of the box and also deep inside the box okay you got it you got it everybody's got it oh this is not screwed on jake what is not uh this top cover oh whatever where are we working on this are we in there oh sure you have a screwdriver right i have a highly erect server that's for sure yes i have my high quality ratcheting magnetic screwdriver lttstore.com now if we were smart folks we might have looked at what drives they were and traced it back to what cpu it was yeah that's not a cpu but you know what i was trying to say is we're just going to reseat both the cpus damn it sure i don't have a screwdriver yet i went and i put a phillips bit so you're just gonna have to do this all yourself that's fine crap i don't have a torque set you know what sometimes hex works oh my god don't do that what don't do that that's awful you're gonna strip this and then we're gonna strip it you're gonna make this a very long video i'm not gonna strip it you could go grab another one you can make yourself useful i could the funny thing oh god oh my gosh why did you even take it out just you don't no don't clean the thermal oh my god really yeah receded baby oh we should re-goop it no all right thermal paste is expensive in this economy right i mean left correct left correct yes no uh no i was never much good at math why are these so finicky damn it beautiful watch the server not boot now i know right that is a very real possibility with amd's threadripper and epic cpus because they're so large it is pretty easy to accidentally install them a little bit cockeyed which can cause these sorts of issues whether it's pci express devices having intermittent problems or ram it's like a boot sequence this is the ipmi for those of you who haven't seen the previous parts of these series or who understandably forget them at this point what you're looking at here is a one petabyte of flash storage server which is a non-trivial thing to build because aside from just having enough bays to put that in any ss things in if you want to get anywhere near the full performance of these kyocsia drives you need a ton of compute so inside each of these six one new servers here is 12 15 terabyte drives so that's for a total of 72 drives each of these cd6r enterprise drives is capable of a whopping 5.5 gigabytes a second reads four gigabytes a second writes all of these work together using a file system called weka fs that's designed specifically for nvme drives to achieve unbelievable performance of course in order to measure this performance you actually have to put some kind of load on the system that's where this guy comes in it has two 64 core epic cpus eight of nvidia's a100 gpus those are critical to generate the load and it has a walking 8 200 gigabit per second network connections and of course those run through this 32 port 200 gigabit network switch to each of our servers down below that's a lot of high-speed connectivity but with great performance comes great power consumption and to run this thing full board we needed to plug extension cords into five separate 15 amp 120 volt breakers and a separate 208 volt 30 amp breaker and did i mention they're overclocked i mean i feel like i could tell from all the heat coming off of it it is flipping warm back here it's very uncomfortable to stand here another thing we ran into last time just to get the array started these servers were so out of sync just from shipping like their time their time on the servers was so out of state the real time clock you know it could be five ten seconds off whatever that the array would not start and the easiest way to get them to sync up again is ntp network time protocol and of course without networking this wasn't set up to actually connect to the internet all of these have static ips that are assigned so in our router i had to create a vlan that has the same subnet information and routed from the server room all the way over here to here and plug it into the switch had to go in the switch and tell it oh 10 gig is fine it doesn't have to be 200 gig and then they turned on no problem but i want to access the ipmi so we can see the power consumption sure so we've got to plug this bad boy into all the ipmi ports really quick oh okay so we need some patch cables the patch cables are right in the front let's do it oh that's wild yeah the management port for this one is actually on the front oh man it's so much nicer in here i want to see all 72 drives is what i want to see you might be asking for a lot no no bare minimum when those four drives are missing the array just rebuild oh god just give a second shot oh sick it's working okay the cool thing though when those four drives are missing the array like rebuilt itself like it was nothing it takes like five minutes because they're so fast fast yeah but we want the capacity a petabyte a flash okay i i hate to burst your bubble for some reason they only configured it with a 500 terabyte like drive only 500 i think i think we can expand it later but for the purposes of the first demo i think let's just leave it i don't want to break it i'm sshing into that that node oh look at that how many is that one two three four five six seven eight good that's the correct number that's a lot of gpus a lot of freaking gps is there nvidia each of these is like oh look at that 400 watts 3 200 watts of just a gpu we're not connecting to these things over anything like smb because that would be way too slow we're like directly connecting with the weka interface yeah and we're going to be using gpu direct storage which is super cool a little bit more about that later now this visualization is super cool the green things i'm looking at i guess are dry and then the gray things are coarse or no the gray things are drives the green things are coarse that makes way more sense actually yeah yeah and then blue is our network interfaces that is a pretty good way to visualize it oh yeah you see this look it's they're pinning cores to specific drive slots it looks like there's some special sauce going on here there's some manual ass shizz that went on in the configuration of the system seriously though a lot of tuning because like i said before making a one petabyte flash server easy making one that performs near even actually we're still not going to be hitting the peak you'll remember when we did the honey badger server we got like 100 gigs a second yeah that was directly writing to individual drives there's no file system no no raid parity networking nothing was going on yeah this is a usable file system across six servers all right you ready to see some big numbers yes this one's not as exciting as you'd expect you have to you run it and then it shows you it like gives you a file with the numbers that's not that fast it's not very fast let's give it a second okay it's faster you said this was going to be cool it's trying different sizes this is probably like 4k right now the script is starting with gds or gpu direct storage it sounds very complicated and realistically in practice setting it up was probably very complicated for somebody but the main difference is rather than taking the data from those nvme drives putting them into the cpu's memory yeah and then into the gpu's memory we're skipping that middle step it goes right from nvme to the gpu's memory there we go 15 gigs was it cpu first then no it's doing gds but like i said it's doing different block sizes you ready to see some big numbers okay so so this is gds it says gpu direct storage only read tests 106 gibby bytes per second so that's like 114 gigabytes per second file system blu-rays per second like like full quality big boy the whole thing per second holy and again we've seen numbers like this before but not with a file system loaded on it no we could take that oh you know we could actually use this you want to like smb for a second here i mean well we don't have a client that's anywhere near fast enough which i guess is a perfect opportunity for us to talk about what this would be for want to show us that visualization demo humanities desire to look beyond the stars is nothing new it's not and one of the major stepping stones in the space travel is finding a way to transport people in all seriousness though sending people to another planet is an incredibly complex challenge but one that modern computing can help us with and one of the current proposed plans from nasa involves sending a six-person manned craft all the way to mars after the 10-month journey the crew would transfer into a landing pod that is 16 meters in diameter so roughly the size of a two-story house due to the sheer size of the lander as well as the thin atmosphere on mars it's not possible to use a parachute to slow down like they have on past landings like the perseverance rover so instead nasa wants to use retro propulsion otherwise known as creating thrust in the opposite direction to slow the lander down from 12 000 miles an hour to you know the ground in less than seven minutes simulating this landing is a very important part of the research and development for the project and with the power of the summit supercomputers 27 000 nvidia gpus over the course of a week they were able to build a 100 plus terabyte model of the landing that is over one billion points each with seven numerical values density vorticity pressure that sort of thing and i guess we have nasa security clearance now because we have that exact model loaded up on the million dollar server and here it is and jake's got it running right behind me now in the past engineers would actually take this data model and render it out frame by frame into a video still super cool and very useful but if you want to tweak a parameter and see how it affects the model guess what you're waiting hours for a new render with new technology like super fast nvme storage nvme speed file systems like wek fs and the power of gpu direct well now we can have the graphics cards render the data directly from the storage bypassing the cpu allowing us to do this and basically real real time manipulation that is i mean it's a it's a bit cinematic but we're getting we're getting like five fps five fps that's i mean a lot better hold on hold on hold on five fps each of these frames is over 14 gigabytes of data yeah that's before it becomes a frame the gpus have to process that so each second we're streaming between 70 and 90 gigabytes from that storage directly to those gpus so that's one to two blu-rays each second can you like move it yeah i can here let's yeah move it play it play it trust us this is really neat i wish there was a way for me to like translate how much is happening in the background i guess we can look at how much power it's drawing this is what you guys are going to want to see how many amps are going through our pdu here and that's just for this top server yeah why does it need 17 amps of tunes about 4 000 watts right now what the hell oh hey this is interesting look so one of our gpus you can see it's refreshing every two seconds yeah they're kind of drawing a little more power now but still not anywhere near 400 watts yeah that's interesting i guess this is just more storage dependent than it is actual gpu rendering dependent which makes sense that's they're pretty op gpus sort of why they sent this demo it's about the storage like moving it around a bit oh yeah they got a little spikier you can see the utilization on the gpus is like 50 60 probably a lot of this is more the memory usage unless the actual core itself you can imagine the type of workflow improvement you would have from being able to just mess around with this in real time rather than like rendering it waiting three days for it to finish rendering because you're at a university and you got a small budget works just like this segway to our sponsor vessey do you hate wet socks as much as i do fessy footwear makes lightweight breathable and most importantly water resistant shoes so no more squelchy socks their dimetex material not only keeps your feet dry but keeps them warm in the winter and cool in the summer how does that work the stretchy design shows that comfort is at the forefront at times making you forget you're wearing shoes vessey makes cruelty free products right down to the glue their shoes are 100 vegan whether it's a rainy city or a rocky trail the herringbone tread design is there to help stop you from slipping around your feet deserve a little treat so go ahead and click the link below and use promo code linus tech tips to save 25 bucks on your first pair today if you guys enjoyed this video maybe check out the previous parts and uh i don't know maybe subscribe to float plane maybe we'll shoot an exclusive of packing them up no i don't think we'll do that i want i like i gotta wonder if there's anything else we could do i thought about video editing i would love to use these for the machine vision uh cat squirter turret projects