hey today i have a very special video fred from astro will be joining us showing us the new astro db it actually released today the day this video is released it's an incredible database he did it live on our twitch stream just last week uh you have to check it out because we get in this video we actually exceed a million requests in just a few minutes people are just hammering it 5,000 concurrent requests are going on at any one moment absolutely amazing and he launches it live in production and five six minutes so you just got to check this out this is the first time i've demoed any of this and i'm yeah primen you for everyone else you reached out we were chatting we've been chatting about this launch for a while and then with the planet scale news it was just like is this the moment and we're technically launching this all next week but here's how this is g to work and i need everyone's cooperation on this if it's going to work which is that like this is essentially like if you're outside the stream right now this is not happening this is i don't want to see any clips or tweets like this is gonna be a cool little secret thing we do here and we're all going to share this moment together it's gonna be lovely really cool demo and then we're all going to leave and we're going to pretend never happened like this will just be this cool little special thing if you're in the stream you get the cool stuff you're out of the stream you're not getting anything we're gonna pretend this is a stream that never happened all right that's that's my i will also just take off all the clips for you i will manually make sure and hold people exclusive yeah because this is you know listen it's you're going to see some of this stuff is already if you know where to look it's there but like this is all about the launch right the launch i that's going to be my other request is that i would love as much you know we're still a small player in the space it's our first time getting into databases like any help and hype yall can provide next week when we go to launch this thing i hope you love the demo but would love any help and support y'all have so i don't know this is where it's like what do you throw in the chat for love like whatever love you can give me um and give as next week i'd appreciate so excited to show i want to throw one thing one thing out there uh that's important this is in no way shape or form sponsored of any kind this is because i like astro i think astro is super cool tech this is blackmail i actually have been blackmailing premen for years he also has photos that i don't want to talk about if that's possible as part of our agreement all right yeah no i i love this community you almost made a dick joke by the way you were this close i want to let you know thinking about it filters up baby filters up the brand filters up all right um yeah i'm really excited done with this um as prim mentioned we're we're we're launching a database and this is something we've been working on for essentially we've talking about it for years and then like really working on it over the last year so a lot of thought and care and love has gone into this like what does it mean to launch a database that's so directly integrated into a framework is is i think something no one's really done and i'd argue maybe the last time this happened was wordpress being like we got a database we got a php stack it's all bundled together yeah take a zoom in by the way just so you know the text is really small so it's always good to zoom in how's that that's literally as big as the font goes and i'll do the same and uh does that work though is that all right i assume if you're on mobile it's probably a little difficult the rest of you probably can do maybe we'll be out here in a second i'll be can you zoom it in flip flip flip all right look at that pnpm as share some the cool stuff likey fusion love that you got a better name suggestion otherwise we're going flaky fusion the flaky fusion is delicious that sounds great all right we'll do an empty project write some javascript or typescript strict install dependencies all right this is gonna run look at that you go yeah there's a bunch of stuff here that we're going to get through and um i'll jump into vs code in a second but one of the the most exciting things about this is that it's essentially all wrapped into the asro experience and then when you go to host a database like it just is kind of this like oneclick experience of like the hosted database is there ready for you to go so as an open source framework can we build something that feels local and is right there with you and then essentially is like totally invisible to you that we can go and host it for you when you go to build your site that is yeah we mentioned the the text stack um which i'm not going to like really answer here but if you've been following our tweets and turo tweets um you can probably see you'll see in here a little bit like we have a ton of love for lip sequel and if you're not familiar with it it's yeah actually pron you're going to brazil right aren't you yeah are you literally flying to brazil for lib sequel yes i am i will be i'm in fact i'm even playing a soccer game of various br brazilian influencers will be joining me in an advanced soccer game where i will show things games i think you got to call it football i think you're going to be um no i refuse i freedom units i'm going to drink i'm going to drink k's light and i'm going to go down there and i'm going to kick their asses and i'm going to land a bicycle kick i'm going to bicycle kick a goal and that's just that and people are going to just they're going to lose they're going to lose it i'm going to play wing i'm going to come in hot and i literally do not play soccer and i will do it and then they will cry in freedom units it'll be fantastic that's the most american thing by the way i'm going to come into your country and tell you how it's done and then kick your your game i'm gna call i'm gonna call soccer um by the way i i don't think i mentioned this we're gon have like an interactive component so i i hope you're gonna like what i did here because we're chatting it's like throwing throwing a text input or like an image upload on the stream is dangerous but i think i found a cool solution here yeah never do an image upload definitely that would be a dick joke immediately um this is all you have to run this is astro ad db so if you ever used astro we have this astro ad command it helps you add things like tailwind and react and now we have a database so you run this it's going to walk you through basically setting it up installing some dependencies bada bing bada boom it's gonna update my config bada bing bada boom and let's start the depth server to verify this is all hunky dory nice all right one sec let me actually get so you can see come on all right look at that beautiful times new roman we got it going um here's the two things that this opens for so once you add that tob you get this really cool and i'll kind of come down here to show it dbc config and you get oh hold on by the way chat was wondering if you could like warn him like maybe a trigger warning before you hit him with that light screen like that oh okay most of them live in their mom's basement and that is like entirely too bright i got you all right if you've ever seen ast before we have this uh component syntax so literally i can just do this throw a little style in here let's just do html body damn doesn't even use tailwind clearly a [laughter] rookie oh nice nice cr look at that oh yeah dark mode i'll charge you all5 for that right we're charging for dark mode now let's go all right two things i'm going to put in here real quick so we got conf .ts and c.s um as a part of this we've basically brought the whole development of a database all the way from like schema definition om hosting schema management it's all here in one nice little wrapper so what we actually give to you is literally import let's just say from astro db is this going to work all right look at that what could this little colon oh i like that little colon just like uh what's it called just like like node i like that feels good and we're going to do an export default judging this is like pa programming except for i just insults you the entire time yeah it's like can i can i handle the pressure can you code under pressure all right just putting in some nice little uh nice little b plate here okay um this is where we're actually going to find our database table and our schema and all that good stuff what i'm going to build with y'all and we're going to see if this works a little bit collaborative little bit safe um if yall how many people were here for our place we're going to build a our place clone essentially interactive y'all can write stuff to the to the screen and have it show up but within a very creative little kind of canvas space so we're going to literally create a grid here okay grid cell define table it really likes to pull from there for some reason um and we're going to give this a couple columns let's give it exposition g be column. number why and watching someone code in vs code i forgot how many things are just all over the screen my add is going nuts it's especially zoomed in right now by the way is that a size right now that it's kind of yeah i i i that's how zooming it i'm more zoomed in when i stream and code nice all right cool and uh we're just gonna quickly turn this into a spot so i use react i'm a react casual so i'm literally just going to create a component here called app sorry my head's in the way sorry you can't see react happening on the screen you covering it up sensoring it yeah all right we're getting all the boil fit out of the way here we go out come on there we go self closing tags naughty naughty of course it doesn't want to actually import it why not it should all be working good i'll just put the important here usually it's pretty good about that yeah language servers can be a little tricky sometimes are you still using neov yeah yeah of course you trying to insult me now okay this is my job i'm the one sorry sorry sorry all right and one last thing um we're gonna actually add react support because we have this awesome nifty astro add react there we go it is i mean again like i said if i were to use javascript i i i definitely see the appeal to astro i think this is all very convenient and looks like you can whip something up pretty dang quick i mean we're we're flying through a ton of astro concepts here but yeah like use your favorite framework you could use felt you could use um anything you want here um you're not on the right one you closed it what do you mean i can tell you the pace didn't have dark mode yeah where's that dark mode at yeah something's gone wrong something's gone wrong let me just pull this out make sure i didn't break anything put it back in there we go yeah no idea what happened there um all right so so far we've just been showing some cool kind of you know astroy kind of things we're going to make this interactive a big part of astro is that things are only interactive if you make them so we're zero js by default and we're gonna make this interactive we're gonna build a spa basically here's your spa now it's all running in the client nice nice um and here's where i'm going to pull in a couple things from demo i already built so i don't want to have to literally build like yeah yeah please it makes it a lot it makes a lot for viewers when it just comes to demos yeah yeah so i'm jumping a bunch of components in here and i'm gna dump a bunch of actually literally the app here i'm still hiding you know what i mean yeah all right i'm just get dump a bunch of stuff here by the way i can't believe you were able to hack dark mode into the browser that quickly like how many dollars a month do i have i'm leaving on the table i need for that style i know all right cool i got a couple things here all right so let's see maybe make this a little bit smaller all right we got a couple interesting things going on here i have no idea what's not found it's not loving this all right there's no api duh okay okay last thing we're gonna build here is api and i'll bu an oh i'll you have file based routing right so you have these pages sl api and this becomes literally just sl api and then you kind of throw in all the routes you need right yep exactly um and last thing we're going to do here is actually seed our database so it's all up and running so we actually got our grid cell coming out of here which should be all hooked up so grid cell oh we didn't register it oh very interesting okay so your your your config dots you say what you want and then you can also seed it with seed and then it will just like autop populate yep two different sides of the same coin so define your config over here and actually seed it over here and do whatever you want here so we're going to actually so seed literally all these grid cells um with just the value of white nice nice okay which will be that dirty dark mode um is now going to become okay fine you all in your dark mode we'll do it all right and last but not least i'm just gonna get rid of this app we go all right whoa whoa whoa oh i don't i'm missing a dependency hold on he's still missing depencies we're going to get there don't worry we'll take take out all this difficulty it look so smooth flip take it out make it awesome flip flip can you make it awesome just where's the dp you smelly [laughter] nerds all right here we go uh right one more thing i'm gonna add verel pmn where go gonna add versell we're putting a versel in the dang database wow okay i didn't realize you just add it like that yeah that's one of my favorite features of astroid it's just going to basically set up all that you can see it's kind of adding this config as we go it's saying i want to actually output a server okay okay it's good to go all right so last try this should all be nice and rosy except for i think we are missing a little bit of styling here to make this all line up let bring a little bit of margin padding here yeah nothing the man just just just installed verell all right cool so as i now you can see this persisting i don't know if you can see the refresh yeah i can see you're refreshing i can see the little the text up there refreshing okay this is cool this is cool so now i have this and i can color i can do all this cool stuff this is all persisting to a database this is all a database that's built in if i killed my internet connection right now i'd lose you it would be very sad um but this whole database would keep running because we're running it locally you can even see there's a little bit of a hidden sneaky little content. db here nice little squeal little little squeal light little squeal little lip sequel so it's literally running all this locally out of your project so you get on airplane this will all work um it's a really cool part of this because it's you know essentially there's no docker to set up there's none of that yeah yeah and if you have like a test case you can literally just toss a test you could just copy a file into location boom you got a test database setup right there yeah all the complexity of like i want every pr to have its own database i want my test runers to spin up in new all that becomes super super simple with this architecture it's probably the thing i'm most excited about here um love it and just all built into the framework so as soon as you're ready to deploy i'm not going to show you the full platform we built i'm going to save a little bit of the suspense yeah yeah you got a launch next week let me quickly show you what's going to happen here which is that we're going to basically do pmpm astro link so we're actually gon to link this project um up with a new hosted database so i'm gonna link it with astro studio astro studio is the portal where you can basically spin this all up this is not an existing project it's a new project and we're just going to call it flaky fusion um there's gonna be more on launch day but will you have north america will you have north coast like montana um oh like middle america yeah we kind of feel left out because i really don't like either west or east coast i'd like to have like every state get how about that yeah okay i like it that way i could pick my favorite state all right i'm gonna be in a different browser window just one second um to get a token which i don't want any of yall to see yeah tr as as as a who's leaked several turo tokens imagine and database tokens or whatever tokens you are i've leaked i've leaked every imaginable service from from cloud flare too i can't even think of other database i've leaked i twitch tokens twitch is my number one token i've leaked i've leaked my oo token 9,000 times how often is your uh twitch token coming up like is that something that i'm so not a streamer like is that something that like you're like oh let me just open up this uh when i was doing stuff i was doing vim with me for a while and i was uh controlling chat back through an api and this was before i discovered cloak cloak is super awesome so if i open up an n file it will automatically blur out any values word that's cool i assume you're intentionally darked out for now right maybe yeah you don't have any video yeah oh no that's all oh you know what i wonder if obs is smart enough yeah did you turn on did you turn on uh you must have dropped a desktop is my guess maybe okay give me one second here i'm yeah spinning up spinning up my envir it's actually a good thing because i would just be sharing secrets otherwise yeah get everything ready and then we can come back in we can look at it would you look at it flip can you take this part flip flip take this part out double it keep it in double it i want you to play it twice flip make him feel it um for everyone else yeah i'm literally just setting environment secrets in the um versel so pretty boring stuff but not for your eyes that's okay you can do that i trust you give us a second flip zoom in flip zoom in on me so you're saying i don't have any what's going on here yeah you have no you have no screen my guess is if you look at your virtual camera did you stop it no did you did did your desktop that did exist and you took everything off of it did it like no i didn't do anything stop yeah i was about to say you don't have a camera either oh hey fred you're back yeah know my uh virtual camera went away what's going on here all right one sec be right oh the joys of internet don't you enjoy yourself a nice interneting experience rip i know so his virtual camera went away which means he probably had the the closed down o obs reopened obs start your virtual camera then go to ping skill issues and he's not even using linux he's using mac how it's windows clearly superior in this category there we go we're so back we're so back all right so we're just gonna run our build here and we should be getting um some good stuff just checking what is going on no errors no warnings one hint the hint being skill issue detected um build complete all right cool so i'm just cle going to rerun this build and we should be good to go i'm gonna put it up to prod oh nice production url can you copy that and throw that in twitch chat hell yeah all right all right i'm gonna i'm gonna actually uh i'm gonna make you smaller here for a second because now i want to whoopsies i made something else smaller oh my goodness oh my goodness i'm struggling all of a sudden um shout out to versel who makes this super easy there we go uh twitch chat where are you did you spam it it didn't give me one sec actually don't have your stream up but i'm about to you so so so i'm not worth it to watch i'll pull this up on the stream itself too all right there we go all right so i am now clicking anyone else want to click on this bad boy how does this work all right it's probably let's see is it actually resisting anything right so there's actually nothing in the database right we seated locally but we haven't actually seated our production database so i'm l just going to rerun this pmpm astro and i'm going to call the execute command so i can actually execute that um db seed file in production now so taking the exact same feed file but um dp that's it okay nice oh very cool oh one thing before i do that i actually need to push my schema up so we have this all built into schema management we're actually literally going to push our config up it's going to check that this new project's out of date with our local project automatic really really seamless and now we can execute i i hate database scheming so this is fantastic i hate my yeah like migration migration are the biggest pain in the ass but there's such a pain in the ass i know can i use astro just for oh it's going oh my going to it's so live quickly everybody you know you know the play you got well here's what's happening so there's one one one thing here that yeah you all are going crazy i love this we don't have batch transactions yet or at least i didn't write them in my seed file you might have noticed my lazy it's literally running insert insert insert insert from my local machine up to the cloud so i feel like i'm loading like a jpeg right now from like old school um like wired and i'm sure you're getting like literally thousands upon thousands of requests right now that's good it can take it it's actually like there's a huge thing that i i know the lib sql team is trying to push more is like people think sqlite equals small scale but like we've tested this and it's like it can tackle this type of scale it's obviously g to take a little while for this to fill out and you actually see real images to start to come together but this is like not out of the scope of i don't know maybe yall are really spamming it but this is not out of scope of what we can do unless it just which case i will eat my words yeah i think the x the x something must be borked because i can't actually get it on i mean you are doing a live demo like i have this oh you can't see my screen right now here i'll throw i'll throw my screen really quickly i have i colored all of this but it doesn't show up on you a little bger too see look at me i'm coloring yeah that's why it's it's filling in these the squares oh it is filling in the square slowly i wonder how many requests can you measure how many requests are going on right now do you have any idea this is cool though you made an interactive app and you got potentially who knows how many thousand little clickies coming on oh he's talking but i can't hear him you must have muted yourself or you're really bad at [music] microphone that i pasted in without anyone being able to see hey um so there's two endpoints that we just have the click endpoint i added some basically cach in here to make sure people are getting rate limited appropriately but at the end of the day all that we're doing right here is um where' it go this is the kind of like the money shot of it this is the db built into astro updating set where these things are equaling um set the value which is the color this all came from ast so there's no like let me go set up my like secrets and make sure that i'm pulling from the right db config and is the schema set up properly and am i running the generation this all just came out of you see up here astro db this astro db is like the magic that glues it all together it's available anywhere you want to grab your database your schema types and you can just just literally call this wherever you need it so here we're updating the grid cells and we're running it and then uh returning it nice nice okay so is this all somehow going to your machine because you said it was like the database local to your machine what's what's happening here what what are we looking at so the breakdown is in local development this is all local and when you go to build your site it's still going to be local unless you pass the d- remote flag and then you're now connected to this hosted database so if you opt into a hosted database you're going to get an actual in thecloud um that region that i picked out the us west for for this project that's where this database lives and where it's running nice yes we're seeing we're seeing it fill up here and then on the refresh it's just there's real time in quotes where it's literally just hitting this database um it's just selecting all the grid cells that exist so if you can see this is why it's taking a while to kind of populate because click is just updating refreshing is fetching it's that seed function that's actually inserting them so that you can update them so it's kind of we're filling in the world as we go here oh this is fantastic i'm surprised that there's not you know i think having it so that it can't get too big is probably a good move because you know the immediate dickpick i'm surprised has not happened yet yeah this is a surprisingly uh well behaved uh kind of like abstract arty kind of thing it's probably just too small for the number of people here which is actually pretty awesome trust me it has it has if it's there it's there in principle okay and so you're only allowing it to update every so often right is that kind of what it is is that you're only letting it go through yeah so much if we were really building like in a real art place there would be real time there would be like an actual engine here this is like the most hacky version of this imaginable but what if you only had a database primitive is essentially the uh what would this look like and within a couple of seconds you can spin up the update you spin up the fetch seat it and you have this r place thing and then i probably spent like maybe 30 minutes on the stying of all this last night maybe an hour if i'm being honest um but yeah the simplicity of spinning this up i really wanted something interactive here but one of the biggest use cases for this is like because we're a content focused uh framework at the end of the day we like marketing sites and blogs and there's this idea of like your content can live anywhere but what if you had the ability to just like kind of like almost like sugar on top this like data like what if you wanted a comment system for your blog or a view counter for your blog post like all these things like yeah i don't really want to put that in my cms or i like having local markdown i don't really want to put that i want something dynamic but i don't want to like move my whole thing over there this is a really cool like you don't have to jump fully in and like all right we're moving all of our data to astro db you can kind of like pepper it in and see if you like it it can kind of highlight and kind of extend your content versus being this like must have everything in it otherwise it doesn't work story i like it i like it got christmas vi going on i know well i think that's because um if you if you don't know the background is green and if they can get the back background to go away i think i could have a special surprise for every i have a very special surprise for anybody that decides to go all green on you're in chat there you go look it's going it's going we're almost there um anyways that's pretty awesome look at that that's live we made that happen live with like literally like 10 lines of of javascript on the actual like db insert the the seed yeah it's still going like this local seed thing is gonna definitely be improved by the time we there you're almost there chat i know almost every oh you screwed it up look at that look at how good that is absolutely fantastic well hey thanks for doing this this was awesome thanks for letting me come on um yeah obviously this is a thing that we're launching next week again this is not like this is my first time showing this anywhere you can see we're throwing it all together but yeah thanks for having me come on and show this it's a i'll wait to let this get out until that date which what what day are you guys launching have you have you mentioned tuesday dates next tuesday exciting that's yeah tuesday morning um yeah it's going to be wild and just with everything around pl scale thing just the fact that we have like not just a free plan that we're like oh yeah it could be nice but like this essential to like our whole thing is like you're an asttr user we want you to have a database that doesn't work if it's like a $40 a month uh that just makes no sense for us so yeah i'm really excited about what this like this is so baked into where we're going and having this to be affordable scalable doesn't break our bank it doesn't break yours like it's it's something i'm really really excit exced about so yeah thanks for letting me come on chat on the hot issue of the day it's yeah i know what are the chances honestly what are the chances that all of this falls so serendipitously that last month you're like hey i should come on and talk about databases and then this month you're like and the fan has been officially covered i can't stress we've been planning this for years like years of conversation now landing at the exact moment it's like a hot topic of free plans and databases so yeah it's a it's wild it literally you literally could not have had better better timing you know we'll see yeah it's it's a crazy not to dunk on what's happening i'm just saying like out of all possible timings you could have where it's just like the biggest conversation piece is free tier databases yeah yeah um it's wild if anyone i'll throw one more link in the chat just for people who are um oh it's so here oh my god no no one look at my security settings um if you all could go you know one of the easiest ways you can support the project is to um start the repo so if haven't already it's like such a simple way and it's astro asro with astro asro yeah i'll throw it in your chat if i can find yeah throw throw it in the chat we can we can we can do that if you haven't this is like the like lightest weight way to support our project yeah stars are free stars are free and as you can see people love stars i love stars you're a star i'm a star we're all stars we're not all stars okay we're made from stars you ever think about that it's a good point think about that you know i haven't started yet but here's some of my stardust for you oh i started and it went up by it went up by a 100 oh man look at it go we're flying do you think we're going to get up to should i pull it up oh yeah actually don't don't don't incentivize uh chad starring it it'll start actually going downwards i've seen this happen the bs i've seen this happen where it actually works it they're they're very counterintuitive never damn never give chat a go because they will do the opposite goal every time you flatter me if you think that enough people in your community have start this rep out maybe i'm selling myself short but yeah i'm sure they have uh with all my positive talk about javascript oh thank you yeah well thank you for giving me the platform yeah we're a small player in the space and this is a new thing for us so just excited to share the share the message yeah he thank you very much fred have a have a swell day and hopefully uh next tuesday goes amazing fingers crossed everyone try and break this see if you can break it i dare you oh i don't know if you i don't know if you want to say i'd rather this week than next week so yeah that's my okay feel free okay go for it everybody go get them chat all right uh check back in an hour and see what happened to your project right on thanks for having me bye bye