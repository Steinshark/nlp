it's not fair i told you my wi-fi was fixed it worked perfectly for a week then right after we uploaded this video it made a big liar out of me i hate it when that happens intermittent problems are the worst thankfully now i have this that's right three cheap wi-fi adapters and a usb hub okay admittedly it's not that impressive but the software behind it is through the power of spectrum analysis and packet capture we're going to be digging deeper than ever into what causes wi-fi to randomly lose performance or drop out and even though it wasn't our intention we're going to be exposing some of the bs marketing that sony uses to sell their wireless home audio systems bs marketing that i unknowingly spread when i did a sponsored video on the very product that has been causing me all this trouble just like i'm about to spread this segue to our sponsor build redux build redux takes the challenge and the hassle out of building your own pc with configuration options support guides to agid you and competitive pricing versus building a pc yourself why not kick your feed up and let build redux handle it for you head to build redux [music] first up i need to show you guys how i got bamboozled into thinking that i had the solution last time every wi-fi card is constantly looking for wireless networks it can do this passively just listening for different networks to announce their presence or it can do it actively by sending out a probe request and then looking at the replies that come back surprisingly the active method is actually a lot more power efficient so that's what most devices do by default that means that when i was going around pointing my wispy antenna at anything and everything in the house the wi-fi card in my laptop was happily probing away in the background blasting out enough power that even my very hightech directional antenna was able to pick up the signal the only thing that is hard to explain at this point is why sometimes it didn't seem to pick anything up cuz that's what led us to believe that the source of the interference could be malfunctioning light switches i mean i should have dismissed this theory as quickly as i dismissed the 2.4 ghz microwave only a grossly malfunctioning 900 mhz device should be capable of emitting any kind of 5 ghz interference like so defective that it wouldn't even pass compliance testing but in fairness to me with everything i've been through with these switches nothing would surprise me at this point that is correct it's still my bad though i should have dug deeper and a good place to start digging would be the hidden wireless ssid that we determined is associated with the base unit here of sony's ht9 wireless audio system last time around we took sony at their word when they claimed that they were using wireless sound specification 4.0 to deliver wireless audio to the speakers distributed around family room but looking back on it if both the freebie wi-fi analyzer on my phone and the paid channelizer software on my laptop saw a hidden wi-fi network then maybe wireless audio specification 4.0 is just wifi to check our theory we'll be using metek channelizer again with the wispy adapter and we'll be looking for that familiar shape that we know is the sony base unit it looks like it's around channels 44 and 48 today although that does tend to vary from day to day which is part of the reason for my problems we can see though there's a hardware address associated with this so let's remember that as we peel back the next layer of this problematic onion with a new piece of software from metageek called tonic wait that's wire shark tonic tonic works by capturing spectrum information also from the wispy but but at the same time by capturing all of the wireless network traffic that is bouncing around in the house using offthe shelf usb wi-fi adapters following metag geek's recommendation we went with three of these edimax ew 7833 uac units that retail for about $50 each each of these has three antennas and supports 3x3 spatial streams which means that they're able to take advantage of multipath transmission to significantly improve through put and more importantly it means that it's extremely unlikely that they're going to miss anything when we start capturing traffic just for transparency we're probably going to do a little bit of movie magic here and show you guys a mixture of live and pre captured data we got a ton of audio dropouts and other artifacts when we were testing this out a few days ago but i think it's a law of the universe that the second the camera starts rolling your product demonstration will fail all right the first thing that we're going to do then is limmit our view to the 5 ghz spectrum then we're going to click on show hidden and sure enough there's a hidden network with the mac address that we noticed in channelizer that is our base unit that i hid on top of the other base unit get it haaha that's a subwoofer sorry anywh who when we click on that network we get a list of access points which is just one because even though i did gesture to one of my ruckus aps they are not the problem it is entirely this it's on channel 44 and it has five clients which makes sense because we've got four wireless speakers around the room and then also the subwoofer when we click on the access point we get some more detail about it and we get some graphs and charts that summarize the traffic that's being transmitted by it if it can show us all this information about the ap's radio that means according to our contact at metageek there is pretty much no doubt that sony's wireless sound specification it's just a typical wi-fi 4 network rather than some special technology they've invented though i mean that does kind of make sense since getting some new wireless technology certified for 5 ghz globally would be a monumental task but then from my point of view they should just say it's wi-fi that would have made troubleshooting this a lot easier from the start looking at the airtime distribution now it's interesting that basically all the traffic sent out by this base unit is broadcast rather than being sent to a particular client what that means then is that this base unit is just blasting wi-fi signals out into the air for any device that's listening without any regard for whether the signal actually gets to all of the speakers or some of the speakers or the speakers and something else and then it's just up to each speaker to take that data and sort it out into which channel it's supposed to play i suppose every every speaker just gets all the data for every channel which might explain some of why they are not able to make efficient use of the spectrum i mean i can kind of see why they took this approach since they need to keep latency low enough to keep audio sync to the picture but clearly it's not working a little weird but not super weird yet yet when we switch over to the client list here we're going to see a pretty high percentage of retransmitted packets remember these are going from these guys back to the base station this retry column here means that when the speakers are sending some kind of data back to the base unit maybe it's timing information or related to the room correction i don't know whatever it is it has to resend that data quite often because the base unit isn't receiving it on the first attempt normally you would want to see less than about 10% retransmission on your wireless network and less than 2% if you're dealing with something like voiceover ip anything higher and you're going to start to notice an impact on performance in this case though i don't think that's the source of our problems because if we click through and look at the number of packets being sent by the speakers it is such a tiny amount of traffic that even if all four of them had to reattempt 100% of the packets they sent we'd only be looking at a few hundred packet spread out over 10 minutes uh i don't think that's the issue so then we've determined that this sony surround sound soundbar is using plain boring old wi-fi and that it is basically just spewing audio data out for the speakers to pick up and turn into sound with very little communication going back from the speakers to the base unit just the occasional acknowledgement and little bits of what tonic classifies as quality of service data that still doesn't tell us what's wrong we're going to have to go even deeper let's take this data and put it into wire shark which is a free network capture and analysis tool that will let us go through each individual frame to try to determine what's happening wireshark uses the exact same data as tonic but it's not quite so user friendly where tonic organizes things into networks and graphs and charts that we can easily explore wi shark is more like standing in front of a fire hose of broad data in the default view we get every bit of traffic from every device on every network that our wireless interfaces can see over the same 10 minutes that we were looking at in tonic i think it might take 10 minutes just to scroll to the bottom of this thing um nobody wants to watch me do that right luckily wi shark has a powerful filter system that we can use to turn the fire hose into well a smaller fire hose we know we're interested in what's happening on channels 44 and 48 so we'll start by narrowing our view down to those okay we're on the right track here it looks like almost all of the transmissions we see here are multicast data coming from the base unit it looks like it's sending out a couple of frames of data every 2 or 3 milliseconds just scroll down a little bit see if there's anything interesting ah right here it switches the channel of the multicast to channel 48 and if we look in the delta column we see that it was 74 milliseconds since the previous transmission that is pretty significant we m mortals don't typically perceive legs shorter than 8 to 12 milliseconds so when we see the deltas of 0 to 3 milliseconds leading up to this switch those would pass us by totally unnoticed 74 milliseconds though that's a lot what's weird though is that there is nothing else happening on these channels at this time so while it's normal for a wireless network to jump around from channel to channel in order to reduce interference if there's nothing else going on why does it switch maybe we'll see something if or when it switches back ah at 39.96 it goes back to 44 with another 76 millisecond leg there's also a huge jump in the frame number here so that means that there's a bunch of other traffic that we're not seeing because of our filter let's turn our filter off for a minute there's a bunch of traffic on other channels at this time but it looks like it's mostly access points talking to other devices and mostly on channels that are at the other end of the spectrum from the sony base unit let's change up our filter again and see if there are any other long delays on our channels let's say anything more than 50 milliseconds wow some of these are more than 100 milliseconds a tenth of a second that is a massive delay which could totally explain the audio drop drop outs that we got when we were testing so now okay we're going to take this and we're going to jump down to a period where we know that the audio had serious problems and what in the world is going on here this thing is changing channels more than once a millisecond and it looks like yeah it's sending out more data more often so it goes from sending two frames on one channel every 2 to 3 milliseconds to four or more packets on two channels as often as every millisecond let's check the whole lower end of the 5 ghz spectrum just in case something else is making it behave no there's nothing like there's bits and pieces of other traffic but it's not much and i'm not seeing anything on 44 or 48 other than the sony gear which means that our ghost hunter episode looking around for the source of the interference was pretty close to to a real episode of ghost hunter meaning we were looking for something that didn't exist and misinterpreting the data we collected the true culprit then is just sony who has no reason to be shifting channels or sending out more frames like this at least not one that's obvious to me or to our friends at metageek unless it's ghosts no i'm just kidding which means that unless sony re-engineers how this thing works i'm going to keep having this problem and so will many other owners of this wireless setup i'm going to have to append both the last video that we did searching for the source as well as the sponsored video that we did on these because obviously i don't want anyone buying them now i want to give a massive shout out to metek though for providing the tools we needed to diagnose this today as well as their software uh we're hoping that our labs team is going to make excellent use of that relationship in the coming months and years the path forward for me then is what i guess just to do what so many you suggested last time around and put an av receiver in here and then find a wife approved way of running wires i guess over to the surrounds i'm going to miss the room correction from these sony's that's for sure like that was the cool thing that sold me on them was a they sound really great and b you can kind of put them anywhere and you get a really convincing surround experience but i mean who knows maybe in the grand scheme of things that sucks too and i'd be better off with some basic distance correction and eq from an avr with some help from the labs team we're going to find the answer to that and while we're at it hopefully we can shed some light on who has the best mainstream room correction cuz darn it want to stop fighting with this i want to do it right this time like i do my segways right like this segway to our sponsor thanks to grammarly for sponsoring this video when it comes to work communication is key even if you don't have a writing job miscommunication can cause confusion with your team leading to delayed projects and that's why we recommend checking out grammarly premium's tone rewrite suggestions feature it will help you by providing suggestions to ensure that your writing comes across clearly and confidently a few people on our business team use grammarly to help keep their writing professional and mistake free to get started all you have to do is install the desktop app log in and start typing i mean the right tone can move any project forward with the help of grammarly so go to grammarly.com lt to sign up for an account and if you'd like to enhance writing and tone upgrade to grammarly premium for 20% off if you guys enjoyed this video why don't you check out the first time we worked with metageek it was a long time ago but it was a really good look at their channelizer software and how it can be used to find non-wifi sources of interference which if you'll recall was what i thought i was looking for