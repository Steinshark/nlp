let's let's do this hello and welcome to another video and this one we're going to be offering a surprising topic which is my recommendation to not okay hold on hold on whoa whoa whoa whoa why am I getting 1080p yet I can't even read these code with Anthony people Anthony writes code on both YouTube and twitch but codes with Anthony on Twitter uh and then also tile on GitHub uh anyways I don't use localhost now specifically I mean localhost the word not localhost the concept and I'm going to show you why today anyway let's jump into it I'm calling Docker this we're actually going called a Windows command prompt because I've actually configured my Linux machine to avoid this problem uh and what we're going to be looking at today is what the name localhost means he is he is the python Guru by the way this guy is this guy knows a lot about python this guy he's a real one he's a real one for sure and in order to do that we're going to be using the socket module and we're going to be using Timmy Daddy get Adder info which looks up a particular name and gives you information about it uh get Andrew info got him uh by the way I love that sometimes there's this direct translation layer from the old Berkeley style sockets into languages right get Adder info love it you're just not passing a struct in how great is that how great is that oh my this is because I owned me two typos there we go okay so what this did is is that whoa are we looking at IPv6 right now everybody knows when it's not DNS it's IPv6 every single time every single time because it looked up the name localhost and it gave us back the response in this case we got two different responses one being an IPv6 response which is at address colon coin we also got an ipv4 I know we really need the move to IPv6 and we're like we're severely limited on IP namespacing but the sheer fact that everything breaks every time using IPv6 it is shocking it is just the worst it's just the worst it's it's it's just the worst response at 127001 and this presents the first problem which is that localhost can refer to two different IP families it can either be a V4 address or it can be a V6 address yep now most of the time most programs will handle this gracefully they'll you know try the V4 address and fail and then try or sorry try the V6 address I just realized I'm drinking something and you guys are like this man's drinking a pumpkin spice latte on stream this is a protein drink okay tough guy okay I'm getting my swell on okay I'm getting swollen watching some python becoming a Chad okay some of us become Chads at different rates I'm just Chad and hard right now okay this is not this is this is not a PSL okay okay A little PSA not a PSL and fail and then try the V4 address or the other way around depending on whether you're listening on V6 localhost or V4 localhost but some programs don't handle this nicely for instance we had a recent bug at work where for some reason the developers MacBook refused to try the V4 address it was only trying the V6 address and so it had all sorts of different classic MacBook problems uh the other thing that you might notice from my description here is by trying the V6 address first and then failing you're necessarily going to waste some time you're also going to waste some time by looking up this uh this name it usually doesn't make it to a DNS server usually it's just an Etsy host lookup yeah but you're still taking assist call to do that look up there and I've actually made this refactor at two companies now to be fair you are using python okay can we all be a little real here can we all be just a little real you can't be too concerned about performance and use Python same time okay good luck with your for a little python hey python throw up uh Yelp or sorry Lyft this made a very significant difference by switching from the name localhost to instead the hard-coded IP address for localhost and here in this case one two seven zero zero one this made if I remember correctly almost a I want to say it was a two percent Improvement in latency across every service at Lyft basically I changed localhost in the core HTTP client to 127001 and then it avoided both that lookup and the attempt to do a V6 connection so can we just take a moment and appreciate that two percent at a large place is an incredible number right if you could just take home a two percent win it's it's a it's enormous right I mean there's places that are spending hundreds of millions of dollars a year on servers and so when you're like two percent you gotta remember that's like an entire Dev team salary so it's like yeah we could hire a whole team because you just changed localhost to one two seven is it worth it absolutely a whole bunch of uh a bunch of a bunch of improvements from essentially a one-line change uh but yeah my recommendation is to use the IP address here's actually a change set where I did exactly the same thing at my current company at Century this was to fix uh this was to fix that developer's machine which refused to try V4 for whatever reason um but a quick change from localhost to the hard-coded IP address uh avoided all those problems but anyway hopefully you can learn from my learnings here as well and uh stop using localhost as a name and I I don't think he mentioned it but I believe if you do this in dog I've never successfully used it in Docker anytime I do localhost it just has no idea what it's looking for I always have to uh give it a more proper naming convention um it always just seems to just suck I mean I don't know why I never looked into it obviously comment below or reach out yeah it's a yeah yeah it's uh oh Docker host internal yep okay that makes sense it's just like it just doesn't work and so I'm already not I'm already in the habit of not using localhost as it is uh 127 is so is so whatly what there's a 50 chance uh between zero yes I know I I'm gonna be real here I use zero zero zero zero probably more than I need to I should probably just start uh I know because locals is inside the docker container I know uh but I just don't like I didn't know what it mapped to and I didn't know how it did it and all those kind of things I'm sure what however does its thing there's whatever it attached to someone set it up above is the only valid bind uh all zeros for Docker yeah that's what I always use is all zeros uh just saying um it's just a thing we can we can look at all that later but here we go various platforms but thank you all for watching and I will see you in the next one let's go that was actually really good that was actually really really good I like that good job Anthony that was really it was good informative video here and uh I'm just shocked that you could get more than a zero percent savings by simply removing the word localhost I guess I would have never thought of that honestly myself I would have just never I would have never been like you know what the real problem is here localhost right it just would not have it would not have dawned on me so the fact that that happens love it I also like the fact that you you don't really think about IPv6 being a problem and if you just remove it being a problem by just simply doing 127 you don't have to deal with it and just like boom now you don't have now you've both you've crossed off DNS and IPv6 in a single it's a single line change let's go that's the two most common problems we're doing this we're living the dream life anyway subscribe to Anthony great guy like him thumbs up good job subscribe absolutely uh link will be in the description I also call us on Twitch I'll leave I'll try to leave his uh twitch his little twitch Link in there as well the name is I've been guilty using localhost you know what I mean come on hand come on hand come on yeah get an ant a jet