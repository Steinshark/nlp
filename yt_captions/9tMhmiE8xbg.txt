hello in today's video I'm going to be breaking down how I made my entry for The Punisher endless engines competition there's been loads of really nice comments on the video it's had just over 7 000 views in the week that has been up and people have been saying some really nice things about it which is greatly appreciated so to follow up I'm going to be doing a little breakdown of my process and how I made the render this is the final scene in blender this is all of the foreground stuff so we have obviously the cart and the horse with all the animation there's also the flying rocks that land the smoke simulation and the fire stuff coming out of the volcano in the background is done in a separate scene because it was quite heavy so I assumed it separately so I could keep this fairly responsive for all the animation there's also some hair particle systems and stuff that are turned off in the viewport but they look like this for the grass and there's also one on the horse which looks like this actually there's two on the horse and there is a couple on the Wizard's face which looked like this but like I said I keep them turned off in the viewport and that keeps it nice and responsive for playback so I can scrub around on the timeline in real time I showed how I made the Assets in the breakdown I didn't make the horse model but I made the Wizard and I sculpted the hat and the clothes and everything and then I also modeled the cart that he's riding this lamp is just a model that I downloaded didn't make this either but I did do the textures for it the most complicated part of all of this I think was making the rig and actually making the animation work so if I unhide all of the scene files and everything the first big problem that I had was working out a way to get the animation of the cards and everything to deviate from just going in a straight line which is what you get when you parent it to this bone in the middle this is the one that comes with the project file so what I ended up doing is making a second bone which is this big empty here it's actually a bone but I've set the custom bone properties to make it this big empty sphere so I parented this new bone onto the original one that came with the project files which is this circle and then I locked its transform so that it can only move side to side and I also locked its rotation so it can only move in the z-axis which is how I did the kind of drifting feel of the cart if you watch the live stream you will have actually seen me anime writing this the idea I wanted was instead of it just going in a straight line I wanted it to start off frame then it kind of comes into frame veers a bit and then Dodges a couple of these Landing rocks and then sort of recovers and then speeds up and leaves the frame so to achieve that side to side animation I'm just taking that new bone that I've parented to the original one and just animating it left and right so it gets this kind of snaking effect of the cart and I also keyframed some subtle rotations on it so that it feels like it's kind of drifting around the corners and then on top of that I did some rotation keyframes on the cart which allowed me to animate it to be rolling on its wheels so it's kind of going up onto one wheel as it banks around the corners so then when you combine those two things as it goes around the corners the wheels kind of lift up and it feels like the gravity or the center of balance is being thrown to one side which I think looks really nice and then I also kind of animated these secondary bounces so when the wheel touches the floor they then pop back up just for a few frames to make it feel a bit more Dynamic then for the animation of the characters I used the rigify horse Armature which is in the animals one and luckily There's an actual horse rig so that was really easy if I turn off the parent constraint I can see this in place it looks like this again I showed this on the live stream but the trick that I found was just animating all four legs and then offsetting two of them so initially I animated all four of them to be moving at the same time I just did four keyframes going in a circle so you have one position where it's touching the floor one kind of like this one sort of full stride like this and then one where the leg is Reaching Forward and then it goes back down I made that cyclical so it carries on forever and then I took the root bones of the opposite feet and just slid the keyframes in the timeline which allows me to offset the animation of two of the legs and that gives this kind of Galloping effect instead of the legs just running together which doesn't look very realistic because that's not what horses do then I use the child off constraint to parent this horse rig onto the cart and I did the same thing for the wizard so here's a rig is parented to the cart as well and then I just did some animation of him kind of getting thrown around as the cart goes into the corners so he kind of slides off to the right here and grabs his hat and then he kind of regains control here puts his arm on the post to kind of steady himself and then gives the reins a little flick and the horse speeds off out of frame it's all quite subtle and it was really easy to animate because his hands and stuff are an ik system so I just had to move these around and it made it really easy I also animated them kind of bobbing up and down a bit in the seat so as it goes over bumps and stuff he just kind of jumps up in the air a little bit that's pretty much it in terms of the animation and to be honest that was the bulk of the work in blender most of the background stuff is a matte painting which I'm going to show in nuke in a second the Falling Rocks are just attached to Curves so I'm using a follow path constraint as you can see over here on the right hand side I initially did this with a rigid body simulation but I found that using the curves was just a much better way of animating it because I had exact control over where they landed and then on the Rocks I also parented a point like to them just above and I've keyframed them to get really bright and Flash just for about 10 frames once the Rocks hit the floor and this is simulating the light fall off of the lava which I did in Nuke as well so there's a big splash of liquid that's the lava and obviously that would be emitting quite a lot of light so you can see here if I turn it on and off it's lighting up the surrounding area of the grass and it's also adding a nice side light onto the cart then for the simulation this is what this looks like it's quite slow to play back so I can't really play it back in real time but you get the idea like I said I say this out as a separate scene and I added a massive smoke domain into the shot which is pretty much the length of the cart is running both of the rocks are then set to fire in Smoke flow objects which you can see if I select them and these are the settings I pretty much stuck just with the stock settings I didn't have to change very much I've turned the sub steps up quite High to 20 because they're traveling really quickly this stops you getting the jumpy look of the simulation where it feels like it's emitting and then moving and then emitting and then moving adding extra sub steps samples the movement between the frames and then you get a much more consistent emission of the smoke over the course of the shot for the actual smoke domain settings I set the resolution division to 2000 this took about 20 minutes to bake I think so it's quite a long one and then again I pretty much left all the settings of stock I turned the vorticity up to 0.1 just to make a little bit of movement in the smoke and then I set the dissolve Time To Be 30. So eventually it fades off as it's going through the sky and I think that's pretty much it I changed very little to be honest I didn't need to because it was happening so quickly because they were moving so fast and it was going to be motion blurred that I didn't really bother spending too much time making the Sim look amazing and then for the background stuff coming out of the volcano this is what that looks like this main plume is actually a VDB and it was given to me by Jamie one of the Discord mods if you're in the server you'll know who he is and then the ones coming off of the edge are additional ones that I assumed just using a particle system this 3D model of the volcano wasn't actually used in the final render I just made a rough version of it so that I could use it as a holdout so the geometry would cut through the smoke the emission source for the trails that fly outwards from the volcano is this icosphere and it has a really really simple particle system on it I set the number to nine so there's really barely any there's just a few Trails coming off of the main plume of smoke and then the main thing I really changed was the velocity so I set this to 150 meters per second the project files that were supplied the scene is absolutely enormous so I had to set this really high to make them actually travel at a realistic distance and then because the scene is so big it felt like they were falling really slowly so I also went into the world settings and I changed the gravity to be -50 I think by default it's like minus 9.5 or something so there was a bit of back and forth in terms of turning up the velocity of the particles and then dropping the gravity so they shot out far enough but then also fell fast enough as well then once that was done there was just a bit of mucking about with the Shader to get it to look nice I put a massive light inside of the volcano so it felt like all the light from inside was actually coming up and lighting up the smoke which looks really cool and the Shader on these Trails looks like this I followed the poly Fjord fire tutorial and just did something really simple just to get that look of the kind of fireballs in the end of the smoke so it's just a principled volume Shader set to 2.5 for the density and then into the black body intensity I'm using a couple of color ramps that are utilizing the density and the flame attributes so this is controlling the fall off of the fire and then this one is controlling the fall off of the smoke and when that goes into the principled volume Shader it looks pretty nice so I rendered everything in a few passes I did a render pass that was just this background smoke I did one that was the Falling Rocks and then I did everything else just as the main Beauty foreground layer so then we jump into nuke which where most of the look came from to be honest as you can see here I actually did 10 versions to get to the final ones there was quite a lot of iterating I was super super proud of this I didn't really have an idea of eventually what it was going to look like I just kind of wanted to do a horse running with a cart and there being a volcano in the back so let's break it down the main look from the background is just a very big matte painting so I started off with a couple of photos of some mountains which are back here as you know let's start with guys so this is the sky the very very base layer is an hdri of some clouds I did a little bit of painting just to extend them below the Horizon and then lots of color grading and stuff just to make them feel a bit more stormy and then I put this on a sphere and I'm using the 3D camera from blender to actually view this and film it and the camera is going flying backwards as you can see then to add some better detail into the sky because I felt like it wanted to be a bit moodier and a bit more sunsetty I found this photo of some clouds over the ocean and with a little bit of tweaking I overlaid these on top of the hdri in the end pretty much all I used from the background one was just this main foreground Dark Cloud because it worked really nicely for being above the volcano and then for the rest of the sky I used this one because it was much more in keeping with the kind of look that I was going for then after that we go to the mountains which is back where we were this photo was quite clearly taken in the daytime and I wanted this to be a lot darker so to make it feel a bit more nighttimy I keyed the snow so I basically keyed all the bright areas and then started using some various keying techniques and stuff to bring down the exposure and the contrast of this image and this really helped to make it feel more like the time of day that I was going for and matching the sky that I'm going to put it on top of in a minute then on top of that goes the volcano this is an actual photo of the volcano use of Lord of the Rings that's Mount Doom this is just someone's tourist picture of it in a much more pleasant setting than we see it in The Lord of the Rings films so I nabbed this and did a lot of grading to this as well to make it the right color so it gets a lot darker I took a lot of the saturation stuff out as well so this is the before and after and then the lava I actually just extracted from this initial photo so you can see there's all these marks on the side of the volcano where the lava has obviously been before or maybe it's just from rain water and mudslides and stuff I actually don't know but I ended up using this and I keyed those highlights off of the face of the volcano and then with a little bit of masking I basically extracted just those areas of the image and then used them and graded them to be very very orange and bright and then I put this on top and I also use that mask in a couple of areas just to do this underneath glow so that goes on top which gives that effect and the reason the texture looks really cool and works really nicely is because it's actually already in the image so I'm just kind of augmenting what's already there and it was very successful then on top of that I also found this volcano eruption documentary footage so I downloaded this video from YouTube I had to do quite a lot to it to get it to work so I've got a big re-time on this but what I used from this is all of the highlights of the lava actually falling off of the volcano so again I did a luminance key and I just grabbed all the really really bright areas I did some grading to change the color of the lava so it's much more red and a bit more desaturated to match the color of the lava that I put on the volcano here and then I cut that out just so it's the bits that I wanted and this goes on top and this works really nicely because it adds some moving texture to the whole thing obviously the main volcano is just a still image so this stuff really helps to make it feel like the lava is cascading down the side and doing a liquid simulation in blender for this would have been a nightmare so it's really cool to be able to just grab some stuff and comp and make it work so this then is projected onto a card as well and I should have mentioned that's what I'm doing with the mountains basically throughout this entire shot all of the elements of the map painting are put on cards that are spaced out slightly in Nuke so as you can see the mountains are behind the volcano here and that means when the camera is moving you get some actual sense of Parallax even though they're just 2D images because they're actually placed at different depths in 3D space so that's those two combined then on top of that we have the Sim of the volcano so this is all the stuff that I rendered from blender this is what the original render looks like I rendered it as a multi-layer exr so I have access to the emission pass which is literally just the fire and this gives me control over the color completely independently from grading any of the smoke so I took out pretty much all of the saturation from this which just makes the fire feel a bit more Overexposed and photorealistic then there's a bit of grading just to make it a bit more orangey to feel like it's being lit up by the fire and the lava from inside the volcano and then I put a little bit of a defocus on it just to make it a bit softer because it is quite far into the background so that goes on top of the volcano there and then we have all of the fields which is this stuff in the foreground this is made up of three different images there's this one which I just cut out this kind of right hand side of the frame I use some of these trees for the foreground and this bit at the hill and then this Cliff face here I didn't use any of this background stuff again it needed lots of color grading and stuff to make it feel less daytimy so it wasn't in direct sunlight so again I'm doing Luma keys on areas of the frame that are really bright and I'm using that to kind of bring down certain sections of the frame which is helping to reduce the contrast a lot and make it feel more nighttimy so that is placed over here in the corner then we have the other side of the frame which is just a big photo of some Fields I found this and I thought it looked really nice it's got lots of nice trees and then there's this kind of open area of the valley that's just grass again lots of color correction to reduce the contrast and everything make it feel like the right time of day I cut this out just by doing a lumicky on the tree line because there's quite a lot of difference in contrast between these foreground ones and the background so the Luma key got me most of the way there and then I just used a rotor shape just underneath the edge of the trees just to fill it in so this is the eventual mat for that and then I pre-molt this and place this over here I ended up flipping it so it felt more like it was coming in from the other side of the frame then we've got some more color corrections to both of these these are just making them generally a little bit more warm so it feels a bit more sunsetty so I'm just putting a bit of red into the gamma then on top of that we have this vinyl piece which I basically just used to fill this hole there was a bit of a gap so I'm just using this and kind of sticking this over the top they merge really nicely because there's this natural kind of line in The Cliff face as it's coming down that also kind of lined up with this image so I overlaid the two and then got the colors in the same sort of place they merge nicely this is what the original photo looks like lots of color correcting again I did quite a few really soft rotor shapes in this and then just use those to isolate certain bits of the frame so for example here the top felt a bit too lit up if I look at it over the top of everything else so I just did a really soft mask up at the top and then used that and I think I'm taking out some contrast and also dropping the gain which makes it darker because the lighting of all of these photos was completely different I'm having to basically kind of re-light them with lots of masks and Grading and the whole time I'm keeping in mind the sun is kind of below the mountains in the background so there should be no real directional sunlight in any of this stuff so you can see here I'm kind of Faking that look by adding a shadow into this Valley by using a rotor shape here there's just lots of stuff like that going on to build it all up then this also gets projected on some cards as you can see here and I even used an edit Geo node in Nuke and then kind of pulled the vertices around so that you have a bit of Parallax between even the foreground and the background then this goes on top of everything else so that's kind of the mid-groundy stuff then underneath this I did a little bit of a kind of light wrap and Haze layer it's very subtle but it's just adding a little bit of a sunlight backlit feel onto the sides of some of the smoke and the volcano and then just a little bit of sunlight creeping over the tops of the mountains in the back here as you can see the way this is done is I basically took the background of the sky and then stenciled out the foreground of all of the map painting stuff so I'm just using the Alpha from all of this to basically cookie cutter that out from the background of the sky and then there's a load of different blurs on this at different scales which ends up blurring the sky over the edge of the alpha of the foreground stuff and basically as I turn the sides of the blur up I turn the mix down and as you stack the nodes you can see it starts to build up a really nice soft fall off which you get coming over the tops of the edges of the mountains then I put this blurred layer on top of all the matte painting stuff in the mid ground and then just pre-mult It Again by its own Alpha so there's no more of the sky there then I've got some glow added to the highlights here as you can see I've just got a Luma key that's just isolating some of the really bright bits of the frame it's cutting those out and then I've just got an exponential glow on those and that's just adding a nice soft Global glow to everything and then all of this stuff goes on top of the sky so now we pretty much have the background and the mid ground built and then finally I've got the foreground CG stuff which goes on top so as you can see here this is the foreground layer with the grass and the cart and the rider and everything this is what this layer looks like out of blender as you can see there's no stuff in the background I'm using a few crypto mats here just to change some of the things like making the grass a bit more desaturated brightening up some of the characters and stuff so this is with all of my comp tweaks might be better to look at it like this when it's pre-molded so as you can see kind of desaturating the grass a little bit and then just making everything a little bit brighter bringing up some of the mid-tones so it's a bit more visible and we've got some light wrap from the background I did actually do an edge lighting blender so I put a massive light up in the sky which is obviously where all of this Edge lighting is coming from but obviously I didn't have the matte painting of the sky behind it in blender so this extra light wrap is actually being generated by the matte painting then I put a really subtle exponential glow on this as well just make some of the highlights on the edge of the horse and the lantern ping a tiny bit I don't even know if you'll end up seeing that in the YouTube compression hopefully so then he goes on top there and then we've got all the fireballs and everything so this is what the render for the Fireballs looks like the cards and everything is a hold out in the foreground so you can see here that the Fireballs are actually being cut out by the horse and stuff a little bit of grading and stuff just to take some saturation out of the fireballs and make them a little bit brighter then they have a big glow on them which is doing some really nice stuff and then finally something that I did quite late in the process is I added some liquid splashes which were meant to be Lava initially I was planning on doing these as a liquid simulation but I really wasn't confident in my simulation skills and blender's liquid Sims to be able to make something that would work for this that's not really me bashing blender I'm just incompetent so what I ended up doing is finding some stock footage of some liquid splashes which are like this and this is just water this isn't lava I spread them up loads so they're a lot faster so this has like a 400 retime on it which makes it a lot quicker then I graded them to make them quite a bit brighter and also have that kind of orangey Hue of the lava and then there's a big exponential glow on this and just with a couple of tweaks there suddenly really feels like a lava Splash which is really cool and obviously this is much better than any kind of liquid Sim that I would get out of blender because this is actually the real thing it's an actual water splash so then what I did I had two of these one for each of the Fireballs Landing I put them on a couple of cards in 3D space where the Rocks land and then this gets filmed through the blender camera as well the reason I wanted to add it is because without it it felt like they were just kind of hitting the floor but there was no interaction but now with these it makes the whole thing feel a lot more impactful and like when it hits the floor there's some real force behind it and the impact of it is chucking all this lava up into the air which I think made it feel a lot more Dynamic so I play that quickly you can see it looks really cool it was very effective and I was really happy with the result of that and there's the back one there behind the cart again works really nicely that's all of the layers chucked on top of each other now and then all of this stuff at the bottom is just some kind of lensy artifacty stuff that I put on top so I did a slight defocus around the edge of the frame just to mimic a bit of the softness you get from lenses towards the edges then I have some lens dirt overlays which look like this they're quite subtle in this I didn't want to go too over the top with it because they were a bit distracting I built this just out of a couple of lens dirt images that I really liked so I've got this one and this one I did a bit of grading and just cutting out certain elements that I liked or didn't like and the same for this and then combined them together then to get them to be the correct color and interact with the footage when there's luminance changes the trick is to blur the footage loads so I blurred comp by 500 pixels here as you can see I added a little bit of contrast with a grade and a color correct node just to kind of isolate them to the area I wanted more and then I multiplied the lenser elements that I made over the top so that combined together looks like this so what the multiply operation does is it makes the lens that inherit the color of the stuff underneath it but it also means that when the footage gets darker when there's not any big explosions happening that the lens dirt will actually get darker as well really effective it's just a little zest on top just to make the comp look a bit nicer then there's some really subtle chromatic aberration again this is just isolated to the corners of the frame so I'm using a radial and then inverting it so it's just going in the corners this is what it looks like on top of everything and then this key mix node is merging it with the background with no chromatic aberration and then I'm using this radial that I made as the mask this is really subtle almost to the point where if you didn't know it was there you probably wouldn't spot it but it's just adding a little bit of aberrationy stuff on the edge of the fireballs and things then more glow because of course more is more when it comes to Glow this one's quite soft it's more of like a bloom than a glow really I always like to do a really soft glow on top of the whole picture as well as doing them on the glow elements individually further up the script this just kind of beds everything together it adds like a uniform glow across the whole thing it tends to be like a kind of final paint stroke that makes everything balance a bit better and then finally I've got some grain just to give everything a little bit of texture especially because the backgrounds are all still and they're a matte painting The Grain just makes it feel a little bit more alive and that is the finished result obviously I've submitted this quite a few weeks before the challenge Ended as you're watching this now there's still a couple of weeks left to go I did have some plans originally of putting some stuff in the sky like maybe some nazcool flying around or getting away from the volcano but I thought the background was already quite busy with the trails and the smoke and the fire and everything I didn't want to clutter it too much because I thought you might not know what to look at then and also I couldn't be bothered to animate some flying dragons so I just settled for this but like I said I'm super happy with it then I'll play the final version here which has the eventual color grade on it as well I just added some contrast a bit of vignetting and stuff as well like I've said a few times it turned out much much better than I was expecting so there we go that's how I did it I hope you guys enjoyed the video I hope you think the end result is cool now all that's left to do hopefully is see it appear in the top 100 Montage I'll keep my fingers crossed but there's lots of very talented people that enter every year so I'm not going to hold my breath thank you for watching this video If you enjoyed consider liking and subscribing the project files for this are on my patreon if you fancy picking them up it really helps to support what I do and keep me making these videos see you in the next video foreign [Music]