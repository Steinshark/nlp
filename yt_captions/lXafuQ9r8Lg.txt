in this video I'm going to be showing you how you can use shelves in Python why they're so cool and how they can help us with storing objects persistently in Python now shelf does use the pickle module under the hood or does use the implementation of pickle so you need to know a bit about pickle to understand what's going on with shelf and in case you don't I will leave a link in the description box down below so you can understand exactly what pickle does and then you'll be able to use shelf like a pro to keep this short and simple shelf is essentially a way of creating a database that can store arbitrary objects and there is another module for this called dbm and the main difference with dbm is that you can't really store these arbitrary objects like you can with shelf so it's important we learn how to use shelf in this example and I'll cover dbm in a separate video but first let's create an example on how we can create a shelf so here we'll type in for example with and we need to call shelf dot open and here we need to provide a file name and this is going to be the database so for this example we can type in something simple such as DB for database you can call it something else you can call it test if you want and we're going to call it as DB and I'll just say test DB so that's more clear and here we can start adding items to our database and we're going to have to work with this in a dictionary fashion so for example we have a database here and if you want to store something in this database you're going to have to provide a key and assign a value to that key so DB at the index of a is going to have the value of 1 stored inside it I'm going to duplicate this two times change this to B and change this to c and this is a very basic example of us storing integers into this database now if we run this program nothing is going to happen in the console but if you do open your project folder you'll see that you're going to get this testdb.db file the syntax here looks very similar to what you would do if you were going to pickle an object in Python although of course you would have only one item to pickle in theory but the difference between pickling and shelving an item if that is a term is that with shelf you don't have to load the entire object you can choose to load only one element if you want or one object if you want as opposed to pick link where you have to load the entire object as soon as you open it so shelves can really help you with loading big dictionaries a bit more efficiently because you get to choose what you want to load once you have that shelf opened but now let's retrieve these values so that we can use them and to do that we now have this testdb and by default it's in read and write mode so you don't have to specify that but now let's retrieve these values from our database and we don't have to change the code up here it is in read and write mode by default so you don't have to specify that unless you explicitly want to but what we're going to do is first print the type of DB and then we're going to print the dictionary of DB and we're also going to retrieve one value just to show you that we can and we're going to retrieve the value for C now if we run this we will get first that the type we get back is a shelf type so as you can see it's a DB file name shelf and practically with this type you can perform all of the dictionary operations I mean there are a few different ones such as the sync operation which we will not cover in this video but as you can see most of the operations are very similar to the one of the dictionary and if you convert it to a dictionary you will get a dictionary back even though you might get this warning that we've given it an unexpected type and finally if we want to retrieve a value for example we want to retrieve a value from C we just have to use the normal dictionary syntax and we will get that value back so that was a basic example of how we could use shelf now another way to use it is pretend you have some data in a dictionary again it's a simplified example I will show you something a bit more complex as soon as we finish this example but just bear with me we're going to use this data over here to perform the following operation so with shelf dot open now we're going to open testdb again so test DB as database and inside here we'll just type in DB dot update and we're going to update the dictionary or this database with the data so if we run that nothing is going to pop up in the console but if we print the dictionary of this database you'll see that it will have updated all the items inside our database so that's a quick way to insert items or elements into your database just call db.update and insert your dictionary now again the coolest part about using pickle and shelves is that you can put any kind of object you want inside the database so for example if we have this class of fruits that has a name and some calories and I defined a string method to return the name and the calories to make it more readable if we have this random fruit and we want to store this so that we can retrieve it later we can do that using both shelf and pickle but the benefit of using shelf is that we can store multiple of these and that means we don't have to pickle each one of these separately it's just going to pickle all of them inside the dictionary or the database that we've created so the class is not really important but here we're going to create some more data of type dictionary which is going to equal this dictionary here with an apple which is going to have a fruit called apple with 10 calories and I'm going to duplicate this two more times because I want to have three fruits to show you we can have multiple elements and we'll have banana and orange and the calories for banana are going to be 15. and orange is going to have 20 calories so as you can see these are different objects and in general it's not easy to store something like this in a Json file because storing an instance of a fruit in Json just isn't that easy and that's why we need to serialize it and then deserialize it and that's where shelf comes in so once again as we've done until now we're going to type in with and we need to call Shelf dot open and we're going to give it a new name we're going to call it fruits DB as database and inside here we're just going to update that database so DB updates and we're going to pass in the data now we can run this and it's going to create a new database for us right here so fruitsdb.db and that's going to hold our information so now let's retrieve that information so we're going to print the dictionary of the database to see what it holds and if we run that it's now going to hold these fruit objects inside our database and we can just use them as usual we can say apple is equal to DB at the index of apple and then we can actually use that outside in our program so we're literally retrieving that fruit object and we're able to use it again wherever we want in our program as long as you have fruit defined somewhere in your script which is accessible to the Apple over here because of course if you reload this into your program and you don't have this class it's not going to understand what fruit is because fruit was something we defined in our program so it's important you have the fruit class defined somewhere that is accessible to this script for you to use the Apple once you load it back into memory so if you run this you'll see that we'll have the Apple objects and you will also notice that when we retrieve the Apple we'll be able to use it as a normal object you will still be able to use the methods and so on although I didn't really demonstrate that here so let's make a fake method we can say Def func and it's a simple method that just prints Apple that doesn't actually matter we'll just print hello so right now it's a static method but the point is that we can type in apple dot funk and if we run the program it's going to use that method now it's going to give you this warning here because once we load apple right now it has no idea that we loaded a fruit it only understands that we've loaded an object but you can fix that with type hinting so now we have the fruit here which means if we try to use the Apple we can still call all the methods and attributes that come with that apple and it will work as usual now there's an even better way to retrieve items from a database and that is using the inbuilt db.get and with this you can try to get something such as apple and we should assign this to something or else it's useless so Apple equals db.getapple and we'll print that apple so if we run that we will get the apple back as from earlier but if we try to search for something such as let's say lemon and we try to run that it's going to return none to us so it's not going to throw an error if we try to grab something or access something that doesn't exist unlike when we did this and we said lemon this would throw an error because there is no key of lemon in our database so you might just want to use either db.get or db.set default that is up to you which one you want to use maybe just say banana and the default will be orange that's actually really confusing let's forget about that let's just say the default will be zero if there is no banana so there is a banana but if we type in X we will get 0 back because that's the default that we provided so that's a much better approach for for grabbing elements from a dictionary with everything being said about shelf it is important to note that it has the same security issues as with pickle and one of the major security issues is that if you load a random item from the internet there's no way to verify what it is until you actually load it which means once you load it it might take access of your computer so it's 100 important that you trust what you are unpickling or what you're trying to load into memory because there is no way to understand what's in it until you actually load it and a second important point is that this should never be accessed concurrently but otherwise with all that being said I would love to hear what you think about this module please let me know in the comment section down below if there's some more interesting features that I missed regarding the Shelf module but as always thanks for watching and I'll see you the next video