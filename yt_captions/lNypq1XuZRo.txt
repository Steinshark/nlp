almost every integrated circuit will have an analog component that component is often pretty small sometimes as little as three percent of the total thing yet this tiny little piece of analog circuitry regularly takes up over half of the integrated circuit's total design cost that is because analog chip design is a gosh darn art hand drawn by a chip Michelangelo stirring up at the ceiling night after night and if there's one thing we all know it is that computers can't do art like artists can right in this video we are going to talk about the art of analog circuit design and ai's potential to help but first I want to remind you about the newsletter sign up for updates and new analysis the full scripts of selected popular videos and more the sign up link is in the video description below I try to put one out every week maybe two alright back to the show the digital world is made up of ones and zeros but the real world is analog transistors are well suited for digital signals they either open the floodgates and let the current saturate one or they shut the gate and let nothing through zero analog signals aren't like that they're continuous a waveform where each value in the signal is not abruptly different from the previous or the next value common analog signals include those for sound temperature pressure and electrical voltage these things come from The Real World digital on the other hand is All About Numbers a concept that humans made up analog Electronics take in these analog signals and do things to them in order to create a desired output every integrated circuit or system on chip has an analog component information from a sensor or transducer might first enter the circuit as an analog signal transducers are devices that convert one form of energy into another things like microphones other analog inputs include button press down actions or clock timing signals think a vibrating quartz crystal the analog circuit then accepts the input signal and manipulates it that can mean filtering counting adding or subtracting if necessary we might convert the signal from analog to digital or vice versa once the work is done the system's output signal is sent to where it can interact with the real world again using another device like a display or another type of transducer the recent trend has been to digitize all the things and that has yielded real benefits for instance digital audio signal processing for noise canceling features in hearing aids but some functions will always be analog if only at the borders between digital and the real world you hear me you digital dweebs y'all ain't ever killing off analog before we talk analog chip design I want to briefly go over how we designed semiconductors in both the digital and analog worlds I recommend watching some of the other videos I did ON Semiconductor design but I'm just going to hit the main beats so that we are all on an even footing first you meet with the customer and decide their specifications you translate those specifications into subsystems and components next up we have a circuit designer choose the right circuits their sizes and their interconnections to fulfill the specifications once that is done we then do the physical design layouts we need to figure out where to put these circuit devices and lay out the interconnections between them after that we verify the whole design to make sure it meets all the foundries manufacturing specifications The Foundry provides design rules to you that you cannot violate then we ship a circuit design just like a video for this channel is never really done we just tear ourselves away from it and ship it so that we can move on to the next one so why is this design thing so hard for analog digital and analog chip designers both complained that their jobs are hard they are both right of course the jobs are hard digital designers have to deal with the interactions of billions of transistors and all their trade-offs the analog chip design is harder in a different way in digital designs every transistor is roughly the same size the challenge is dealing with how they interact with one another analog designs have far fewer devices in them tens and hundreds rather than billions but each of those devices can have different physical sizes and electrical properties and those circuits are highly sensitive to their surroundings neighboring circuits the environment and so on doing a physical design layout is particularly nasty you need to run the layout through a simulator to perform a process known as parasitic extraction which sounds like something you do to a tapeworm I know but hear me out every analog designs components and connections bring some amount of parasitic elements these elements contain various forms but the two major ones are parasitic resistance and capacitance parasitic resistance refers to reductions in the electric current as it flows through a device or an interconnect both those things are made from Real World materials and all real world materials have some amount of resistance parasitic capacitance on the other hand refers to unwanted storage of an electrical charge that exists simply because two components or interconnects in the circuit are close together this exists because an integrated circuit is made up of conducting layers the metal interconnects or the metal silicon substrate and insulating layers silicon dioxide when you put an insulating layer in between two conducting layers well gee that kind of looks like a capacitor an unwanted capacitor parasitic resistance and capacitance are like taxes unavoidable but very much unwanted they delay the speed of the signals consume more power than you wish and degrade the circuit's overall performance when we do parasitic extraction we are trying to calculate how much parasitic resistances and capacitances the whole circuit has this means modeling the electromagnetic effects of all the various devices and wires in said circuit This is complicated and computationally intensive capacitance is particularly nasty imagine all the many devices and the multitude more interconnects on the chip this all makes analog design an evolutionary effort intensive knowledge intensive process that starts from the top down when preparing his net list the designer manually calculates the variables for things like the size of the devices then he runs it through a basic analog circuit Simulator the 50 year old spice program is still widely used to predict how the circuit performs in Silicon not good enough back to manual calculations when done he passes it to a physical design engineer who does the layout calculates the parasitic effects and checks the layout against the foundry's design check rules once he is done with the layout he needs to pass it back to the Circuit designer so that he can recheck whether the design still achieves its stated goals this happens over multiple cycles and for each of the analog blocks and sub blocks in the whole circuit even the smallest specification change in either the layout or the circuit net list requires a full review this process is long and arduous with as much backtracking as the first Halo game compare that to digital chip design which can be highly regimented with multiple teams sequentially handling the design process through each stage the wide variety of schematics the number of conflicting requirements the many parasitic elements and the higher order effects between all these devices slash interconnects that all matters design is all about optimizing for certain variables within a space and an analog design that space is a Galaxy sized without straightforward reliable heuristics to fall back on analog and mixed signal designers rely on experience and knowledge built up over time designer Bob Dobkin Likens it to learning a language you start by learning the grammar rules and the dictionary and after learning for many years you finally can read or write documents without having to consult a dictionary or grammar checker all the time you simply Intuit what it means it is also why these designers care so much about a Design's Aesthetics lacking solid benchmarks the Aesthetics of a particular design is an indicator of its correctness when we think about today's super sexy 10 7 and 3 nanometer process nodes analog does not often come to mind yet the analog problem is often in the minds of today's Leading Edge system on chip designers particularly those designing chips for mobiles like iPhones many analog designs struggle to work well with Leading Edge processes due to these aforementioned parasitic effects particularly parasitic resistance in both the transistors and the interconnects between them parasitic resistance occurs in Leading Edge finfet transistors at two places first where the current travels up to the 3D fins from the rest of the circuit and vice versa and second the current hits resistance as it passes through the finfet gate itself this is in part due to the gates very thinness there's just not enough conducting metal for the current to travel easily through a similar effect is behind the parasitic resistance in the metal interconnects Leading Edge interconnects are made from copper surrounded by a barrier layer of tantalum nitride has the interconnect shrinks the tantalum nitride layer stays the same size so the proportion of low resistance copper to high resistance tantalum nitride decreases increasing the interconnect total resistance for example cutting the metal pitch from 80 nanometers to 48 nanometers of 40 reduction raises the line resistance by six times anyway this long-winded digression is basically to illustrate the importance of analog design at the seven nanometer level and Below parasitic resistance levels worsen with every new node and dealing with it goes on top of all the other challenges of analog design just like a cherry on a delicious black forest cake which I haven't eaten in such a long time because I am on a diet right now but I'm just really badly craving it what with the chocolate shavings and the frosting oh wait where was I uh so like I was saying before every SOC has to have an analog component and it is becoming a big bottleneck in the design automating analog design would be sweet a great deal of digital Eda tools blew up in the 1990s and now digital Hardware designers can write high level specifications in a language like verilog the Eda takes that and automatically translates it into circuits Eda success in digital design prompted people to do the same for analog and we have been trying ever since these historically targeted individual parts of the design process First Circuit sizing or design parameter optimization the work of picking the value and sizes of the circuits the general approach has been to create an overall cost function and then try to solve for it usually using something like simulated annealing or genetic algorithms second laying out the circuits and their interconnects procedural layout software does exist slam and ilac are prominent examples but they heavily rely on either templates or predefined rules and their outputs still fall far short of what an experienced human can do there are a few attempts to create an end-to-end analog design product like the Berkeley analog generator designers don't manually draw anything but instead lay out several high-level principles so all in all software packages either need the human designer still in the loop or they impose a great deal of a constraints solely to cut down on the number of possibilities and make the computational task easier people in the industry haven't warmed up yet to these tools preferring to do it largely by hand to get maximum control this and the overall smaller size of the analog semiconductor industry has meant that analog Eda tools remain niche go used to be a game said to have too many possibilities for traditional computers to work out powerful machine learning models trained on huge data sets help computers gain the intuition to conquer go now what about analog chip design in recent years academics have explored the use of neural networks to help place the devices in an analog circuit you show it a whole lot of human done layouts and train the model on them there are a number of AI startups working on this problem I recently had the chance to speak to one such team out of Toronto asterisk.ai they're trying to use a game playing AI kind of like those behind alphago to play the quote-unquote game of analog layout there are a few other open source Solutions recently there is a line which stands for analog layout intelligently generated from netlists it uses a combination of imposed constraints and machine learning models to route and place devices in 24 hours without a human in the loop another notable one is magical an open source fully automated analog and mix signal layout system it uses gradient descent and optimization algorithm for training machine learning models to iteratively place the devices and wires there are two big issues with these open source Solutions however first the design needs to go to The Foundry The Foundry has a set of design rules as part of a process design kit and that pdk tends to be proprietary that doesn't jive with open source second the models needed to do industrial sized analog designs have to be quite large this means having to spend a fair sum of money on GPU training time and good data sets open source might have troubles getting these the complexity of analog chip design helped put food on my family's table my father was a chip designer for whatever reason he fell into designing analog chips a long time ago he told me without explanation that analog chip design never got automated and because of that he was lucky because a lot of designers in other parts of the industry lost their jobs it also explains why he so rarely used the computer while he worked sitting there in his home office with some paper a ruler and a pencil I'm glad to have been able to do this video and more deeply learn the nuances of what he meant back then I wonder if these new machine learning techniques can ever conquer the analog layout problem good luck to everyone trying it but in some little way I hope it won't happen because analog is the real world and its design is an art all right everyone that's it for tonight thanks for watching subscribe to the Channel Sign up for the newsletter and I'll see you guys next time