today we're going to talk about light field cameras okay which are a bit of a physics nightmare but make for some really cool images i was a bit bemused online because i looked at dozens of articles on how it works and none of them told me the summary is it's a magic box and then you can refocus the image okay in actual fact it's fairly intuitive once you understand it but it's mathematically fairly complicated we're going to skip past most of the maths because you don't need to know that if you're implementing it and we're going to talk about basically optically how does it work this camera is developed by a company called lytro let me just try and focus on that but i am focused now on it yeah you're focused on it okay but if i move it you're not it's a problem okay so what a light field camera does is let you focus kind of magically after you've taken a picture so when you take a picture you don't really care about focusing this doesn't have a focus knob on it or any kind of autofocus it does this by essentially capturing much more information on the light entering the scene than a normal camera okay now this is a lytro which is a brand name okay for a consumer um plant optic or light field camera okay there are other companies around raytrix is one that do more industrial level uh light field cameras which we'll talk about a little bit okay um i'm holding up a lightroom mainly because i own a lightroom and um or i should say the school owns a lightroom uh and uh we can perhaps take a test image and i can show you kind of sort of things you can do with a lytro image that you perhaps can't do with a normal image so before we get into that just talk me through this because it doesn't look quite like any normal camera no all you do with this is you point it at something so i'll take this there's the lens right you point it at something and you press go and it takes a picture okay there we go i mean yes to an extent you have to worry about what you're taking a picture of because it's still photography right but later on i'll worry about what do i want in the foreground what do i want in the background or do i actually want to change them and have it interactive or maybe i want to sort of move the angle slightly of the image you point at something you take a picture and then you're done okay and any kind of other effects like um depth of field and things you worry about later on the computer okay so perhaps we should take a test image and we'll see what it looks like okay so i'm going to move over here for a minute okay and then we'll see what that looks like on the laptop okay so we plug this in very straightforward we run the software this isn't a normal image right there's a lot more information that we'll talk about in a minute but it means that you have to process them before you can look at them properly okay and what that does is essentially reconstruct a proper image based on all the information that it's got so if we click on an image now we can see we've got a picture view and i can click on different parts of this image and focus on it i've clicked on your head and you're in focus and i click on the camera and that's in focus or on the back back wall and that's sort of more in focus and essentially what we're doing here is refocusing after the image has been taken which is good because i'm not very good at focusing images and so i can just click and point and click now there are obviously stipulations the image isn't hugely high resolution and if you take an image that's just bad it's not going to be saved by the fact that i can tweak it post processing okay um but it's quite a cool feature another nice feature is that we can do a kind of perspective shift an image that shows us really well is this picture of a keyboard that we took so in this keyboard we can still focus on the background or the foreground just like we could before but we can also click and move the image around and you can see that there's a sort of parallax thing going on the background is moving more than a foreground so we're actually changing the viewpoint the camera the photograph has been taken from which is kind of unintuitive because there's only one lens how is that done so the first thing to do is talk about how a regular camera works with a lens and that will give you some idea of what the difference is between this and and this lightroom so we're talking about a scene on the left and my camera on the right hand side and a really simple model for my camera now we won't run on the fact that lenses usually have more optical uh elements in them than that and we'll pretend this is my nice perfect lens that bends light just i want okay and this is my ccd so that's the sensor or the chip in the camera and if anyone wants to see more about those we can go and look you can look at that in the video on the bio filter light enters the scene from this direction through the lens and then hits the back of the sensor we won't worry about which orientation the image is on obviously it's upside down but that's obviously changed in post-processing so if we use our nice red pen for our light a light ray comes in here from this object here it hits the lens and then it's bent a certain amount based on the shape of the lens and then comes and hits another point on the sensor now what's really interesting is that there isn't just a single ray of light coming from say your face when i take a picture of you straight into the camera there are millions millions of photons right all in all different directions so what if that happens is if this is a part of some feature that i'm looking at light comes in all different directions this direction this direction this direction and all gets bent around and hits the ccd at the exact right point and then we have a lovely image that's in focus unfortunately it's never quite that simple is it especially with my photography so imagine that instead we've removed our lens or our objects moved okay so now our object is here okay slightly in front of where it was before the lens blends the light the same amount as it did before okay it's not got better suddenly so our light comes out like this and it comes together behind the ccd so that's what happens when you've got out of focus shots so that that effectively the fact that it's not converged on a point is a blur yeah and a very distinctive lens blur so the light from this object has basically been split over all this part of the sensor ideal in some kind of nice photography not ideal if that's what you're taking a picture of and the same is true of an object that's too far away the focal point will come in here and be in front of the ccd and then we'll spread back out again and just the same as this will be spread over some area of a sensor so that's what this lightro camera tries to do away with another interesting feature if we just draw another one this ccd element just adds up all the light rays that hit it over a certain period of time and that's what color it becomes so this area of the rays could be blue and this area could be red and then when you get to here it's a mixture of blue and red now that might not be useful but that's the whole point of how camera works okay it essentially sums up a lot of light rays on a certain area why is that important well imagine if we knew the differences between these light rays and these light rays we could start to perhaps get a feel about what's going on in the scene in a little bit more detail okay so we've lost this orientation information we don't know that this particular ray came from this angle and this particular array came from this angle all we know is they both hit here the end okay that's gone we're never getting that back what a light field camera does is capture the orientation as well as the color of the rays so a light field camera is really sort of an extension of a normal camera okay so we have our main lens just like before and we have our sensor just like before but what we also have is a micro lens array an array of tiny lenses in a grid formation but sit just in front of our ccd okay so i'll draw them in now these are much bigger than they would be in real life there's thousands of these it's best to think of it perhaps the pixel resolution or image is now these micro lenses light comes in from an object and it converges on one of these micro lenses just like it would converge on a pixel we're assuming it's in focus so let's say this one but now this one is not actually capturing the picture so these light rays travel through the lens and spread back out again underneath onto the ccd okay so each section of ccd is responsible for capturing all the different light rays coming in for that micro lens and you can see that the ones over this side of each lens are coming from this direction and the ones over this side come with this direction so we've preserved our orientation information why we do that will make some sense hopefully in a minute focus wise it's all calibrated so that the main lens and these micro lenses match up so that essentially this is what happens the points in the world for the most part come to being focused on these micro lenses now that we've got all of these rays what do we do we've just talked about that being a blur but presumably that's it's not a blur is it no if you had just an image that's out of focus right then what you're getting is you're getting these rays spread over bits of the ccd okay but you're also getting the rays of every other object spread over the ccd and they all add up and become a really blurry image okay in this it's much more controlled because only the rays from a certain point are projecting into certain areas under our micro lenses so one of the nice things optically about how this works and might help you understand it is that if we pick an individual pixel under a micro lens all the light going through that pixel comes from the same place on the main lens okay so it comes down here and it bends and it comes from this point here okay this is called the sub aperture so this pixel only ever sees light entering at that point okay and this pixel over the other side only sees light entering from this point so they essentially get different views of the scene one from the left of the camera one from the right of the camera so you can start to think okay so we've got two views maybe we can start to do some kind of depth reasoning about this just like we do with our binocular stereo another interesting feature is every ray that passes through this sub aperture hits all the different micro lenses and always ends up on the same corresponding pixel underneath each micro lens so if we pick pixel 5 underneath every micro lens it's going to reconstruct the entire image as seen from this point on the camera or in a different pixel this point on the camera what we've essentially done is not just obtained orientation but we've also obtained loads of tiny little images that view the scene from all over the main lens another way to look at it is that these micro lenses are just tiny cameras taking a picture of the back of the main lens okay and of course they're going to have a different view because some are over on the left and some are over on the right okay so that might be another way of looking at it so what do we do with this well it's mathematically fairly complicated but hopefully intuitively not too bad let's imagine that we want to um do our parallax shift okay because that's a nice easy one okay we want to view the image from the left and then we want to pan over and view it slightly from the right and of course you saw from the from the software but the parallax isn't huge we're talking a small amount and that's because the width for the main lens is not huge if we look at these the ccd from the back okay and we look at two neighboring micro lens arrays we're going to get pictures that look a bit like this so essentially pictures of this lens from slightly different positions and some stuff in the scene will be happening in these pixels now just like i said that all the rays going through a certain pixel go for a certain sub aperture and crucially all the rays through this sub aperture hit the equivalent pixels that's true if we take this pixel from this micro lens and the same pixel in this micro lens and the same pixel on the next micro lens for every micro lens we get a tiny image from the left hand side of the lens and if we do the same thing but with these pixels on the right we get the same for the right hand side of the lens oh it might be left and right you know optics okay so we can get a parallax shift by basically reconstructing our image by taking one pixel from each of the micro lenses perhaps the most obvious and perhaps most sort of magical feature of the plopter camera is refocusing so refocusing is essentially moving the ccd relative to the main lens i mean actually you move the main lens optics in a normal camera but we're not going to do that so if we fix our main lens here and we pretend that there's a nice new sensor in here okay this object is now going to be out of focus this red object but other objects might become in focus normally how a regular camera works if we were taking this image at this level of focus we would we wouldn't be able to reconstruct these rays because we don't have them but we have these rays because we've gotten plenoptic camera so we can work out which of these rays we need to sample from to reconstruct what this image would look like if the ccd have been here instead of here so essentially a mathematical summation of lots of different pixels in these micro lenses so that's basically how a larger camera works the micro lenses are obviously fixed in front of a ccd so this camera will always operate in this fashion the lightroom itself is is proprietary software in a proprietary format so you plug your camera in you use lightroom software to extract it okay but what you're going to get out is essentially a kind of animatable image that you can move about and change the focus and twiddle with in really cool ways and then if you publish them online they call them living pictures they can move about and you can sort of draw focus of the viewer to interesting parts of the image by kind of zooming in or by bringing them into focus suddenly so it's quite nifty it's like a pair of those 3d glasses that you use where one side's red and one side's blue but you've also got green ones and you've got them in a grid arrangement in front of your your camera's eye