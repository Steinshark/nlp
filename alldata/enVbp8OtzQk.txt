all right so over the weekend I don't know how many people saw but there was a bunch of tweets going back and forth between pretty much Dax versus versel is what it looked like whereas AJ from data dog was just providing numbers and everybody else was providing an insightful amount of misinformation so I thought I would have you come on and maybe clarify first what happened this weekend how did it all get started where was the actual contention and what is like the reality behind all this yeah so should we start from like the beginning cont let's when Adam met Eve let's go all right so I'm I'm just going to paste links in twitch chat yeah so uh this was like a week ago uh okay I saw this blog post right Y and so they said brell function now faster Proud by rust honestly there's nothing wrong with this blog post they just talked about how they made some improvements uh I do think that the average person reading this would probably find it pretty confusing um but like there's nothing wrong here like they just shared what they did and this is what you do as a company yeah it even says right here when streaming functions connect to the nearest for sale edge Network region from your function now powered by rust this process was 47% faster 21 milliseconds to 11 milliseconds on average and 77% percent faster 120 milliseconds to 27 milliseconds for the P99 for time to connect so it's like giving you internal stats referencing itself we were this fast we are now this fast in the P99 yeah and it's a little confusing because uh when you express things as percentages they basically so you were saying earlier when you add stuff like effect to your Lambda function it gets slower whatever code the user is bringing they don't control so they like reduce that to zero and they just compared uh their stuff so these are like you know 47% faster in the real world though the user might add in like a second of latency and it's you know not really 47% faster it's like you know like five or six% faster Mill win isn't going to win if you have a full second stop to load your stuff yeah um so I already I had a feeling that people were going to misinterpret this because when they hear rust they hear Lambda they assume that it's a like a new JavaScript runtime or something so I posted let me put in the twitch chat I posted this uh and I was like I was betting that people were gonna Mis interpret as it jobs runtime and ask for S open source it like almost immediately that's exactly what people were saying massively I saw it so many times people like you going to open source this new engine or whatever then people are like I spy llr or whatever uh Amazon's uh rust based engine is or something like that it was very funny you called this on like on the dot yeah so and the reason is like the way a Lambda function boots up start there's like a whole life cycle of things that happen and obviously like unless you're one of the few people that needs to go look into that stuff you just don't know and like you don't need to care like that stuff is kind of out of your control so this involves entirely optimizations on that level which again most people aren't familiar with uh so someone asked me to clarify so I posted this which was my understanding of their post okay so when you use AWS Lambda directly it boots and executes your code directly in middleman platforms they have code that needs to run before to execute their platform specific feature this adds overhead you'd normally not have they've improved the overhead in other words what you're trying to say is that Lambda just if you're using I would assume some sort of node environment it starts a node process with your entry point and it just runs Y and their's starts more than just a node process and runs it starts versel stuff and then runs assuming that a uh versell functions and uh AWS Lambda are one for one as far as speed goes so if you can just pretend that they are identical in speed then the added versel isms will buy necess like necessarily slow down some level yep exactly and uh and and to be fair when you use l directly there is also some stuff that technically runs before that you can override but this is it's like such little stuff there's like not much juice to squeeze like optimizing that AWS is already massively incentivized to make that as fast as possible okay so this was fine you know everything was this seems like very reasonable tweets so I'm not sure exactly how this got explod cuz I know there's one threat or two threat that just turned into a massive just so many people talking yes so this was then kind of where it shifted a little bit Theo says universel continues quest to fix Lambda Ryan asks to clarify isn't this just speeding around the rapper not like Lambda itself and if you click into Ryan's tweet there's some back and forth so Theo says something then uh Tom who works on this stuff and uh and Tom used to like work on um his own like uh serous runtime stuff and brel acquired his company and he's been working on this stuff uh so he mentions we basically got rid of almost all JavaScript including the ones that you don't see were now as fast or faster than the classic Lambda and I was like okay I get getting close to as fast but I don't get how as faster starts to come into play yeah so I asked him can you can you explain what scenario could be faster and his reply here I found extremely confusing he said any scenario where you run the code on ver cell functions versus native AWS Lambda particularly streaming so basically in all scenarios uh you probably know that cold starts from AWS before the init phase are very variable which is I which is why I wrote as fast or faster so my interpretation of this is there's uh stuff you can control so what you put into the Lambda function you can control everything that happens but there's stuff that happens before Lambda uh the Lambda service needs to uh you know warm up a container copy bites into the Container it's stuff that you don't control it's what AWS does and there's some variability in that it's the pure random part about the whole process yeah my understanding is what he's saying is when it's randomly faster for versel as compared to when it's randomly slower for you using it directly then it's faster and I was like okay but nobody controls that and I I couldn't really figure out how to articulate it so I just replied with a with a face pal and I like moved on I wouldn't interpret this one right here we basically got rid of almost all the JavaScript including the ones you don't see we're now fast or faster than classic Lambda I would interpret this as the stochastic cold start that happens to be slower than the normal cold start we are now fast then I guess I would also interpret that where it's just like we are now officially as fast or faster yeah so if you click into Tom's reply AJ has a reply so for context uh so us at SST we spend all our time helping companies build stuff on AWS we work with thousands of companies to do this we get a lot of exposure to Inner workings of AWS when I have a question about something when I'm confused about something despite that experience I go to AJ to ask him so AJ is a AWS servess hero um he's been doing stuff in the serverless aw space for a very long time um he has given some fantastic talks he has given some crazy like insightful blog post he like digs into like every single step all the way down from the hardware to the software layer to everything else to really understand exactly what happens and we we're always like up his butt trying to figure out like should we do be doing this should we be doing doing that he's like the number one expert on this stuff I too go up the butt to figure out what I need to do it's a great place to find information that's where everyone's hiding all their information so he asked for some clarification and He suggests like uh I don't know if you guys are measuring this right like here's the right way to do it uh so he gave a talk at reinvent last year about um so he did he put in like hundreds of hours into properly benchmarking the true cold time of a Lambda because you can't just go off of the metric that's reported because it doesn't contain all of it he has his whole system for for testing this type of thing um so he posts this and nobody replies uh so he's like okay let me just go Benchmark it myself I'm me and him are talking in the DMS at this point and we're like we know how Lambda works like we know that there there's not really a way to make it go faster there's like a small gap of like maybe there's one little thing they could have done but again just like that thing would have shaved off like one or two milliseconds like I just don't know if whatever yeah so uh he decides to go so he he streams on the weekends last week he was starting to look into it uh so he starts to go benchmarking and because AJ is so freaking thorough he did something that nobody ever does which is he went and read the terms of service that would be most certainly um you're you're deep in the weeds if you're reading the terms of services yeah so he saw that in their terms of services that it said that you're not allowed to perform Benchmark tests which I found funny so I retweeted it I'm always going to retweet anything that's like this but my actual perception of this was companies just have generic legal boiler plate that gets added in that they don't think too hard about so I don't think they're like explicitly being like no one better Benchmark our stuff we gotta keep it secret I just think it was like an oversight and understandably you know they replied being like we'll get this fixed I think Yo's in there and the replies uh I love good f open source reproducible benchmarking yep there it is we'll get this fixed okay good so they told AJ go ahead Sol reply right there solid reply yeah uh so the thing with this type of test is because it's cold start and AJ can't control versel infrastructure he's got to actually wait for the function to cold start so he set up some kind of process that like would monitor it over the course of a week uh to like you know trigger the function during when it was presumably cold and and measure so he left that running he was in contact with the versel team like the whole time they were like uh telling him you know ways that they wanted him to do it they had a whole back and forth and he was like AJ does everything by the book he's not like me yeah that's good he so he does that and then the results were exactly as expected you know they are slower than Lambda because it's just a Lambda function under the hood plus some additional booting he posted his results you want to I bet you I could just find the results right CU I remember seeing them yeah there they are right there and the part of me that finds is frustrating is if this is the first time this type of thing happened it's fine but this happens a lot where uh this company will kind of say something vague or unclear and someone else will have to spend a bunch of time like clarifying it they could have just told us that yeah obviously it can't be faster here's what we did like yeah there's no need to run this Benchmark we know it can't be f fter yeah say we don't know how much it's slower but we do know that there's no universe that exists where starting up a node process versus starting up a node process plus our stuff is going to be faster in at the end of the day yep exactly uh because again if you understand how LDA works you like know that there's only certain levers you have to pull uh so I saw that and I was like of course um then I tweeted I've been listening to Kendrick all week so I was very very hyped up uh is that this is this is like 70% of why it's happened Spotify just put me on this crazy playlist where I'm just it's just like diss track after diss track like everything just super hyped up he come in with the w w w it ain't fast enough then dude to get double wamp somebody double wiing is is pretty inappropriate like single W I can understand but double wiing that's way too much way too much Spotify for you my friend no no I took it too far and I got to like you know listen to some lowii or something for the rest of this week yeah good idea so I posted that you know can we do a quick pause right here quick pause uh for those that don't know the inside story about this during this time Dax was texting the terminal coffee group going I should be doing work right now but I can't because of Twitter so at this point you're going on a full like Twitter assault I literally sat down to do work and I didn't work for two hours I was at my computer is not working for two hours just just wamp and people yeah uh so if you look at the reply I like you know this doesn't matter like here's a reality so our own workload like our personal workload that we run on Lambda 3% of the total requests that it handles are cold starts and point of those three almost all of them finish in under like 800 milliseconds or like something like that so I agree that this doesn't 100% not matter but it's just not an area that's like this crazy amount of Focus right like any any system getting a reasonable amount of traffic you have any amount of users cold Stars start to like go down your list on things you you care about you care a lot more about like okay how is it performing once it's up um so I'm like this stuff doesn't really matter okay they're a little bit slower fine but like you know cold star are still a tiny percent of your your overall system um I just found it annoying that they didn't just tell us and they kind of like did this whole charade of of doing doing a benchmark uh and like my original tweet being like it's just this and I was already like kind of annoyed and then Tom kind of replied in here with uh I have it right now it's on the screen yeah this match Park is not fair um and they were asking us to or asking AJ to do a bunch of other things I don't want to for example the current Lambda doesn't start an HTTP server and doesn't go through the public internet but I mean why would why would a Lambda start an HTTP Server Like that's that that is already handled by AWS routing right like you've already a little complicated it's because uh there's like I'm trying to think the simplest way to do this if you are building something that is like a deep customization on top of Lambda it can make sense to start uh an HTTP server to do to like handle the request directly uh there's this whole extension system in Lambda to that's all based based off of HTTP it's just stuff that like that's technically how their stuff works but it's not how you would deploy your stuff because you have no need to do what they're doing um and the second part of it doesn't go through the public internet they kept really harping on this one too being like oh you can't you shouldn't invoke the function from a consistent place you should invoke it like from your laptop um but if we're testing cold starts like that's not relevant like the late the endend latency is not relevant if the initial claim was about CT starts like where you're calling it from just adds noise well it's not it's not that it adds noise it's actually a confounding Factor because you you can get different routes depending on where you're going and so you have to control like your actual like you have to actually trans like you have to track all of your interchanges you go through and if you're using your public uh you know internet if you're just using your laptop one thing that you most certainly have to do is every request that you're testing against has to have a mirrored exact same time request also uh to the other service so you actually have to be hitting them at identical times from your laptop there's all these things here you're going to have to do you're going to add in so much variability doing that you really truly do have to have some service that's not going to be changing much like you just want to minimize all possible interneting as much as possible because that because that is a wild claim to make because you it you really can't control a lot of this stuff like we had like I can't tell you the amount of bugs I had at Netflix that if you made a request at 700 p.m. at night rows would start missing on your Netflix home row that's because you're going from us West one to us East one due to like internet usage in the west versus the East and it's just like okay this is crazy like even trying to understand like the complexity of the Internet is just wild yeah yeah and and AJ talks a lot about that in his talk which is why in his benchmarks he invokes all these from another Lambda function in the same region so that's like you know minimizing it as much as possible um so he said that and I was like at this point I like I was like we spent a week in good faith like doing this whole thing uh and I was like it's kind of crazy crazy to say this benchmark's not fair uh if you want to test end to end like what your service offers end to end fine but that's like a completely different different test and you know there's some back and forth uh Mal stepped in a CTO of forell asked me to he's like please reference the original claim which I read as I bet you can't produce the original claim so I linked it yes was dangerous of imp is you did and if you go look into that replies on that thread is just some like really weird [ __ ] in my opinion right so he's like he starts to first he starts to say like he this is some just like weird corporate driil that just doesn't not relevant to anything oh this right here uh it it is weird you shouldn't you shouldn't do this get the reference and then just swerve topics you should be like okay yeah you're right that was misworded we should have worded it like this and then it would have been easy like we could have all left you know and been happy about it yeah and that's what I said I was like I ignored that and I just said you can just say you know someone so my read and I think this is maybe AJ's initial read and I think I agree with it um I think they just got excited I think one employee got excited and it kind of like overstated something totally reasonable happen sometimes you're hundreds of people your company you can't control exactly what everyone's saying yeah that's that's fine I just don't get why like then you let that go on for a week and have someone like spend their time benchmarking it so there's a bunch of back and forth here I don't know if it's worth getting into um I don't think it I don't think it was received well like I stopped engaging with this and a bunch of other people like you know yeah I saw kind of off the rails towards the end I I mean milky has a good one I mean mil is a guy that all he does is AWS and he can't understand the difference he's like no this actually does make sense that's a very benevolent way to read a tweet this it is rather intense like I I'm what what confuses me is just not taking the L and just saying oops I don't understand that like what what is the harm in saying my bad you Mr SST have you ever had the eat a little bit of crow have you ever been wrong on the internet i' I've always been right every single time so it's a for me you wouldn't know no I wouldn't know no I'm just kidding yeah I think it's like you can just be straightforward and like people move on and they don't care and it's actually not that big of a deal if I had to like theorize a little bit I had to like put on a conspiracy hat uh they have a big conference coming up in two or not conference like an event coming up in two weeks in New York New York or something right I agree it's really weird to harp on this when it's like not a big deal uh I say ECT maybe there's some kind of tie in to that they're going to talk about this in some way and this like throw a wrench in plan uh that's my again completely made up no no basis for that but that's the only like thing I could find to explain it did uh did you see Adam's resp I mean I'm sure you have I saw Adam's response to this whole thing uh can you clarify this one this one versel should limit who can tweet on behalf the company do you know where this came from I tried to go and find this so I try to stay close to the technical stuff so far there was like ACH bunch of other just stuff that happened also yeah um there was a threat of versell employees just kind of like really upset at the whole situation sub tweeting me saying like people just hate posting to like get likes you know the usual usual type of thing uh they're like they're bad actors they're acting in bad faith the reason JavaScript discourse is like degraded is because they're just talking about me yeah I mean you are the reason why it has degraded I hate to say 100% I'm that influential one person is that influ against H you should start a coffee company with that much influence you should start a coffee company yeah I'm pivoting a coffee because I'm tired of this stuff so here this is what Adam posted originally and I think a bunch of people replied being like Oh just make it to over vers so people can't be on Twitter or something okay yeah which is I mean I think Adam always has a very kind of he has very uh vegan takes very they're very level they're they're they're they're very nice takes I've never seen Adam really say something that's like frustrating or mean or anything like that he's generally had really nice you know responses to everything and so it is shocking that um people like the solution isn't that versel should try to control what people say versel should just take more of the Helm of trying to control the narrative to saying hey this is what it is I feel like if they were just a touch more proactive a lot of this stuff wouldn't happen because this is like definitely not the first second or third time it's happened on the internet this year yeah and and I think that's the tough part for me is if this is the first time this happened the way I'm reacting is definitely massively overblown but this comes after like years of just cleaning up after like the whole like like a year ago they were just pushing Edge compute on everyone I had just spend and when when they do stuff like that when they come into space and blast an idea like this other people in the space get asked questions constantly should I be doing this like what about this like how come you don't support this and you have to clean up that marketing well one of the Bigg I got to interrupt one of the biggest sins of that whole thing was that versell said either you can use Edge or nodejs it's just like yo dog Edge and no like those are two orthogonal concepts you can be both Edge and running a node.js process like that doesn't like where is this coming from Edge just everyone is on the edge because at some point it's the barrier between you and the customer like everything's The Edge if you really think about it it's just how close can you make that edge it's just ridiculous yeah so it's just like over and over over the that's why at this point I have like zero patience with this stuff when I see I just get immediately go to being frustrated um and yeah like people like look at that in isolation maybe they don't know the history and they're like oh this is like an over reaction like why you blowing this up but it's funny I was thinking so uh back before remix the remix team got acquired when they were on Twitter a lot yeah I would see them be really frustrated and I understood like I like understood okay I get their position and it is frustrating but I also passed like a level of judgment being like well they should you know not be like that now that I'm more in that situation I'm like like okay I I get it now I get what it feels like when you're just dealing with this every single day um but have like more respect for for that whole thing yeah uh I I have seen i' I've seen a lot of Ryan Florence being quite spicy in his replies you know like even when something's like a positive reply he then responds back with like yeah it would have been great if you would have collaborated huh it's just like damn Ryan yeah yeah he uh funny because he's trying to he's definitely he had a funny post um let me see I think he replied to one of Adams uh he's definitely on a he's on a new tear because he used to be a much different it seems like he was just frustrated before now it just seems like he's just leaned into the meming on and now it's just like great yeah yeah yeah but you know he still struggles so you can tell like look at this one me this I know I saw I saw this one with this one forel should be doing this and he's like oh I can't handle it I can't I like that one I have just seen the general frustration it has been with the RSC things because it seems like they're already so much of the research has been spiked out it is kind of wild that there's no collaboration between the two it seems like such an easy win yeah it's just like and at the end of the day like I don't I don't mind their company and they have their priorities and they like need to do things that align with the customer base they're they're trying to Target um but what I don't like is when they speak more broadly like another thing that happened this week was uh someone was running to like get another next sh like weird Quirk that happens oh yeah I saw that web Cody yeah um where he just trying to run it on a VPS on a $ VPS as they say and he was getting like a cloud flare err and that's really weird like why would you get a cloud flare when you're not even touching that stuff and it's because this product this framework next is really built around the idea of deploying to a very specific infrastructure and it works really well there and when you're someone working on this stuff you design for that infrastructure and that's fine yeah go ahead do that all day uh so our role is we try to that to work elsewhere because that's what our users ask they come they're like I'm trying to run next can you help me and we try to help them and that's fine like it versel doesn't need to do that like we can do that role but the frustrating part is whenever we talk about these challenges versel will come out and say no it's really easy to run everywhere that's like you're lying when you say that like you can run it no matter where where wherever you want like it's not optimized for our stuff but then you see stuff like that and like there's hundreds of little things like that that we just see every single day so again we're stuck cleaning up the mess cuz people come to use expecting it to all work and then it doesn't and they ask us why it doesn't work you know that whole thing are are you the one are you helping out on what is it openjs or whatever like the open next is our project yeah open next there you go yeah which is really I mean you have a lot of experience with the actual differences between when someone says it's really easy to self-host versus what it actually takes to self-host yeah exactly and that's like entirely Community run up at this point and like there's a bunch of volunteers that with every like patch Lisa comes out they do testing they built a bunch of automated tests things break constantly they like find little ways to work around it it's a big heavy effort and the reason we started is because there were like five disparate efforts trying to do this across you know different companies and individuals we got R together to focus in one place and it's been pretty successful but it's a lot of work so I find it very annoying when um versel says oh it's easy like that there's not a big deal because it minimizes the amount of effort that it takes and these are like nextjs fans I'm not a nextjs fan these are people that love next so much they're trying to use it wherever you know their company makes them deploy stuff yeah they love it enough to actually put Blood Sweat and Tears into making something work with every single release which is which is a lot of effort so the question the real question is is no is open next uh faster than Lambda yes or no oh yeah it's uh two or three times faster according to benchmarks that we did but we won't release what are you scared no it runs about as fast as Lambda as most things that run on Lambda do so all right well hey thanks for uh coming on here in clarifying because honestly I could not figure out where like I couldn't I I could not understand that path it was really the AJ part that I think I was missing with this little in between and the inability to actually you know um the inability to do the performance testing then doing the performance testing then all the offline talking and all that that went into actually creating a proper Lambda and then after doing all of that still being told it's not Apples to Apples when it sounds like it's as Apples to Apples that is uh normalis possible Right like it it' be it'd be if you are testing two different kind of ways to do something you just try to test the incommon features as much as possible to prove which one's actually faster you don't make you don't hinder the different version just to prove that it's as slow you're like I know that's the point of the different version is so that it's not as slow this is the entirety of the test yeah and I think AJ's in chat right now if you want to shout him out oh yeah we just got done I actually don't think I'm allowed to shout him out again for another 30 minutes but we already shouted him out uh you guys should all follow him he's uh I guess like I said as far as I know the most knowledgeable in the world on on these like deep details that not many people dig into um okay one last thing uh Adam was dying that you did not promote your podcast beforehand can you please promote your your podcast no I'm kind of embarrassed about our podcast because Adam's on it too much vegan energy yeah okay Adam uh what is our podcast tomorrow. FM uh give it a listen we talk about this kind of stuff and also other stuff we actually don't even talk about tech that much anymore but yeah you you don't even invite me on you're welcome to come on okay do you know how hard it is to pin you down you're like just the slipperiest guy in the world like you got so many things going on also I have to ask you you're like system for time I just don't understand it cuz you messaged me yesterday being like like let's do around noon your time I was like cool I live in eastern then you said two I said two your time no you said's time by the way it's not two my time it's it's it's one my time oh no that's for our team meeting for the team said you messaged me about this you said noon my time I was okay cool that works then you posted on Twitter noon Montana time but then you just came on noon my time okay facts you're right you're right I did scre this out okay I I admit that so I always block out like you know four potential hours whenever we have to meet because it could be quite a wide range just embrace the Lord's time okay it does not happen on your time okay I'm trying but you you you flipped it when I think I understand you you just flip it but here's the thing if you anytime you want to come on the podcast 100% you just randomly just tell us any day like me and Adam are pretty flexible we'll just we'll come chat okay okay yeah because I I like your podcast you know I think it's pretty cool yeah we have fun my time to catch up with Adam on whatever his vegan progress has been for the week how many beans does he eat per week go sometimes it's hard I does he eat beans I feel like he's not just a vegan he's like a specific kind of vegan which is like even more narrow oh okay he's like the epescatarian of vegans yeah exactly like I'm a raw vegan I don't cook my food I did I used to work with a person that would only eat like monolith meals so it's just like he'd come to work with like three lbs of blueberries and like that's his lunch was just a big ass handful of blueberries or it would be like just mangoes he'd eat like 18 mangoes that is like I feel like good diet doing that's a lot of sugar that's what I said was it like that was his personal preference or was it like a health thing like you know what apparently it was a health thing to eat just like just like these mono meals I I'm not saying whether it's healthy or not I'm not even making a judgment as to the health I've just never seen anything like that before right cuz I I came from Montana which I didn't even know vegans were actually real I thought it was like a joke the internet makes and then like now I'm meeting vegans for the first time and then like now I'm even like even vegans who look at other vegans like down like look at those practically meaters over there it's just like crazy i' had a friend growing up that basically only ever ate brown or red food like Foods in that that hue which is meant he just ate a lot of meat and nothing else does that does that mean he eats medium rare steak constantly yes nothing else just hated vegetables so was he did was he actually like was a ketosis was he a keto guy I think he was accidentally in ketosis for most of his life yeah just just not on purpose but by accident it worked out for him I think he's like been in good shape good health okay yeah I I get it I have a friend who uh almost died on the climbing accident and the result of his almost dying in a climbing accident is he's required to be in ketosis at all times oh interesting they have a brain injury yeah like M almost died brain injury all that like he can't look at his phone for more than just like a few minutes a day and it has to be on black and white all these kind of things uh I've seen him have a couple mini strokes just like talking and then like unable to start talking he has to like sit down and all that and if he he has to maintain like a very strict meaton diet yeah yeah yeah I've seen that helps a lot with that's I think that's how it was originally discovered it was like for seizure or yeah control that's wild we have a friend of a friend who died by doing keto and got revived by paramedics because somehow he let his like electrolyte balance get so low that he just literally died he was like medically dead off of doing keto so I know you were thinking about doing keto I don't know if you started already so uh just be careful drink water and and like salt and stuff don't worry I like salt and and those things a big fan of sodium MH that's great big big fan of potassium you know don't laugh bro what the f okay it's like kind of funny to do like and then literally die and get revived because you only ate meat like it's it's a little funny man electrolytes it's what plants crave all right this has been ridiculous this ending is even more ridiculous this is going on YouTube I hope you know that this this story will go on YouTu wonderful okay all right all right Dax I will also put all of your links your your Twitch link your THD RX no dxr dxr gosh it's it's impossible maybe I'll change it just because you remember the other way it's like the the worst part is is that I remember it the other way so now when I re-remember it I go ah it's the opposite and then I now like forever into this like incorrect memory you're in that trap no you're never going to get it you're [ __ ] dude I'll never I'll never get it all right take care all right see you