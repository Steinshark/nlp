Alright, it looks like it's working. since I'm using a little bit of an older stream doesn't always start right on time. But and I'm seeing that on my other device Welcome everybody! A week or so ago--I was thinking about the fact and I also started doing some live streaming I thought "Why not just live stream how If you don't know about it, this is Ansible on Amazon, but right now until the end of March may or may not be able to extend that to another But thank you for joining the live stream! I that's not good...is anybody--okay, works As I said at the beginning, YouTube is that I have on my older laptop, go ahead and put them in chat and But thanks for joining the live stream! in the book and kind of start from scratch, and don't even have it installed and go from Preface. And I will grab out my handy little nice and flat makes a good bookmark. I also have a Pi A and all these little It's pretty fun using them for testing pretty headless, if you're using them and we might get into that later in this In the preface of the book I kind of go through Ansible in...2013, I think it was, and the reason lot of projects that had the single server to having projects that had five, ten, fifteen that had servers that had similar requirements. which a lot of people and a lot of companies you start realizing it's hard to manage all tools that existed, Chef and Puppy were out, and a lot of people had shell scripts or run anything really, really easy and simple. It and running it on your server, especially So as we made that transition, Ansible came because instead of having to know kind of some you could basically take a shell script or "playbook" as we call them, and you wouldn't logic or anything. But you could make it so In the book I start from the perspective Linux administration before. This book is written a junior-to-mid-level Linux sysadmin, and you go to automating large-scale infrastructure. And then Docker, things like that as well. And in the book and things, but one important thing is, I have in the current published book version--it's important gotten in the past, you buy the book and then you know in the best case scenario, a year or And the reason I push people to buy my book on book updates free forever, and I've already with hundreds--or I think now of thousands of bugs or issues in the code in the book. And the examples in the book in continuous integration, changes something, I know that that it's broken book from Amazon, a paperback version, you can just go to Leanpub, search for But it's also important, if you're looking at the version 1.18, there's a lot of changes the errata on the book's website which is there's a link to the errata and changes page, in the book. If you have the ebook, you you'll have that. If you have the paperback, In the introduction chapter I talked a little and also DevOps--I think it's funny partly because DevOps was beginning to And also like I said earlier, put stuff in it throughout this video...and [viewer] devices--I probably won't get specifically but I will try to find ways to point you might have to do with networking, Windows, But in the introduction I mentioned that DevOps is DevOps engineers, other people say that DevOps and in the book I make the point that DevOps to position or a role. It's the philosophy that together, and that's becoming even more so today and things like--you know, with Docker containers and with applications using a newer kind of micro with split up code base, all the different development has to account for the operational So in that sense, I think it's it's a good to be able to have development and operations be a need for SREs and sysadmins who are sure applications work, and there's developers but it's it's more and more integrated And then with Ansible's history--Ansible started was initially kind of like an offshoot of a run commands on multiple servers. And an if you don't know what that is, and if things with Ansible if you Google it, I think like "Ansible Fest", which is funny because we and so when you search that timeline on and then other people partying who are But "Ansible" is a device that was in the book remember when it was published, but it's a, the Ansible is a device that lets you communicate universe without any delays, not even the speed idea was that you can instantly communicate with a CI machine or from Ansible tower or something communicates with them all. And Funk--and Ansible run commands on servers using an inventory, But some of the goals of Ansible are that and secure. Those are the things that I easy to learn and pick up quickly, especially of basic automation. It's complete with it--and that's an interesting The idea is that it has its "batteries included", like 4,000 or 5,000 different modules that do with Windows, with Linux servers, even Mac also efficient, because you don't need to install Ansible uses SSH, or--we'll get into it--other servers natively without having to the servers or having an open port on your also secure because of the fact that and there's minutia that we could get into trivia is that up until Ansible 2, major releases let's see--up until version 2 it was Van Halen, You might not see that day-to-day using it I actually named some releases of another project I exhausted all of the Tron original 1972 using the songs from Tron Legacy from Daft Punk. Ansible was founded a little bit and then Ansible was actually bought by Red Red Hat was acquired by IBM in 2018, I don't know. Time flies, and the past few Anyway, so at this point Red Hat is in charge the Red Hat ecosystem, which makes sense everything in the world of Linux And another thing to note in the introduction in this book and in this video series are linked sample section, this is a GitHub repository, it you can fork it and do whatever you want and on the readme it has a mapping of which working on moving some more examples from the book And hello to everybody saying hi! It's good a good representation from all around the There's also some other things with Ansible it's good to know about. "doc"--"docs" dot Ansible dot com. It for pretty much all of the Ansible ecosystem, My book is not meant to be like a documentation examples to get you started quickly, but the it has information about Ansible Tower, and networking. I know someone there's documentation for it, and also these different things are documented here, and it's a great resource. There's a great documentation, they make it one of the best There's also a mailing list, Ansible Project or--not GitHub, Google Mail--Gmail or whatev--Google are in the Ansible Community Guide, which is on for asking general questions or getting general mailing list. These are good resources, and you put out an email and you'll never get some good responses, sometimes from Someone mentioned "IBM acquired Red Hat saying "Hello from Aquia"--hi!! That so it's good to see some good former co-workers guides. If you Google--if you go to the Ansible all the different things you can do in Ansible There's also the Ansible blog, which is "The maybe? Maybe not. Yeah, well..."Ansible The Inside Playbook has a lot of good resources date when there's major changes in the Ansible Ansible collections, which is a big change. For this video series, I'm talking about Ansible Ansible 2.10, some things will start changing with something about "batteries included"--the way that so that it's mostly "batteries included" so that you can kind of get Ansible Anyway, so let's move on and get started into basically how you're going to do your first how it interacts with your servers. And the reason that come into Ansible or Chef or Puppet or any that they have what we call "snowflake servers", gonna get back to my page here. A snowflake or you have manual processes involved in managing to a clean state with [just] a click of a button bunch of steps, or you use a runbook to A lot of times, the motivation for get the ability to have servers set up and or build &lt;fix&gt; or images for your servers especially if you need to scale up and scale jobs that need to be able to spin up new servers I mentioned earlier there's CFEngine, Puppet, out in the time that Ansible came into came out around the same time as Ansible and although there's also plenty of differences there, two of the more what I would call the the modern One of the things I liked about Ansible scripts and shell commands and things that I them into Ansible and let Ansible run them for modules. I didn't have to learn Python, I all I had to learn was how to And the first thing that you need to do to be ton of different ways to install Ansible, but the that I've installed Ansible on, and my local "pip" which is a Python package library manager, you should probably start using Python But there's still cases where people use Python 2, the Python 2 version, or "pip3", which I'm using say pip3 install Ansible, and that's going to It's gonna install the Ansible command, the which we'll get into a little later. It's and documentation commands, all the things and it installs Ansible plus The first time you do this, it might take a and if you have problems with it, sometimes your computer. You might be using a Python it has issues with permissions, and you might and that might or might not make it work, but particular video because we could go down a deep Hello also to--someone's from Argentina, the my Netherlands soccer jersey today, shirt. But maybe I'll wear that So Ansible is installed now, and I installed I can check and make sure that it's running. And about how Ansible is running, which package it's version is that Ansible sees, and if you're I'm not a Python developer, but if you're a or some other tool to manage your Python helpful to make sure you're running in the right because in Python you might have like, five Someone asks about Miniconda, Anaconda, all and I'm sure a lot of people on this and if you're not you might not want to dive management. And I don't particularly--I so on the Mac it's "brew install Python 3" or Python environment, and I'm happy with different things. If you're a Python developer, The next step here is I want to start running a in my Amazon Web Services account, I set up because I you know, I'm saving money. and this is its public IP address. I also port 22 open, but you can--this could be a server it could be a server running in your house, it is make sure that the server's on and has SSH In Amazon, if you want to log in to that key pair downloaded on your computer and added right now using SSH. CentOS is the default logged in to it, and you can also see that which--I don't particularly like Charter, but I'm gonna exit out of that server, and that's all that Ansible needs to do There's other ways to connect to other Windows and all that, but you know, this I'm going to be able to connect to that server with this SSH. We've gotten Ansible installed. If is the easiest way. If you're on Windows, there's I recommend using the Windows subsystem out soon. If you're watching this it might actually be out by now! But it's that Linux subsystem environment, because so you can install it the same way using pip package using pip, but once it's installed There's also a lot of different ways to the book actually goes through. or look online at ansible.com. It's in the The first thing we need to do to get Ansible know the IP address here. We need to create an "Hey Ansible, here's the servers that I'm working I'm going to go into my site's and make a new folder called "Chapter 1". and I'm going to make an inventory file. So gonna open this folder in my text editor, which is It uses--by default, inventory files use an but it's close enough. The way it works is you I'm going to call this "example", because it's beneath that group. So in the example group I just Daniel says in the chat, "I recommend first step ;)", yeah, that's an So here's my inventory file and this is servers called "example", and in this case this IP address. You can put an IP whatever it is, however you reach I'm gonna save that inventory file, and now do is I can say "ansible"--oops, I think I inventory file to it, so "- i inventory"--that your servers. And then I can say "example", and then "-m ping", and this tells Ansible to then I'm gonna say use user CentOS, When Ansible comes back it says it was there were no changes made on the something I'll mention in a bit--and when It also is telling me that it found One quick note is that I said that Ansible's special to be installed on the servers. a version of Python, to be installed on the out there have Python on them already so this server out there that doesn't have any Python that that those servers have Python available because it it sends over a Python module, it Anyway, we've just used Ansible to communicate but Ansible actually uses SSH in the this is kind of annoying that I had to and I had to put in a username. You can actually I can put Ansible SSH user in here to to tell it an "ansible.cfg" file, which I'll do now to give I'm going to create an Ansible..."ansible.cfg", defaults, and I'm gonna set--I think its So now I don't have to specify that inventory put into your Ansible configuration for "Ansible configuration". The I'm gonna save that and close it, save the I put in here "-u centos". You can also specify I'm using the SSH key, or what is it, I forget key pair, or an SSH key, to connect to the server. you can actually do that, and I think the You can use "-k", and you can also "--ask-pass" instead of having it in your prompt and in your If you're not familiar with them, there's some Ubuntu's documentation, because it's the most that you have a private key on your computer, so that you can connect from your computer to that which is a little easier to use and also and it's more secure than having passwords It's nice that we can see that we can useful. One thing that I actually do and "ad hoc" is Latin for "to this" I took Latin and I'm already forgetting But anyway, these commands basically and so I'm going to run the command "free memory space descriptions on on the server. but it has a gig of memory and has 800 MGs or 750 Sometimes when I'm diagnosing a problem I might is one of them overloaded, is one of them that kind of thing. You can also--a lot of a set of servers, because sometimes and probably half the time it's due to you know, Guinness, "it can't be Same thing with dates. If the date gets out have weird problems with databases and other me. Then you have to figure out why that server's So you can run commands using Ansible that way, any command that we want, and you might notice ping" and I didn't have any "-a" argument. "-m" arguments for the module. If you don't pass any which is the command module that But there's--Ansible, as I said, and you can use any module that you want on What is in the example file again? Examples is a this command, the first thing is Ansible, you're or on a set of hosts. "Example" here so that's "example" here. I could also specify but I'm just saying whatever servers are in those servers. This is the argument passed you don't specify a module, and use CentOS to settings are in my SSH config and use any So that is that, and we've hit the end of was hoping we'd be able to get through Chapter And [viewer] is saying "You haven't the main thing is you can pass--I could pass "-m defaults to the command module if you don't the exact same thing as the above command, Of course it's being a little slower, the stream and my CPU is starting to In chapter 2 I start talking about ways that doing it in the cloud. A lot of times, like if be able to do this stuff, and you can work very Internet. You probably shouldn't be on airplanes example. But if you're in a local environment, than working through the cloud and interacting So I usually use Vagrant to build virtual machines on in the kind of revolution of configuration have necessarily, like, a development set of automating them, and then production. They or they would work on a new server automating it, and be very careful with it. So you're still I like to always start by building a local and then I start automating inside I delete everything and then I start it up and then I keep doing that, and whenever I come Vagrant is extremely helpful for that. Vagrant's extremely useful for building local virtual to test them and make sure they're working. And [viewer], sorry if I'm butchering your name there, "-k" so that you can use passwords. There and in those cases, yeah, you do need be able to send in a password. You can so that Ansible doesn't need to ask you [viewer] mentions, from what I was WFH, wash your hands". Yes, make sure that For anybody watching this video in the next few years, but still, if you really this video was made in the midst of one with all this coronavirus stuff going was getting was when I was noticing what was they canceled ALL of the professional sports in And now it's kind of sad, there's a lot in very bad ways for various reasons and so I pray for them. As I mentioned so I'm gonna pray for you whether you like it or and I mean things WILL get better, but hopefully human toll on it. But that's part of the reason I also use Vagrant most of the time different ways to use Vagrant, you you can use it with Docker, you there's a lot of different virtualization tools But I use it with VirtualBox, mostly because or Linux. Even if it's not necessarily the most it works really well, and there's tons and tons There's base boxes for every known operating of different ones that you can download from We're not going to work on building our own a bunch and use a lot of them in this book CentOS 6, even, I still maintain one for 18, and now 24--whatever system that you chances are there's a base box available To get started with Vagrant, you or if you use a package manager like Homebrew Then you also need VirtualBox, which I already have those downloaded and installed, a little longer to install. I didn't want install on this stream. But VirtualBox and so you want to make sure you always because sometimes like when a new version of things can break, and if you're on an older So once you have those downloaded and to make sure it's installed, it's version 2.2.7, them to build local virtual machines. I'll go this, and for the first server that we're gonna I'm going to make that in a new directory, so make now, Chapter 2, and what I'm gonna do is I'm creates a new Vagrant environment using what's Vagrant about what kind of environment you want, networking to be set up, all that kind of stuff, So I'm going to say "vagrant it's going to create a Vagrant file. and I can close that, I don't need it and you can see the Vagrant file it And vagrant files are in Ruby. You don't really but if you want to do a lot of powerful things syntax. But at it's very basic level, the Vagrant CentOS7, and you can find more boxes by and of course since I closed that browser Like I said, you can find boxes for pretty so if we wanted to use Ubuntu 20.4 which is you can find that. Here's my box that I can use any kind of box that you want use CentOS 7 just because it's stable and will since CentOS and Red Hat versions And that's all it has in this file. It just says I can run the command "vagrant up" and that's on your computer already. I think I already have to redownload it, and then it's gonna start a While it's doing that I'm because I noticed somebody's "Default file/directory structure to your not in this video, but as we get into that. But at a very basic level I usually usually called main.yaml, and then a readme to use the project and what it's for, and if you those will all be in there too. But I'll get "IoT-devices"--there are ways to do it, you If your computer can connect to another chances are there's already a module or plugin for plug-in. But if there's not, you could write one if your computer can communicate with it, Ansible you might also need to be able to run commands on you know, we can can talk about that later. You see what other people are thinking, because people "Playbook to see VMs and see what things is not necessarily tool for monitoring, but have much space you could use those ad hoc or--we'll get into this later, again--have a dynamic your your hosting system or like EC2 or vCenter, run that command and give you the output. But Anything else..."If you can script you can do it yeah. If your computer can do it already, Ansible to do that that you just need to install, can do inventory via other mechanisms. which is not truly INI, but it's very and there's other ways to do it too, and DigitalOcean and all these different posting Someone asked "What does sublime do"--or "open ." opens the file in the finder wherever I need to get into here and find out what's Sublime Text, that's my editor that I use, So here's here's this directory. If I say Anything else? Yeah and again, if you want that it shows up with what the default price drag the slider--and you need to have JavaScript number of people that don't have JavaScript pain just so that you can you can protect the you have to have JavaScript enabled, and I think that's all the questions that I saw really I answer anything I missed, but we have a VM a shortcut that that Vagrant uses to let me SSH sets up a host-only network, so you can connect can't see this VM, and this connects me to SSH. if I wanted to just use SSH itself, I going to give me some information about how It basically gives you the the different config file to be able to connect just by default it doesn't set up, I guess, a like 192.-something, or I think on it's a local private network. It doesn't do that But anyway, so now I can I can also do "vagrant destroy" deletes the The next step that I'm gonna do though with this Vagrant VM, because I want to develop a playbook that works on a CentOS that playbook. Vagrant lets me--without having I can just tell Vagrant "Hey, I run this playbook on the server", and And to do that, I just go in the Vagrant file--I'm don't need, just to make this this Vagrant file a little configuration, "config.vm.provision" use a lot of different provisioners. You Puppet, Ansible. There's other ones too, "do [ansible]"...and then I'm going is "playbook.yaml". And now you might be we haven't created it yet! So I'll go ahead and and in the playbook I'm gonna make a get deeper into playbooks later, but for now It's the same thing as running Ansible commands, but I'm going to describe them in a format that First I'm going to say the host that I want available, and Vagrant will intelligently tell which in this case is just this I'm going to say "become: yes", and I'll and I'm gonna give Ansible a list of might be used for database or something, so so I'm going to say "Ensure NTP I'm gonna use Ansible's yum module, and I'll "name=NTP state=present", and somebody I'm sure chronyd by default, we can talk about that "Ensure NTP is running.", it's not very useful if I'm gonna say "service: name=ntpd state=started So I have this playbook, which I'll describe playbook against the server by running "vagrant any provisioners you have defined in the Vagrant file so it's probably not actually Yeah, it didn't do it because I haven't actually So Vagrant provision's gonna pick up the fact that gonna grab this Ansible playbook and kind of put it, and of course it's gonna throw out this little if you ever see it using Vagrant. I actually have But it's going to run these these two tasks get a little bit more into playbooks in probably at this point, but the playbook is basically a list of plays. This is one play, that starts Ansible what hosts it wants to operate on. In because that's the host that it's operating on, I also use "become" because this task, the yum it needs to be the root user. The basic user that and it doesn't have the rights to install packages So "become" says "Run this playbook as sudo" and by default it uses sudo. There's actually systems, so Ansible has plug-ins for that too. it runs this task, which uses Ansible's yum and you pass it a name of one or more it "state=present". I could also uninstall also upgrade modules using "statement=latest", second task--let's see...well that's annoying. That is kind of strange. I wonder if something's installed today, because I've been installing and task uses the service module Ansible's service it's supposed to translate behind the scenes, this ntpd service started. So I want it to be running Yeah, that's the problem, I had a typo in my sometimes you'll get with starting out in Ansible, sometimes and you might end up realizing later But anyway, this task uses Ansible's if it's running with sysvinit or systemd and it makes sure that the service is running Now something I haven't mentioned yet our Ansible journey is idempotence. I think really in a lot of dictionaries, but the idea is you can run it once or a thousand times and that it makes all the changes. So you could it showed that this task resulted in a change, one thing changed and there's also something that but the second time it didn't report a So Ansible checks, "Hey, is it already installed? and it reports no changes. So this third one, something did change, but it still says that this using Ansible's modules that are intelligent not make changes, this time it should report no There's three, three okay tasks, no changes, with with this VM right now--you can look up like crazy right now. Whenever you're running it's not very good for an old laptop. But you and this is very helpful because later on You can actually have play books like like run it every day or run it every hour or run can verify that nobody's accidentally changed this changed". You can flag that in say "We need to check on the server because of our automation", that's something Similarly--and this is way later on--Ansible Kubernetes cluster, running your applications to in tandem with Kubernetes, and you can do So idempotence is important, and that's one reason it's good to always use because that way you're able to rely on the fact Somebody also popped in to the live chat and I think I actually have that somewhere in or something. But you can go back Let's see. So going through the playbook in the also another word on idempotence. So you know command you can just say "command: yum install -y but only for the first time. The problem is if going to run this second task, and it's going to Ansible or whatever other system doesn't It probably didn't if NTP was already installed, enough to to output something that says So, if you wanted to make this idempotent and in yaml this little bar here means and you can actually inline a shell basically check if if this is actually then" "yum install -y ntp". I could actually to be able to determine if this changed or not, it's not immediately obvious unless you're like, vs. saying "Hey I just, I want to make So that's one thing with playbooks that's nice example in the book of turning this into an like eight lines long, and it's not very--it's just Until I learned about Ansible, I was actually were somewhat itempotent because I liked being but being able to maintain that, it was really Python modules that are pretty well tested all that and abstract it into these statements if you're somebody who likes having fewer lines I can take out the name comments here, and this is run it the same way and it would work the same. many times, and I believe it--it's best have the So Ansible lets you name anything including place, and now it's obvious what the intent of this The other nice thing is, if you don't and you're like "Okay, I don't know and see exactly what's happening, but it says "TASK" and then it has the name of So it's better for the output, it's better and you can also name plays Setup NDP on all servers.", and now So right now we're going to be dealing and that's what most play books will be, plays in a play book, and it's good to name them [viewer] asks, "How can I help I mean definitely if you're buying the that's great, that would be awesome. There's o'clock and since I finished this task, here, destroy" because I don't want to have this But we have a playbook running. Next week usage of ad hoc commands, and we'll get a lot deeper than this really simple example. But to that question about "How can I help, going on even if I end up in some weird GitHub sponsors...yes...somewhere here... You that would be really awesome to see. I have in helping with all my open source work. In I maintain 200 or so projects on and the more sponsors I have, the You can also support me on Patreon. Another on YouTube--if you subscribe on YouTube that to get a little bit of ad revenue. It's like you know? And there's also a notification I hate notifications, I don't recommend it, but And you can also hit the like button on this I guess. But you know, I would say at this point main reason I put out the book for free and I'm people that aren't doing so well, and I hope that, to take advantage of whatever you can for free pay it forward, that's great! If not, you know, I "How can you get the physical book?", someone you can buy it on Amazon--so there's three and on Leanpub and iTunes you can get book paperback it's available on Amazon and should be that you can still deliver by April 24. I know book has missed that cut, and you can get it Any other questions or notes here? things. I'm using Sublime Text, and it of different languages. It also I will get into that later on in the series, which But Vscode has has good support for Ansible and tools, basically any editor does yaml files these Anything else, let's see..."Thank you", and asks if--and again, sorry if I butcher your name, I'm one of the worst people at reading so it's no offense to you--but can I do alternate but i'm gonna make sure that I record all of them. within minutes after I finish the recording, and and I'm going to put them all together in a So please feel free to look back at these if you liked the video, you can hit the like if you're interested in this series. I'm gonna thank you very much, and right at the We will probably get into that as well, but that thank you everyone for being on this stream, stream, and hopefully you guys are doing well! As definitely try to reach out to each other not have someone at their at their residence even if they do--you know a lot of us, if we have nice to be able to talk to somebody who has the out to your friends and co-workers during this avoid getting near other people! Let's conquer