Welcome to Jeremy's IT Lab. This is a free, complete course for the CCNA. If you like these videos, please subscribe Also, please like and leave a comment, and of videos. Thanks for your help. In this video we will cover all you need to or FHRPs. This isn't the name of a specific protocol, FHRPs you should be aware of for the CCNA. Let's check the exam topics list. Here it is, topic 3.5, 'describe the purpose there should be an 's' on the end there. There is no mention of configuration, so you any of the FHRPs for the exam. However, in this video I will show you basic can try it out in the next lab video. Even if you don't need to know the configurations will help you understand how these FHRPs work. Here's what we'll cover in today's video. First up, I'll introduce the purpose of Then I'll introduce three different FHRPs. HSRP, hot standby router protocol. VRRP, virtual router redundancy protocol. And GLBP, gateway load balancing protocol. It may seem like a lot to learn about three just need to be able to make basic comparisons Finally we'll spend a few minutes learning router protocol. After the quiz at the end of the video I will for CCNA, a set of practice exams for the I studied using ExSim when preparing for both that you do too. To get ExSim, follow the link in the video Okay, let's get started. I used this same diagram back in Day 20 when the concept and importance of redundancy in For example, if there is only one connection failure or something else, these PCs will In your home, losing Internet access for some a disaster. For most modern businesses, however, it would So, we can use redundant connections to the Notice I've added some device names and to make things easier to talk about. Now if this connection fails PC1 can use this This could be, for example, a slower and cheaper connection is recovered. But let's stop and think about this, because In this network, let's say R1's IP address gateway. So that means each PC is configured with the So, anytime these PCs need to send traffic it to the default gateway, R1. But what happens if R1 goes down for some Fortunately, there is a backup router connected But there's a problem here. Can you identify the problem? Pause the video and think about it for a minute. Okay, the problem is here. The PCs' default gateway is still set to Although R2 is available as a backup, the they should switch to using R2 as their default If a PC needs to send traffic over the Internet, to R1. So, how can we cause R2 to automatically become be used? That's the role of a first-hop redundancy Here's a brief explanation of FHRPs from 'A first hop redundancy protocol (FHRP) designed to protect the default gateway used to provide backup for that address; in the backup router will take over the address, The name 'first-hop' redundancy protocol 'first hop', the first router in the path traffic to. Here's how FHRPs do this. The two routers share a VIP, a virtual IP You configure the PCs in the network to use instead of the actual IP address of R1. Now, the routers have to negotiate their roles How do they do that? They send multicast 'Hello' messages to Okay, so what roles did they negotiate? Well, one of them, let's say R1, will become The other, R2, will become the standby router. Note that the actual terms, like active and used, because as I showed you before there So, R1 is the active, meaning it will act R2 is the standby, meaning it will not function If R1 does fail, it will automatically take So, let's say we set up our FHRP here in traffic to a destination in another network. Here's what PC1 is thinking. I need to send traffic to a destination in My default gateway is 172.16.0.252, but I I will send an ARP request to learn the MAC I haven't mentioned ARP in a while in this the MAC address of a particular IP address. In order for PC1 to encapsulate the packet it has to know the default gateway's MAC So, PC1 will make an ARP request like this, This is 172.16.0.1. What's your MAC address?'. Remember that the ARP request message is broadcast. So, it will be sent over the network like Fortunately spanning tree prevents a broadcast So, both R1 and R2 have received the ARP request, 172.16.0.252, the one in the ARP request. What happens now? Which will send the ARP reply? R1 is the active router and R2 is the standby will send the ARP reply. And that is correct. R1 will send a unicast ARP reply like this. 'Hi 172.16.0.1. This is 172.16.0.252. My MAC address is...', and then it will That's right, not only is a virtual IP address Each FHRP uses a different virtual MAC address, So, the ARP reply is sent to PC1. Now PC1 knows the MAC address of its default So let's say PC1 needs to send some traffic server by the way. What will the source and destination fields The source IP will be PC1's, 172.16.0.1. The destination IP will be the Google server, The source MAC will be PC1's MAC address. And the destination MAC address will be the The frame will be sent to R1, and then the Now what if R1 goes down? There is no default gateway for the network. But after a few seconds, R2 will think 'I from R1 recently...I will become the Active So R2 is now the active router. But how does it tell the other devices to Note that the end hosts, the PCs, actually The entry in the PC's ARP table is like to the virtual MAC address. So, what needs to be updated to make traffic The answer is the switches. R2 needs to make the switches update their Remember how switches update their MAC address When they receive a frame they check the source the information in the MAC address table. So, R2 needs to send frames with a source To do this, it will send 'gratuitous ARP' Gratuitous ARP is probably outside of the explanation. Gratuitous ARP messages are ARP replies sent Normally ARP replies are sent in reply to ARP reply messages are sent without receiving Here's another difference between gratuitous The frames are broadcast to the MAC address Because they are broadcast, all switches will table. So, R2 will send gratuitous ARPs like this. They will be broadcast throughout the network, a broadcast storm. The switches will then update their MAC address SW2 will learn that it can now reach the virtual the same thing, and so will SW3 and SW4. Now R2 is the active router, and all of the Let's say PC1 wants to send traffic to the The frame and packet are exactly the same Source IP is PC1's, Destination IP is the destination MAC is the Virtual MAC. However, this time the frame will be sent the Internet. Now, what if R1 comes online again? Will it become the active router once again? No, it will become the standby router. Like I said about the DR and BDR in OSPF, The current active router will not automatically router returns. However, although this is the default behavior, R2 and take back its active role automatically, Okay, so that was a basic overview of how I haven't talked about any specific FHRPs to all of them. Before moving on to explain a few specific A virtual IP is configured on the two routers, IP. Each FHRP uses a different format for the addresses in the next section. An active router and a standby router are Again, different FHRPs use different terms, setup, with two active routers at the same Next, end hosts in the network are configured The active router replies to ARP requests destined for other networks will be sent to It functions as the default gateway for the If the active router fails, the standby becomes The new active router will send gratuitous their MAC address tables. It now functions as the default gateway for If the old active router comes back online, the active router. It will become the standby router. This is like the DR and BDR in OSPF, they even if another router is configured with But, in FHRPs you can configure 'preemption', its old role if it comes back online. Okay, sorry for the wall of text. Before moving on to a few specific FHRPs, once more to make sure you understand the Now let's move on. N ow I'll give a brief overview of The functionality of each is very similar, sure you learn these details for the exam. First up, HSRP, Hot Standby Router Protocol. HSRP is Cisco proprietary, so it only runs You can't run it on Juniper routers, for In HSRP, an active and standby router are These are the two terms I used previously, terms. There are two versions of HSRP, version 1 Version 2 adds IPv6 support, and increases You'll see what a group is when we configure In our example today, there was just one subnet, But in situations with multiple subnets and IP address for each subnet, because each subnet Each of those virtual IPs is configured in Anyway, as I said you'll see how that works Remember how I explained that the routers hello messages? These are the addresses used. 224.0.0.2 for version 1, and 224.0.0.102 for It may seem not so important, but try to remember Next up, the virtual MAC address formats. These are tougher to remember, but make sure Use the flashcards, try writing them from them. So, version 1 uses 0000 0c07 ac, followed So, in my previous example let's say I configured If using HSRP version 1, what would be virtual It's 0000 0c07 ac01, because the group number Now, HSRP version 2 uses the format 0000 0c9F Note that 3 hexadecimal digits are now available available. Anyway, if group number 1 is used, what would 2? It's 0000 0c9f f001. One last point, in a situation with multiple active router in each subnet to load balance. Remember what I said in previous videos about You can configure a different root bridge the switches. Well, when you configure multiple HSRP groups, a different active router in each subnet and For example, R1 could be the active router be the standby in VLAN1 and active in VLAN2. This is probably beyond what you need to know the concept. Let's say VLAN1 is assigned to hosts in PC1 and PC3 are in VLAN1. R1 and R2 have their own IP addresses in VLAN1, which is used as the default gateway of the R1 is the active router and R2 is the standby Then, 172.16.2.0/24 is the subnet for VLAN2. PC2 and PC4 are in VLAN2. R1 and R2 have their own IP addresses in VLAN2, They also share the virtual IP address 172.16.2.252, subnet. R2 is the active router and R1 is the standby Now traffic can be load balanced over the R2 as the default gateway of the subnet, and the active router fails. So, that's a basic overview of HSRP. Although it can't load balance within a active router in each subnet so that traffic Let's move on to the next FHRP. Next up is VRRP, Virtual Router Redundancy Unlike HSRP, it's an open standard, so it Cisco routers run it too, so you can use either Honestly, in terms of functionality they are Instead of an active and standby router, a The function is the same, just the names are Master is equivalent to HSRP's active, and The IPv4 multicast address used is different Again, use the flashcards to remember little The virtual MAC address format is different, 0000 5e00 01, followed by the VRRP group number. Let's try a bit more of a challenge. What if I configured VRRP group 200, instead What would the virtual MAC address be? You have to convert 200 to hexadecimal. Pause the video to try that, do a Google search Okay, the answer is 0000 5e00 01c8. Hexadecimal c8 is equal to 200 in decimal. Just like HSRP, although VRRP can't perform it can load balance between different subnets each subnet. Here's the same diagram as before, showing All that's different is that 'master' and 'standby'. Before moving on, I just want to mention one Notice that all hosts in VLAN1 are in the in VLAN2 are in the same subnet, 172.16.2.0/24. This is how subnets and VLANs are used. Subnets divide the network at Layer 3, and work together, each subnet being its own VLAN. You might have noticed that throughout this Before moving on to the last FHRP, here's In terms of functionality, they're nearly But remember the different terminology, multicast Also remember that HSRP is Cisco proprietary, run on any network device that supports it. Next up, we'll take a look at GLBP. The final FHRP you should be aware of is GLBP, This one is a bit different than HSRP and Like HSRP, it is Cisco proprietary, it only Here's the big difference: it load balances For example, if PC1 and PC2 are both in VLAN1, PC2 can use R2 as its default gateway. This is different than HSRP and VRRP, in which same router as the default gateway for the In GLBP, a single AVG, Active Virtual Gateway, Then, up to four AVFs, active virtual forwarders, can be an AVF also. Each AVF acts as the default gateway for a So, load balancing is achieved within a single The multicast IPv4 address is 224.0.0.102, The virtual MAC address format is 0007 b400, AVF number. For example, what is the virtual MAC address It's 0007 b400 0101. So, the functions of GLBP are a bit more complicated the CCNA remember that GLBP allows multiple a single subnet, and remember the multicast It might seem not so important, but for the addresses. Here's that chart again, with GLBP filled If you remember the basic characteristics information in this chart, you'll be ready CCNA exam. However, as a little extra, I'm going to HSRP, so we can try it out in a lab in the Although configuring HSRP isn't part of experience will help you understand how it So let's do some basic configurations for To fit everything on the page and show the network. We'll be focusing on configuring R1 and gateway address for the 172.16.0.0/24 subnet. I've already configured all of the interface HSRP. Note that I'm using .254 as the virtual So, let's get started configuring R1. HSRP is configured directly on the interface, Make sure you configure it on the correct it is acting as the default gateway for. HSRP is configured with the STANDBY command. I used the question mark to see what options There are many more than this, but the one Note that HSRP version 1 is the default, so 255. If using HSRP version 2, this range would Actually, let me show you how to change it The command is STANDBY VERSION 2. If I check the STANDBY command again, you 0 through 4095. This simple network is using just a single 1. You don't have to do this, it's not a to the VLAN number used for the subnet. Note that this group number does have to match So, I used the question mark again to check We'll go over three. IP, PREEMPT, and PRIORITY. First up, you configure the virtual IP with by the IP address you want to use as the default Then I used the PRIORITY command, as you can priority to 200. What does priority do? It's used to determine which router will The active router is determined in this order. First, the router with the highest HSRP priority The default priority is 100. If the routers have the same priority, the the active router. In this case R1's IP address, 172.16.0.253, So, even without configuring the priority I configured it anyway. Finally, I enabled 'preemption'. Enabling the PREEMPT command causes the router another router already has the role, although or IP address. For example, let's say R1 is the active If an error causes R1 to restart, R2 will When R1 comes back online, if preemption is and R1 will be the standby. However, with preemption enabled R1 will take it has the higher priority. Note that you only need to configure preemption active router. Even if I don't configure preemption on take back the active role. Now let's configure R2. First up, I enabled HSRP version 2 on R2's This is important, HSRP version 1 and version 2, R2 must use version 2 also or there will Next I configured the same virtual IP as on The next two commands, setting the priority R1 already has a higher priority than R2, on the standby router. But I configured them anyway, so the configuration it doesn't really matter. Finally let's take a look at the output This is the output from both R1 and R2, let's First up, notice the HSRP group number of The state is active, because R1 is the active Here the virtual IP address we configured These two lines display the virtual MAC address, Here are the HSRP timers. We didn't configure these so they are the Preemption is enabled, because we configured Active router is local, because R1 itself The standby router is 172.16.0.252, which And finally here is the priority value of If you want to take a look at the output of Okay, that's all we'll cover about HSRP more hands on. Before moving on to the quiz, let's review First I gave an introduction to the purpose a redundant default gateway for a subnet. Then, I briefly introduced three different Make sure to learn the basic characteristics multicast IP addresses and virtual MAC addresses. Then I introduced some very basic HSRP configuratons. You probably won't be asked about these on practice will help you understand the topic, lab, taking a look at preemption and such. Here are the commands we used. STANDBY VERSION 2, to configure the router STANDBY IP, to set the virtual IP address STANDBY PRIORITY, to help control which router And STANDBY PREEMPT, to cause the active router a failure. Remember to watch until the end of today's for CCNA, by far the best practice exams you You can get Boson ExSim from the link in the Okay, let's go to question 1 of the quiz. Which of the following is an HSRP version A, B, C, or D. Pause the video now to think The answer is D, 0000 0c07 acab. The HSRP version 1 virtual MAC address format in this case AB. What is AB in decimal? It's 171, so in this case HSRP group number As for the incorrect answers, options A and and option B does not follow any FHRP virtual Let's go to question 2. Which of the following is a VRRP virtual MAC A, B, C, or D. Pause the video to think about The answer is A, 0000 5e00 010a. The VRRP virtual MAC address format is 0000 What is hexadecimal 0a in decimal? It's 10, so in this case VRRP was configured Option B is a GLBP virtual MAC address, option and option D does not follow any FHRP virtual Okay, let's go to question 3. Which of the following are valid VRRP router Select two. A, active. B, backup. C, active virtual gateway. D, master. E, standby. Or F, active virtual forwarder. Pause the video to think about your answers. The answers are B, backup and D, master. A, active and E, standby are HSRP router roles. C, active virtual gateway and F, active virtual VRRP uses master and backup routers. Okay, let's go to question 4. When the HSRP standby router becomes the new it send? Select the best answer. A, HSRP hello messages. B, gratuitous ARP messages. C, ARP request messages. Or D, ARP reply messages. Pause the video to think about your answer. The answer is B, gratuitous ARP. Some other answers are not totally incorrect, In Cisco's questions, at the end it usually That's because some of the options aren't best answer. For example, option A is 'HSRP Hello'. Routers using HSRP always send Hello messages. So, when the HSRP standby router becomes the HSRP hello messages, so A isn't totally However B is the better answer, because it it becomes the new active router. How about D, ARP reply? I told you that gratuitous ARP messages are incorrect. However, B is the better answer because it's So, when taking the CCNA exam make sure you're the other options seem like they might be Let's go to question 5. Which of the following statements accurately Select the best answer. A, it allows you to configure a different B, it allows multiple routers to load-balance C, it provides a redundant default gateway Or D, each router selects a unique virtual Pause the video to think about your answer. The answer is C, it provides a redundant gateway Although you can configure a different active it doesn't provide load balancing for hosts To do that, you would need to use Cisco's Okay, that's all for the quiz. Let's move on to a bonus question in Boson Okay, here's today's Boson ExSim practice By the way, I noticed that you can zoom in you to read now. So here's the question. Why of the following statements are true regarding Select two choices. Okay, so I'll let you read these options yourself. Pause the video here, read the options, and Okay, hopefully you got the answers. So let's check them. A, one router is elected as the master router, state. That is incorrect, master and backup, that B, in an HSRP group only one virtual IP address are used. That is also incorrect. In a single HSRP group only one virtual MAC Okay, C. One router is elected as the active standby router. That is correct, I believe, about HSRP. D, in an HSRP group only one virtual IP address That is correct also. I think, but let's check option E as well. All routers in an HSRP group can participate Okay, that is not true for HSRP, but it is Okay, so I think C and D are correct. Let's click on show answer. And that is correct. So here is Boson's explanation, quite detailed. You can pause the video here if you want to They also have a reference to some Cisco documentation And it states the category of the exam topics Okay, so that's an example question from Boson Boson ExSim is a great set of practice exams I used it when studing for my CCNA, and I my CCNP, and I highly recommend them. So if you want to get a copy of Boson ExSim There are supplementary materials for this There is a flashcard deck to use with the There will also be a packet tracer practice That will be in the next video. Sign up for my mailing list via the link in the flashcards and packet tracer lab files Before finishing today's video I want to Recently I've noticed an increase in the to all of you, both JCNA and JCNP-level members. Your support helps me keep making and releasing for your support. This is the list of JCNP-level members at 21st 2020, if you signed up recently and your be in future videos. Thank you for watching. Please subscribe to the channel, like the with anyone else studying for the CCNA. If you want to leave a tip, check the links I'm also a Brave verified publisher and accept Brave browser. That's all for now.