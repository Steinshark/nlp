Welcome to Jeremy's IT Lab. This is a free, complete course for the CCNA. If you like these videos, please subscribe Also, please like and leave a comment, and of videos. Thanks for your help. In this video we will cover two Cisco proprietary and VTP, VLAN trunking protocol. As I said, they are Cisco proprietary, meaning run on Cisco devices. DTP and VTP were removed from the CCNA exam However, it's important to know their function, on the exam even though they are not on the So, what will we cover in this video? Well, I already said it. We will cover DTP, dynamic trunking protocol, DTP is a Cisco proprietary protocol that allows switchports to be either access ports or trunk Then we will cover VTP, VLAN trunking protocol. VTP is another Cisco proprietary protocol switch, which then acts as a server that other have to configure VLANs on every single switch Also, make sure you watch until the end of a question from ExSim for CCNA, by Boson Software. ExSim for CCNA is Boson's set of practice as the best practice exams to get you ready I used them myself for my CCNA and CCNP. If you want to get a copy of ExSim, follow Let's go over some points about DTP. DTP is a Cisco proprietary protocol that allows interface status (access or trunk) without Basically, two Cisco switches connected together will automatically be an access port. DTP is enabled by default on all Cisco switch Once again, because it is a proprietary protocol, So far, we have been manually configuring or SWITCHPORT MODE TRUNK. If we use DTP, we don't need to enter these Now, for security purposes, manual configuration DTP should be disabled on all switchports. DTP can be exploited by attackers, and I'll this course, but for now just know that it Let's go straight into the CLI. I'm in interface configuration mode here MODE, followed by the question mark. You can see the ACCESS and TRUNK options we look at now is this one, DYNAMIC. It says 'set trunking mode to dynamically That's DTP. So, I entered DYNAMIC and used the question There are two options, AUTO and DESIRABLE. The only description given is 'Set trunking or DESIRABLE', which doesn't really explain So, let me explain each of these modes. A switchport in DYNAMIC DESIRABLE mode will switches. It will form a trunk if connected to another mode trunk. switchport mode dynamic desirable, or switchport Let's see how that works. SW1 and SW2 are connected via their G0/0 interfaces. SW1's G0/0 interface is in DYNAMIC DESIRABLE SW2's G0/0 interface is manually configured So, these two switches will both agree to Here is a new command, SHOW INTERFACES G0/0 These are just the first few lines of output, It says switchport: enabled, because it is If we want to configure a routed port with display differently. The administrative mode is dynamic desirable. Administrative mode is what we actually configured mode, displays whether it is a trunk or access Because SW2's interface is a trunk, SW1's DTP negotiation. Here on SW2 you can see that both the administrative Now both interfaces are configured in dynamic So, they will both form a trunk. The output of SHOW INTERFACES SWITCHPORT is an administrative mode of 'dynamic desirable', because both switches are actively using DTP Even if manually configured as a trunk, an interface. This time SW2's interface is configured A switchport in dynamic auto mode does not It's more passive. It will tell SW1 'if you want to form a going to actively try to form a trunk with However, because SW1 is in dynamic desirable SW1's SHOW INTERFACES SWITCHPORT output mode of dynamic auto, and again an operational One more example: SW2's interface is now the SWITCHPORT MODE ACCESS command. SW1 is actively trying to form a trunk, but mode, the trunk will not form, and both will which is VLAN 1. The output of SHOW INTERFACES SWITCHPORT on access. What does 'static access' mean? 'static access' means an access port that (unless you configure a different VLAN). There are also 'dynamic access' ports, VLAN depending on the MAC address of the connected But this is out of the scope of the CCNA, you ports, I just wanted to clarify what 'static Now, on SW2's g0/0 interface both the administrative Okay, now you've learned about dynamic desirable desirable mode will use DTP negotiation to the other device is in trunk, dynamic desirable, However, if the other interface is in access an access port. Now let's look at dynamic auto mode. A switchport in dynamic auto mode will NOT switches, however it will form a trunk if to form a trunk. It will form a trunk with a switchport in or switchport mode dynamic desirable. So, SW1's G0/0 interface is configured in configured as a trunk. Therefore, DTP negotiation will cause them Here you can see the administrative mode of whereas on SW2 both are trunk. Now, we already saw what happens when a switchport in dynamic desirable mode, they form a trunk. So, let's look at two switchports in dynamic Neither is actively trying to form a trunk, VLAN, VLAN1. And they have the same output for the SHOW mode of dynamic auto and operational mode Next up, dynamic auto and access mode. As you can probably guess, this will result Here is the output of SHOW INTERFACES SWITCHPORT Now, you may wonder what happens if a manually configured access port? Well, since both are manually configured, and access modes. Here is the output of SHOW INTERFACES SWITCHPORT However, this configuration does not work, will not pass between these switches. Here's a chart summarizing the resulting modes. For example, a switchport in dynamic desirable any administrative mode except access. Pause the video here if you want to take a Now, one more important point. DTP will not form a trunk with a router, PC, The switchport will be in access mode. So, if you want to configure router on a stick, connected to the router as a trunk, you cannot it to become a trunk. Let me cover a few more points about DTP. On older switches, switchport mode dynamic They will actively try to form trunk links. However, on newer switchers, switchport mode mode. You can disable DTP negotiation on an interface If you use this command, the interface will By the way, configuring an access port with on an interface. It will also stop sending DTP frames. If you manually configure an interface in sending DTP frames, unless you also issue As I said before, it is recommended that you configure them as access or trunk ports. Now let me talk about trunk encapsulation negotiation. Switches that support both dot1q and ISL trunk encapsulation they will use. This negotiation is enabled by default, as trunk encapsulation negotiate. I mentioned this in a previous video on VLANs. If you want to manually configure a trunk and ISL, you must first change the encapsulation in negotiate mode. ISL is favored over dot1q, so if both switches By the way, the DTP frames that DTP uses to or in the native VLAN when using dot1q. The default native VLAN is VLAN1, however, will be sent in VLAN1 for dot1q also. To show you this negotiation of trunking encapsulation, INTERFACES SWITCHPORT. I set the interfaces on both switches to dynamic Notice that the default trunking encapsulation trunking encapsulation of ISL. By the way, this field down here, negotiation whether the interface is sending DTP frames If the interface is in dynamic desirable, on. If it's in access mode, or if you use the before, this will be off. Okay, that was a good deal of information I'm quite sure that you won't need any it comes to DTP. If you need extra review, watch the section tracer yourself, and then try my packet tracer Next, let's move on to today's second VTP allows you to configure VLANs on a central server switch, and other switches (called VTP clients) will synchronize their VLAN database It is designed for large networks with many each VLAN on every single switch. However, like DTP it is rarely used, and it I will show you one reason why it is recommended There are three versions of VTP, 1, 2 and Most modern Cisco switches support all three, 2. I will talk about some differences in each There are three VTP modes that a switch can Cisco switches operate in VTP server mode Let's talk about the different VTP modes. First up, VTP servers. They can add, modify, and As I said, Cisco switches operate in VTP server database on Cisco switches by default. They store the VLAN database in non-volatile This means the VLAN database is saved even VTP servers will increase the REVISION NUMBER This revision number is a very important part It's what VTP uses to determine the newest that the switches will synchronize to. VTP servers will advertise the latest version the VTP clients will synchronize their VLAN So, VTP advertisements aren't sent on access Here's another important point: VTP servers What does that mean? It means that a VTP server will synchronize number, because the highest revision number of the VLAN database. Now let's talk about VTP clients a little. VTP clients cannot add, modify, or delete If you try to add, modify, or delete a VLAN VTP clients do not store the VLAN database VTPv3, they do. VTP clients will synchronize their VLAN database in their VTP domain. I will talk about VTP domains soon. Finally, VTP clients will advertise their to other clients over their trunk ports. Okay, that's enough information for now. I will talk about the third VTP mode, VTP So let's look at how VTP works. These are four switches, and I've configured will send and receive VTP advertisements between Here is the output of a very useful command, All of these switches have the default configuration, Let's look at some of these fields. These fields here shows that the switch is but it is running version 1 at the moment, Notice that there is no domain name. By default the domain name is NULL, there If we want VTP to synchronize among these with the same VTP domain name. Now look down here. You can see the default VTP operating mode Notice the maximum number of VLANs supported This is because VTP version 1 and version 1006 to 4094. Only version 3 supports them, so if you want to use VTP version 3. The number of existing VLANs is 5, those are 1 and 1002,3,4,and 5. Finally, look at the configuration reivision It is 0 at the moment. If I add, modify, or delete a VLAN this will to VTP clients in the same domain. It will also update its own VLAN database revision number, because VTP servers function So, I used the command VTP DOMAIN CISCO to I then made a vlan, VLAN10, and named it engineering. So, because I added a VLAN, if I do SHOW VTP number has increased. You can now see that the VTP domain name has is 6, and the revision number has increased Now let's go check on the other switches. Okay, so something interesting has occurred. Without any configuration, SW2 has changed database to match SW1's, with a revision If a switch with no VTP domain (or domain NULL) name, it will automatically join that VTP So, SW2 automatically joined the domain cisco. As I said before, If a switch receives a VTP a higher revision number, it will update its If I do SHOW VLAN BRIEF on SW2 now, you can was added. Here you can see that the advertisements were joined the domain and updated their VLAN database Since you've seen how VTP sync works, let an old switch with a higher revision number all switches in the domain will sync their This could cause all of the hosts on your the switches could sync to a totally different could disappear. This is one reason why VTP is usually not Just to demonstrate that, let's say this 5, and VLANs 1, 10, 20, 30, and 40. Then you take an old switch your company used has a revision number of 50, and VLANS1, 99, It will send VTP advertisements with this the domain. All of these switches will update their VLAN 10,20,30, and 40 will suddenly lose connectivity. Next let me talk about VTP transparent mode. Switches in VTP transparent mode do not participate VLAN database to the VTP server. VTP transparent mode maintains its own independent It can add, modify, or delete VLANs, but they won't Although it doesn't sync its VLAN database, trunk ports, if the VTP advertisement is in its own VLAN database. So let's compare the functionality of server, I set SW2 to client mode with the command Afterward, I tried to create VLAN20 on the because SW2 is now in client mode. Then I set SW3 to transparent mode with VTP Also, to show you that a transparent mode in a different domain, I changed the domain So, I created VLAN 20, named sales, on SW1 show vlan brief. Then I did show vtp status, and you can see 4. It should be 2 I think, but I made a few other lab for this video. Anyway, let's see check out SW2. As you can see, the VTP client SW2 has indeed now has the same revision number, 4. How about the transparent switch, SW3? As expected, on the transparent switch SW3, number of 0. Changing the VTP domain to an unused domain Changing the VTP mode to transparent will So, if you're going to plug an old switch that uses VTP, make sure to reset the revision it doesn't overwrite your network's VLAN Now, the question is whether SW4 will have Remember, SW3 is in transparent mode in a the VTP advertisements to SW4. Indeed, SW4 does not have VLAN20, and it is So, what can we do to make SW3 start forwarding If we change the VTP domain on SW3 back to to SW4, even though SW3 itself won't sync So, I changed the VTP domain on SW3 back to I also created some new VLANs on SW1 to increase by the way, and now you can see that SW3 did and SW4 synced its VLAN database to SW1 and Finally, I'll just talk about VTP version To change the VTP version, use the VTP VERSION Changing the VTP version increases the revision this new revision number will be sent. Other servers and clients will then sync and For example here is SW4, it is now running just like SW1. As for the difference between VTP version from Cisco: VTP V2 is not much different than The major difference is that VTP V2 introduces If you use Token Ring VLANs, you must enable Otherwise, there is no reason to use VTP V2. Token ring is an old technology, so really As for version 3, it has quite a few differences the scope of the CCNA, so we'll leave it Okay here's the first slide on VTP again. To be honest, there is still lots more I can it at that for this course. Again, it isn't on the exam topics list, VTP and its purpose, so I wanted to tell you If you learn and remember the information that should be more than enough for the CCNA Basically, just know the purpose of VTP, the mode, know that switches operate in server clients too, and know about revision numbers. If you know all of that, you should be fine. So before moving on to today's quiz let's We looked at DTP first, which is a protocol with other Cisco switches, without manual However, it's recommended that you disable Then we looked at VTP, another Cisco proprietary on switches that operate as central VTP servers, and VTP client switches sync their database Note that VTP only syncs the VLAN database, on each switch separately, for example SWITCHPORT VTP does not automatically assign interfaces Both of these protocols are no longer on the them and their basic functions, you may get Okay let's move on to today's quiz. As a bonus, I will also feature one practice set of practice exams I highly recommend you Check out ExSim via the link in the video Okay, let's go to question 1 of today's SW1 and SW2 are connected, are both new switches, as access ports. However, SW2's power supply fails so you switch. You reset the configuration before connecting that a trunk is formed between the two switches. What could be the cause? A, interfaces on old switches default to switchport B, interfaces on old switches default to switchport Or C, access ports are a feature of newer Pause the video to think about your answer. The answer is B, interfaces on old switches Newer switches default to dynamic auto. So, in this case SW1's interface is probably switch's interface is probably in dynamic Let's go to question 2. SW1 is connected to SW2, and SW2 is connected You want SW2 to forward SW1's VLAN database to synchronize its VLAN database to SW1. Which command should you use on SW2? A, vtp mode transparent. B, vtp transparent mode. C, vlan mode transparent. Or D, vtp mode client. Pause the video to think about your answer. The answer is a, vtp mode transparent. A switch in VTP transparent mode will forward VLAN database to the VTP server. It also won't advertise its own VLAN database. Let's go to question 3. What are two methods to reset a switch's (Choose two. Each answer is a complete solution). A, change the VTP domain to an unused domain B, change the switch to VTP server mode. C, change the switch to VTP transparent mode. Or D, use the VTP RESET command. Pause the video to think about your answer. The answers are A, change the vtp domain to to VTP transparent mode. Either of these methods will reset the revision This is useful if adding a switch with a higher Okay, now let's go to today's Boson ExSim For today's Boson ExSim practice question, but a drag-and-drop question. So this is about DTP, Dynamic Trunking Protocol. Select the VLAN trunking operational modes and drag them to the resulting trunking configuration. So here we have one end of the connection, And then the other switch, the other end. Access, dynamic auto, dynamic desirable, or Okay, so see if you can complete this chart Pause the video if you want to try it. Okay, so let's walk through the answers. So, here on one end of the connection, access Manually configuring a switch port in access It won't form a trunk port, no matter what. So, two access ports will result in an operational Access and dynamic auto, same thing. So, dynamic auto can form a trunk but it won't end is trying to form a trunk. So, that will be access. Access and dynamic desirable. Although this end is trying to form a trunk, Now, access and trunk that is a misconfig. Do not do this in a real network. You can try it out in a lab to see what happens, You will encounter problems. Dynamic auto and access, well we just saw That will be an access port. Dynamic auto and dynamic auto. Neither is actively trying to form a trunk, Dynamic auto and dynamic desirable. This end is actively trying to form a trunk, Same thing, dynamic auto and trunk will form Even if you manually configure 'switchport end will actively try to form a trunk with And since it is dynamic auto, they will form Okay, dynamic desirable and access, that will This end will refuse to become a trunk. Dynamic desirable and dynamic auto, that will Two dynamic desirables definitely form a trunk. And this one as well, trunk. Okay, next, moving on to trunk on this end. Trunk and access, again that is a misconfig. Don't do this in a real network. Trunk and dynamic auto will form a trunk. Trunk and dynamic desirable, of course. And, of course, trunk and trunk also will So once you've finished, click on 'done'. And then click on 'show answer'. Now, if you don't want to check the answer question in the practice exam. But let's see if I got the correct answer. And, I did. Okay, here is Boson's explanation, you can And there are also references here. The official cert guide by Wendell Odom, volume And some additional reading from Cisco. I will link some reading from Cisco in the And this category shows which category of This is from the 'network access' category. Okay, so that's today's ExSim practice question. If you want to get a copy of ExSim for yourself, practice exams, please follow the link in There will be supplementary materials for There will be a review flashcard deck to use Download the deck from the link in the description. There will also be a packet tracer practice from this video. That will be in a separate video. Before finishing today's video I want to Thank you to Samil, velvijaykum, C Mohd, Johan, the creators of ExSim, by the way, Sidi, Magrathea, and Vance. Sorry if I pronounced your name incorrectly, One of you is displaying at Channel failed and I'll see if YouTube can fix it. This is the list of JCNP-level members at up recently and your name isn't on here next video. Thank you for watching. Please subscribe to the channel, like the with anyone else studying for the CCNA. If you want to leave a tip, check the links I'm also a Brave verified publisher and accept Brave browser. That's all for now.