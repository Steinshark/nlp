- Ow! Damn it! What is that? A total 128 cores? - 64, but good try. - And a terabyte of memory. - That's 256 Gigs. - Oh. Supermicro told us that we're not allowed to build this server ourselves. They have to build it for us. Naturally, we said no. So we are gonna be taking one from the petabyte flash project and see just how fast we can drag race it with a handful of Kioxia CD6 drives, Optane acceleration, 64 epic course, the fastest we can get, and is this 200 Gigabit - It's 200 gigabit. - And 256 gigs of memory. - The pin's just for boot. - Thing's gonna be crazy fast, almost as fast as I can - GlassWire. Are you having poor use GlassWire and instantly see what apps are wasting your bandwidth and block them. Get 25% off today using code (upbeat music) - In a way, a server is than it is like a commodity desktop native off the shelf components, because they tend to be way more tailored to a specific use case, and they're not really as flexible. Say you'd wanna build a storage server. There's a dozen different (cat meowing) For example, here at Linus Media Group, our primary concern is getting at the lowest possible price. - Yeah. - So we're willing to give up some compute in favor of stuffing more That's why our storage or this thick. The reality is that 4K is pretty demanding, especially if you've got working off the server at once compared to enterprise or It's not you even close. So, that is why any good server deployment starts with the chassis. This right here is the And it is all about density, not storage density, because if we went with a 2U, remember that dual layer one? - Oh yeah. Old Whonnock. - They absolutely could but they choose not to because you're going to run if you don't have enough compute. And that's the density by going with these 1Us. Each layer of this, 12 drives, yes, but two CPUs. So no bottlenecks, right? - That's the idea. - Supermicro only sells these as a complete system these days, meaning that it must leave their warehouse with a minimum of two CPUs, four sticks of RAM, and at least one storage drive. And the intention there is for them to be able to ensure And then as a side benefit, obviously, they make but because of petabyte flash project, we were able to get our hands So let's take a closer look. Wow, built in on board. You've got dual SFP ports. Are those 10 gig or? - [Jake] All four of those are 10 gigs. - All four of these ports, RJ45 and SFP are 10 gig, dual USB three, see we've got an IPMI VGA, I love that VGA, as well as two PCIe 16X slots back here, and what have we got for power? - [Jake] There's more, there's three. - There's three. Oh, there's a third one. Oh, look at that. - Oh, wait, there's actually four. There's one more like hidden inside. We'll see that later. - Oh, cool. Okay. Let's have a look at our power supply. Obviously, dual up to 64 core CPUs. Wow. 1200 watt power supply. - [Jake] Geez. - Strictly speaking, this, they didn't actually send us a bare bones, they sent us a completed one and we took it apart. - Oh, do I ever have the story for you. On a call for this project, the Supermicro guy was like, &quot;You know, taking out a &quot;but you know, get to a CPU there's, &quot;there's pins and thermal paste.&quot; I'm like, &quot;Bro, &quot;I have probably taken out slash installed &quot;at least a thousand CPUs.&quot; - Yeah. Is it wrong for me to just love for super thin systems like this? - Really, you know what I'm looking at? The RAM slots, it's like 60% of the width of - It's a forest of memory slots. Why aren't we putting more memory in then? - Erm... - No, no, no, no, no. The thing with EPYC is we wanna have all of so that's eight per CPU. - But once you add more, it can be harder to hit the so- of your memory is super, super important if you're running software RAID, which is exactly what we're We're using ZFS, right? - Well, for now. Just to test it. But the actual deployment's which is a different thing that costs hundreds of but seems to be software RAID too, so yeah, I guess. - Whoa! - But, oh, what the hell? - That's cool. - You dropped something. It comes out as one big - [Jake] Here. - I don't know where that is from - Raaaaaaaaa! Now, this is a fun fact. Small fans, not great because they got little bit tiny planes. But what they are really good at is generating a ton of static pressure, which is really important See, look at the front of this chassis. It's gonna be all full of And in order to fill it with drives, you've gotta have a back Well, that back plane has hard PCB, and you can see that there's Wherever they were able to draw air through the They need to generate in order for there to be enough air flow, to force over the CPU's memory, power supply, and PCI Express cards. Did I say power supply? Power supply is up, they're redundant in the and it's also super useful to two independent power sources, in case your power source fails. Side note, Jake, I think this might be the - Holy (beep). - I mean you want rigidity obviously, especially somewhere where there's gonna be mechanical - That's like two sticks of RAM. - Yeah. - Here, let's get a shot Here's a stick of memory. I think it's more like three, Jake. - What? That PCB is almost 1/8 of an inch thick. - That's crazy. Oh, this is interesting. You can see that in any of the hot air back to the other side, they've got these little anywhere where cables have to pass between the front of the And that's not the only it's got up sleeve, power runs up this side, but the front enclosures also for the NVMe drives. And all of those are flat connectors. Check this out, that run right in between to these sick freaking PCIe connectors that go into the motherboard, and do they have any cards for them? No, they just all come - Yeah, there's the - Of course, you can add if you wanted to. There's the three, excuse me, four PCIe slots here at the.. Wow, this is- - See this little guy, he is right here. - Oh, there it is. - That's where we're gonna put our Optane. Oh wait, actually no, it doesn't fit. - Ah. - No, it's fine. Oh, cool. Okay. So this is a dual riser, on this side. You've got a simple PCIe 16X to 16X slot, and knowing AMD EPYC, it's probably running at full speed. - It's running at full speed. - Actually, all of this is just gonna be full speed PCIe gen four. And then over on this I believe this is a PCIe 32 X slot. Oh, that is crazy. Jake, it is a 32X slot, and you can see they've that correspond to each of the 16X slots, silk screened onto the PCB. - Look, if you think that one's crazy, look up here. - That's amazing, I love it. - There's one 16, another 16, and then a, what is that? 8X. Right over here. - So I think some of the - Oh, you know what? The 8X is running these - Oow! - No bottlenecks. - And then one slot, and then those are two different ones. There's so much PCIe in microservers. - And again, very purpose built, right? - Yeah. - You can put a GPU in here though. Oh look, GPU power. If you wanted like an NA100 or something. Again, if you had a very purpose Oh my God. - I mean, we did see a where GPU acceleration was - I have a bit of an update on that one. - Wendell, informed us that with that particular solution. - We tested it. There is an issue. - Ooh. (Jake laughing) - Basically, we stopped the array, edited one of the drives, I think we edited 32 bytes of started it up, and it didn't fix it. - It just has no error - It is. It is depending on the drive to tell it that there's an error. - Jake, I just realized something. I was trying to figure out why the front of the slot was over here. and I was like, &quot;Right, that's - [Jake] Yeah. - So it's got normal size power pin, and then these itty-bitty - Now the goal today is to see if you were just to set it up yourself with something like ZFS but even with a more optimized and actually specifically like WekaFS, you still need a lot of CPU compute to handle things like networking, the actual connection to and any sort of networking overhead. Fortunately, AMD stepped up to the plate and provided 12 of their So those are 32 core each, for a total of 64 cores in These are configurable and a max boost clock of 3.7 gigahertz. They're not quite as fast as the 75F3s we had in the G-RAID server, but there's still plenty potent for what we're trying to do here. So, let's get them installed. I gotta prove Supermicro right here. I know how to do this, David. I swear. I swear I can put a CPU in. - [David] I don't know, Jake. - Watch me screw this, no. - [David] Oh. (Jake laughing nervously) - You saw nothing. You know, my hands quite (upbeat music) All right, David, I'm doing the most dangerous Oh, don't wanna mess this up. Oh, oh, I already messed it up. - [David] Is there treasure under that? - Look at these bad boys. It's crazy to think that this Like there's just underneath here. There's gonna be a massive vapor chamber that just spans the entire thing. - Now it's time for the tedious process of installing all of The DIMMs are made by Samsung. They are 16 gigs each, and they run at 3,200 but the most important thing about them is that they're qualified by Supermicro for this particular server. And I get it, you know? Who would wanna run unqualified memory in their mission critical server? It's like drinking from a non LTT store Crazy. I think the craziest thing is that it's not even that crazy. 256 gigs of ECC error correcting memory would be mind blowing for a desktop, but for a server, this is pedestrian. This is a storage server. We don't actually need to put for these CPUs or GPU's to crunch away at. These are to make sure that each of our CPUs gets two full fans worth of dedicated airflow In our final deployment, as part of our petabyte oh, we're gonna have six over fabric posts. And it's kind of similar to iSCSI in that your storage is and then there's connected VN networking to your compute box. But NVMe over fabrics with NVMe devices in mind. So, it's way more performant, but to push that kind of speed, you need to make decent And that requires a lot of networking. A hundred gig? Ha, can I get a ha? - I don't have my mic on. hold on. Ha. - 400 Gig is what we're targeting with dual Nvidia ConnectX-6 series cards, and I couldn't help has a half height bracket on it. Oh, you want it on this side? - Yeah. - It's for cooling, for more cooling. Get them separated. - It's just gonna hang there. - The teamwork in it. I'll go at it from one side, you go at it from the other. - Yeah, I think they called that a (beep). - [David] Ew, no. (Jake laughing) - I thought you wanted to - It doesn't fit. - Oh. It's fine. We can just stick it- - Too much, too much cable. - Ooh, careful. - Yeah, we really need if we're gonna hit our - Well, and also, - We don't want them to be - They did tell us not to bother them. (Jake laughing) This may be the most overkill (Jake laughing) - Like doesn't.. - It's not redundant though. So it's like actually - In fact, many server motherboards, most even have an internal USB port that is exactly for that. That is what it's for. - Yeah. It's for just but just using a cheap thumb A lot of them also have an internal, like little powered inserted thing, and that's what we'll Where is that? - Yeah. - Oh, well where does it go? Oh, is it the super dome one here? - Yeah. Something about that doesn't look right. - Yeah. I did not put this in right. Yeah. - Oh, oh God. Every time. You didn't screw this in? - Oh, I forgot. Oh, I can still access it. Where'd the screws go. Just gonna- - Yeah, so like a- - Oh, God. - What about this side? No, that one I screwed. Oh, I didn't screw that one in either. - Last but not least, storage. The actual deployment of this cluster is gonna be making use of 12 CD6, 15 terabyte drives per server. But because those drives already have like specific demo data, - Assigned to specific slots, we had to be very careful Did you see my little diagram? - Oh no, I didn't. - Oh. Oh yeah, baby. - Oh my gosh. - [Jake] It's perfect. - [Linus] Okay. I mean... - I labeled the drives. I didn't wanna screw it up. - That's fair. That's fair. - Because that would be catastrophic. So instead we're gonna be that we already had laying around, and we're gonna be installing Just to see like if you and these drives. - How much could you get without spending $400,000 - Yeah, that. I mean, we're expecting even without the fancy file system, because these are PCIe gen four drives that are capable of an excess of... What is it? - Like over six gigs a second? Gigabyte. six gigabytes. - Six gigabytes a second of throughput. - So put together that's The interesting thing are a little bit slower. I think they're five and so it works out to be closer to like 65 gigabytes a second, which is a lot closer to that our network can do. - Shout out Supermicro, by the way, for these toolless sleds, this was so fast compared to when I built that simply double server that had- - Did you have to screw them all in? - All of them. - Oh. boy, does that ever add a lot of time. - But you kind of have to do two. So that's like, oh, 96 screws. He's not even doing it (Jake laughing) Oh, are we done? - That was it. - That's it? Wow, it's so cute. - Fricking crazy. - I mean, cute is like not - 400 gigabit per second. Okay. - Shall we plug her in captain? It's gonna complain that I - And then we'll tell it to shut up. - This one doesn't have a shut up port, but it does have a shut up function called unplugging the power supply. (server humming) - Oh, well we could just plug it in. Here we're gonna plug the Oh, that was a little rough. Oh, I got the wrong power cable. One moment please. When I was living at Yvonne's house. - Like with her parents? - Yeah. I had a GPU make that noise when I forgot to plug in - Oh yeah, like an 8,800 or something. - And it made her dog throw up. (Jake laughing) This thing is surprisingly quiet for a 1U. I mean, I know it's idling, but still. - I guess if it's not doing anything. - Yeah. Well, it's nice to not have - Some of them, their power supplies... (server humming) - No, nevermind. I spoke too soon. 232 core processors. All right, we see 13 drives, looks good. We got our boot drive and our 12, seven-ish terabyte drives. It's time to make our pool. Should we do realistic or I actually don't think a stripe is gonna be that much faster, honestly. We might be best to just - Two RAIDZ one pools would allow us to have two drive failures before we actually and the way Jake's going to configure it is with two six drive vdevs that we will then combine - [Jake] All right. What IAMSPEEDD, 69 tebibytes. You know what, it's even dot 84. Like that's double 420, you know? (Jake laughing) We gotta make a couple tweaks here. They've actually updated it so atime is off by default. - What is atime? - It's like, it records the You only need that for like - Or diagnostics, I would think. - Yeah, but you don't want it. It's not good for performance We're gonna go from 128 to one meg, 'cause that's kind of of like the video, which is big files. - Yeah. - If you were to host like where you have lots of like especially like you would probably want But for us one mega is good. - 128 is the default for a reason. - Yeah. - That's excellent for a mixed use case. - Yeah. Okay, and we wanna do one more thing. We're gonna set at the ARC, that is the RAM cache of if you use it for files as well, when you have such vast backend storage, you can actually lose performance. - Yeah. - So setting it to metadata only, gives us a little bit but not the same kind that So we're running an iodepth of 32, which is somewhat unrealistic, but two threads per MBME. So 24 threads total at a 128K block size. - You make the server go fast your way, I'll make it go fast my way. Here we go, ready? Ah. - Did you just unplug the network? - Oh. Maybe. - Maybe? - But I did it really fast. - Yeah, I think you did Cool. Well, it's fine now. 15, 17, 20. - Now we've done, you know? 1820 gigabytes a second but what you have to consider now is that we've done that on servers that were generally double the thickness. So, in a clustered deployment you're able to get effectively of your drives by having true one use, by adding all of that compute. That's the point of this, and that's what made these ideal for our petabyte flash project. - Whoo, we're ramping up baby, almost 30 gigs per second. - Oh wow. - Look at the CPU usage, those cores are, - They're going. I bet you if we switch our leaving the array at one meg, this is gonna go even faster. Yeah, there's 22, 20. See if it ramps up even higher. - Five threads at 100%. - Well, there's more than that if you look at it like realistically. So this is a right test? Sequential right? We're looking at around 20 - What that tells us is that because in theory, these drives don't write These are a more read That's actually really that we're dealing with - And ZFS. Bump the threads up a bit. - Man, I am excited to when there's another five - Yep. Okay, so this is a random We're doing four threads - This is not only gonna It's gonna be the highest - Look at how, - Dog crap that is. - Oh, that's a shame. 150,000 IOPS individually. These drives they'll do more than that. - Even a million. - They'll do a million each. That's that one meg record Geez. Look at our cores they're just banged. - Wow. - Yep. - 47 threads at a 100% right now. Poor thing. - And what about our random write. It's poor drives are just abusing them. Oh, that's embarrassing. - 20,000 IOPS? This is literally slower but - A hard drive sequentially. If we were doing 4K random it would be, - Way slower than this. So that's something you gotta keep in mind about these numbers. It's not as simple as The kind of data that you're hitting is what makes an enormous difference. Really that brings us back to what was kind of the whole point - Yeah. - That servers have to be designed for the application that And these are absolutely perfect for what we will be doing with them, but not perfect for what we do with our regular servers here. Like we wouldn't replace new, new Whonnock with one of these. - That's the thing with software man, random reads and writes are just not it. But you know what is it? (Jake laughing) - Our sponsor. - Manscaped. The new Manscaped ultra premium collection is an all in one skin and hair and covers you from head to toe. There's the two in one their body wash with cologne scent, hydrating body spray, deodorant, and a free gift, moisturizing lip balm. Ooh (lip licking) your man maintenance just got easier. And best of all, all Manscaped products in are cruelty-free, paraben-free and vegan. Visit manscaped.com/TECH or click on the link below for 20% off and free shipping. - If you guys enjoyed this video, go check out part one where we got into more depth about the complete configuration, including taking a close that is gonna act as the head controller for the six of these that - Oh, I wanna do a video - You should. - Like booted into - Nvidia specifically but - Like could they hate - Yeah.