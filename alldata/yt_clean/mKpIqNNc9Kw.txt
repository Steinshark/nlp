Hello. Today I'm going to make a doremifa inverter. doremifa inverter used to be used on Keikyu line trains in Japan. Because the inverter makes distinctive sounds when the train starts running, the trains were called singing trains. Keikyu trains with doremifa inverters are no longer in operation. So I decided to make a doremifa inverter by myself. When Keikyu trains with doremifa inverters start running, they sound like tu lu lu lu lu lu lu lu. They make a distinctive sound. Where does that sound come from? It's from this motor that we have here. The motor is attached under the train car. To rotate the motor, a voltage is applied to the motor. Then, the iron core inside the motor starts vibrating. The vibration travels through the air and reaches our ears as a sound. A motor roughly consists of two parts. This part is called rotor. It rotates inside the motor. This is the other part. It's called stator. Some people misunderstand that the characteristic sound of the doremifa inverter is made when the rotor rotates, but actually it's not true. The sound comes from the stator. A little bit of the sound comes from the rotor, but mostly from the stator. In another video I uploaded the other day, I explained how the sound is made in a motor. If you watch that video, I'm sure you can enjoy this video even more. The link is in the description. The motor I'm going to use today is this small motor. This is a three-phase induction motor. Three-phase induction motor is the type of motor that was used on the Keikyu singing trains with doremifa inverters. First, I would like to give a simple explanation of how trains work. This is a train car. I believe you've seen wires above the trains. That wire is this. The wire carries 1500V direct current. If you touch it, you're dead. A pantograph on the train is in contact with the wire and collects the 1500V DC. The pantograph and the inverter are connected with a wire. I'm sure you've seen a huge box under the train car. There's an inverter inside the box. An inverter is a crucial component for rotating motors. It converts the DC voltage from the pantograph into AC voltage that rotates the motors. The motors are located near the wheels. The motors are connected to the inverter with wires. AC voltage from the inverter is supplied to the motors and the motors run. So that's how a train runs. But doremifa inverters on Keikyu trains not just run the motors but also make distinctive sounds like ta-la-la-la-la when the train starts running. So, in order to make a doremifa inverter, you need not only an inverter but also a control board for the inverter. I added a control board next to the inverter. The control board is close to the inverter. As I said, in order to make a doremifa inverter, you need an inverter and a control board to control the inverter. doremifa inverters were used in the Keikyu N1000 series trains. They were introduced about 20 years ago. At that time, power semiconductors called GTO thyristors or gate turn-off thyristors were used on the inverters. Twenty years ago, the performance of such power semiconductors for inverters was not as good as it is today. So back then, when an inverter with GTO thyristors rotated a motor, it inevitably made an unpleasant noise. These days, power semiconductors used for trains have a lot better performance compared to old times. So the train inverters became less noisy. Why do old inverters and modern inverters sound differently? It's because the switching frequency is different. Switching frequency is the number of times an inverter controls a motor in a second. A GTO thyristor's switching frequency is not very high. It's only a few hundred hertz. That switching frequency of a few hundred hertz causes the noise of the same frequency that you can hear from the motor. Recently, power semiconductors called IGBTs are used on train inverters. Compared to GTO thyristors, you can specify up to several ten times higher switching frequency for IGBTs. So nowadays the switching frequency of train inverters is set to the range where it's hard for people to hear. 20 years ago, high switching frequency couldn't be specified for train inverters and inevitably they produced harsh noise. It's not necessary at all to make doremifa sound to rotate a motor. It's not necessary at all, but for some reason, doremifa inverters on Keikyu N1000 series make that sound. The reason for that is not revealed. It's only known to the engineers who made doremifa inverters at that time. There are various theories about the reason for the distinctive sound, and one of them is that the engineers were being playful. Today I'm going to make my own doremifa inverter, but before that, I need to know the sound the inverter should produce. I wish I could record the sound of actual doremifa inverters, but it's no longer possible. In fact, trains with doremifa inverters are no longer in operation. They stopped operation in July 2021. So I analyzed the Keikyu N1000 sound uploaded on YouTube. There are railfans who specialize in sound. They are enthusiastic about recording train sounds. Thankfully, there are many videos of N1000 series on YouTube uploaded by such railfans. I'm going to decide the sound of my doremifa inverter referring to those videos. Since I couldn't analyze the sound just by listening to it, I analyzed the frequency of the sound. The horizontal axis shows the motor speed, and the vertical axis shows the switching frequency. As I said earlier, the switching frequency and the sound frequency are the same. Because the inverter is called doremifa inverter, I thought the first sound would be do, but I wasn't right. Actually, it started with fa and ended with so. It goes like fa-so-la-ti-do-re-mi-fa-so. Well, actually the last sound is not exactly so. It's around 400 hertz. This is the switching frequency specification of the inverter. I'm going to write code based on the results of this frequency analysis, and then implement it on the control board. Now I'm going to make a doremifa inverter. The devices on the left side are the control circuit components of the doremifa inverter. And the devices on the left side are the main inverter circuit components of the doremifa inverter. Let's start with the control circuit of the doremifa inverter. As for the control circuit, I want to use this train controller to control the motor. When making the control circuit, I asked for help to an old acquaintance. They helped me with this train controller and this controller that controls the train controller. They helped me with such things. At the crucial core part of the control circuit, I'll use this Arduino Due. Also, I need an interface board for the control circuit. I'll make a new one for the inverter. Now, let's start making the control board. I'll make it quick because this is a bit of a mundane task. I'm going to apply solder paste. This silver metal board is a stencil plate. I'm going to apply solder paste on it. Then, the solder paste will get onto the board through the holes on the stencil. Once you've finished applying the paste, check that the solder is properly applied on the board. If successful, it looks like this. The gray solder paste is perfectly applied on the board. This is a failure case. The solder paste is not aligned accurately. With this board, soldering won't be successful. Now I'll place 1.6 millimeters chip components and a little bit larger chip components. This one is the largest chip. Next, I'll place an electrolytic capacitor and a reset button. After mounting all the components, heat the boards on an electric griddle for about 3 minutes to melt the solder. This is how the solder melts. It's melting from the left side. It's really satisfying to see the components aligned by surface tension. I'll also solder these components. Now that all the components are soldered on the board, I'm going to combine it with this Arduino microcontroller. The board I made has legs on the back side. So you can combine it with the microcontroller. The control board is finished. The control circuit looks like this. I'll insert the cable of the train controller. When you push the lever to break, the controller's break lamps light up. The controller is working perfectly. When you pull the lever to accelerate, the acceleration lamps light up. The control circuit is really well made. Now that the control circuit is finished, I'll start making the main inverter circuit. As I mentioned earlier, the real doremifa inverter uses power semiconductors called GTO thyristors. However, the number of companies making GTO thyristors is decreasing, so it's hard to obtain one. The price is also a little high. What is more, it's hard to use. So this time, instead of GTO thyristors, I'll use these IGBTs. IGBTs are power semiconductors that are used in most trains that are currently running. IGBTs are easy to come by and aren't that expensive. Above all, it's easy to use. So this time I'll use IGBTs. You may wonder if the doremifa inverter sounds differently when GTO thyristors are used and when IGBTs are used. I don't think it affects the sound so much because sounds produced by an inverter is mostly determined by the control method of the control board. The main circuit of the inverter can be reused for my future projects, so I'll put more effort in making it. I'll use a fairly large industrial heat sink to ensure proper cooling. This fan that blows air onto the heat sink is also an industrial high-volume fan. Now let's assemble the main circuit. First, I'll fix the IGBTs on this huge heat sink. I'll drill holes in the heat sink and secure the IGBTs with screws. By the way, these IGBTs cost about 40 or 50 dollars each. Let's drill holes. A problem occurred. The cooling fan is louder than I expected. It's pretty noisy. The noise from the cooling fan may drown out the sound of the doremifa inverter. So I won't turn on the fan this time. The inverter doesn't produce so much heat, so it's fine. Let's attach the IGBTs. I'll apply silicone for heat dissipation on the surface of the IGBTs that faces the heat sink. I attached wires and filters. The main inverter circuit is complete. Lastly, I'll connect wires. This is the final look of the doremifa inverter. This is the train controller. It controls the rotation speed of the motor. Where is the train controller connected to? It's connected to this control circuit I made earlier. This is the main inverter circuit. I used IGBTs on it. Between the main inverter circuit and the control circuit, you can see a green circuit board. This circuit drives the IGBTs on the inverter. Wires from the main inverter circuit are connected to the motor. Through the wires, the inverter provides the voltage that is required to run the motor. Then the motor runs. That's how it works. Now let's actually run the motor. The motor speed has reached the rated speed. Now it's inertially rotating. Next, I'll accelerate gradually. I'll put the gear in 1. This is the view from the above. If you rewrite the code of this controller, you can change the decelerating sound. I was able to successfully make a doremifa inverter. By making a slight change to the code of the control board I made today, you can make the sounds of not only the singing train but also other trains. Thank you for watching!