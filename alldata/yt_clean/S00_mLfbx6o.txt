Hey everyone! It's Jakub Vanko for Capturing Reality. In this video I'm going to talk about control points. I will explain what they are good for, what they are not good for and how to place them both in 2D views and 3D views. Control points are good for merging components or refinement of existing alignments. They are not intended as a primary modeling tool. That means that you should always In this example project I already tried to align 32 images. This project was purposefully modified, so we get two separate components. This is component zero and this is component one. Component one contains a close-up of the facade and because the images from component one are too far away from the first set of images, RealityCapture could not connect them and needs our help. That's where control points come in. The control points tool is located in the alignment tab. Or you can use the shortcut F3 to work faster. When the tool is active, you see a small plus sign next to the mouse cursor. To disable the tool, click on the tool again, use F3 or use the right mouse button. First let's start by placing control points through 2D views only. I will switch the layout to OnePlus 2 plus 2 by pressing Alt 6. I will switch these 4 windows to 2D views and add a different color cursor to each view. To add a color cursor select the view and press Ctrl 1 to add blue. Ctrl 2 to add green, Ctrl 3 to add magenta and Ctrl 4 for coral. I will first assign all the images from Later, I will place them on images from the second component. For successful merging of the two components, control points need to be placed in both. Left mouse button clicked assign blue, two plus click for green, three plus click for magenta and four plus click for coral. Now I will remove the two components so our 1Ds is nice and clean. I will try to place the control points Now when I activate the tool with F3 and when I click and hold the left mouse button on the image, the view automatically zooms in and this crosshair appears. When I release the left mouse button To move the cursor just move the mouse. To zoom in and out use the scroll wheel. I like this spot for the first control point, so I will release the left mouse button and the control point is placed. When I click on the second image, RealityCapture will automatically zoom in on all images, that are looking at the same point for reference. This is the same spot, so I will release the left mouse button to place the control point. Now when we look in the 1Ds we can see that the control point is listed here. Here is the name of the control When I add measurements on the remaining two images, that will be also added to this list. Now when I try to add a control point to this image, that already has the control point number zero in it, it will create a new control point number one. RealityCapture knows that this image already has one control point, so it created a new one automatically. It was also added to the 1Ds and it is You always add measurements to the selected control point. Now I will add it to the remaining images. Let's continue with another control point here. A rule of thumb is to place the pick places with high contrast, so you can easily pick the same place on multiple images. Sometimes a mistake can happen, or maybe you just change your mind and find a better place for the control point. It is possible to adjust the control If I just left click on the control point it will be selected. But if I left click and hold, I can move it to the correct spot and release the mouse button to place it. Same as before I can move the crosshair and zoom in and out. Control point editing works even without the active control points tool. I will finish placing control point number two in the other three images. Let's add one more control point, so we have four in total. These four images will triangulate these four control points. In your projects define the control points on at least two to five images, but remember more images will provide more accuracy. What if I just want to select this view and move or zoom in the image. If the control point tool is active and I click here it will create another control point. If this happens you can always undo with Ctrl Z. To only select the view without placing the control point press and hold spacebar. With the pressed spacebar it is also Now let's take a look at navigation. When an image is selected the left and right arrow keys navigate through all of the images in the project. But when I select a measurement like this that belongs to control point number 0 up and down arrow keys can be used to move only through the measurements. I will show you another thing that can For example I will create a new control I will just approximately place it on all four images. Now I will adjust your position, add the Now left click and hold the control point, move it to the correct spot and press the down arrow key to confirm its position and move to the next one. Repeat it for all measurements. On the last measurement I will just release the left mouse button. It also works for the F arrow key to move up the list of measurements. To cancel this mode use the right mouse button. It is also possible to drag and drop control points. I will select this view and switch to a new image without any control points. To drag and drop a control point press and hold Ctrl click on the control point, move it to the image and release. Control points can also be dragged and dropped straight from the 1Ds view. You can use the method that suits you the most. I really don't need the last control point, so I will delete it. Great! I am finished with these images from the first component and now I will place the control points in the close-up images from the second component. I will keep one image as a reference and I will add the close-ups to the remaining 2D views. From here it is straightforward. I am just repeating the whole process all over again. Select the first control point and place it to all images like this. Same with the second and third control points. We recommend steering clear of placing control points near the edges of images, because these control points could Unfortunately the last control point is So in this case I have two options. I can change it or I can leave it be. To merge two components only three control points are necessary, but they If you have more points it will be more accurate. I decided to leave this control point and continue only with three control points. All that is left to do now is just to align again and see what happens. As we can see the two components were successfully merged in this new component. For a better view I will switch the layout to OnePlus One with Alpha 3, so we have a large 3D view. When I zoom in on the point cloud we can see, that the detail was added Now let's take a look at placing control points in 3D and image suggestions. A prerequisite for this workflow is that you already have an alignment, that means that you have a sparse point cloud in 3D space. Let's say that you align your project and you got multiple components. You want to merge them but the problem is to find the images where you should put the control points. It doesn't have to be a serious problem but imagine a situation when you have To overcome this we will use image suggestions. Activate the control points tool with F3 and when you hover the mouse cursor over the point cloud you will see a relation lines between the current point on the point cloud and cameras that can see this point. Also the 2D views will start to do something strange. I will explain in a bit. While my mouse cursor is in the 3D view I can press and hold the left mouse button to pan the view. When you press Ctrl you can also pan up and down. To zoom in and out use the mouse scroll wheel. Press and hold the right mouse button to rotate around the pivot. If you want to change the pivot, quickly double click with the left mouse button. To reset the pivot just press P on the keyboard. The 2D views deform, so the view angle is approximately the same as the view angle in the 3D view. Also the scale is approximately the same. So if I rotate my camera to directly face this door, RealityCapture will pick cameras that are facing the door head on. When I rotate my camera again to face this other wall RealityCapture will pick cameras that are facing this wall. Now I will zoom in near the place I want to place my control points. Notice that in the zoomed view, it is hard to tell where exactly my cursor is. So that is why RealityCapture will pick the best images that are looking at this spot, so you can comfortably place the control point using 2D views. When you confirm the control point, it is placed on a Proxy Mesh and the projection of this control point on all of these images has no error yet. That is because the control point so far has no effect for the alignment. To make an effect on the alignment, I need to confirm or adjust the control point in the suggested images. These gray relation lines in the 3D view have their meaning. You can see the angle between cameras, that can see the control point. You can even assign color cursors to these lines. To do so disable the control point tool by pressing F3 and assign cursors by pressing numbers from 1 to 4 and by clicking on them at the same time. You don't need to confirm the control point on all the suggested images just the ones, that are more beneficial. For example if I would confirm the control point on these three images, there can still be some error in depth of the control point. If I choose these three images the view angle between them is greater, so they are looking at the control point from different perspectives. And there will be less error in depth of the control point. Now I will confirm the control points I will use the fast workflow like I did earlier in this video. The add control point tool doesn't have to be active for this, because I am only editing an existing control point. First, I will select the image. Click and drag the control point where I want it to be and the down arrow key confirms its position and switches to the next suggestion. You can cancel this operation at any time with the right mouse button or you can use the delete key to delete suggestions if they are blurry or you are not sure This way I will quickly confirm a couple of suggestions. During this RealityCapture may give you new suggestions. When I slightly adjusted the control point's position, RealityCapture could triangulate it more accurately and estimate that also this camera could possibly see it. I can also confirm the suggestion or I can clear it. To clear suggestions select one or multiple control points then click on clear suggestions. To get them back you first need to unban them and suggest the measurements again. Now let's quickly add the rest of the control points. You don't have to place them very accurately on the point cloud, because you will adjust the control point positions later in the image suggestions. I will use the same spots as before in the previous project. Just a reminder I am using F3 to enable or disable the control point tool. Once they are placed in the 3D, I disable the tool and adjust the control points position in the image suggestions. I click and hold the control point, move it to the correct spot and use the down arrow key to confirm and switch You can also use the app arrow key to move the previous image. At any time you can disable the process with the right mouse button or use the delete key on a blur image to delete the suggestion and switch to the next one. We are done with the first component and now we have to place the control points in the second component. For the sake of demonstration, let's simulate a mistake. Currently I don't have any control points selected. When I activate the control point tool and place the control point, I create a new one. Control point number three. To fix this, you can easily drag and drop the control point in the 1Ds view. Just click and hold on point 3 and drag and drop it over point 0. This moves all of the image suggestions even if they are already confirmed. Now let's confirm them. Notice that for some images we just see these lines in the 1Ds view. RealityCapture can not calculate the error for these images, because they are not present in the selected component. If I select component 0 all of these images will be known except these two will be unknown. Let's finish up with the rest of the control points in the second component. This time I made sure that I have the proper control point number one selected, but I purposefully place the control point a little off the place I want, just to demonstrate to you another thing. I will soon get back to it, I just So, this is the control point I clicked little off from the place I wanted. That is not a problem. I will confirm the first suggestion at the correct place and now when I confirm the second suggestion rest of the suggestions will follow. Did you notice how the control point jumped in the 3D view? That is, because it was retriangulated in 3D space from the two confirmed image suggestions. Now I will finish with the rest of the suggestions. I will speed up the video a bit, because I am repeating the same process all over again. I am done with the image suggestions, all that is left to do now is to click on align images or merge components. The difference between them is that aligned images will emerge the components but it also tries to find new images or images that were not aligned at all. Merge components is self-explanatory. It just merges the components and it does not add unaligned or new images. And here we have our merge component. I will change the layout to OnePlus One by pressing Alt 3. And I will change the 2D view to 3D, just so we can see the component in a large view. Here are the images from the first component. And here are the images from the second component. Just a reminder that this project was created just for this tutorial and it is not a good example of how you should take images for RealityCapture. When I open the inspect tool from the alignment tab or you can use the shortcut I and inspect the camera relations you can see that there is no visual connection between these cameras. They were only aligned thanks to the control points. That is also the reason these images I would also like to mention a couple of tips before we finish. Suggestions can be added also through 2D views, you just need to have an existing alignment. I will pick one image, activate the control point tool with F3 and add a new control point number 3. When I select another image and add the control point number 3 there, you can immediately see it in the 3D view. RealityCapture also gave me a couple of new image suggestions, that could possibly see this point. Sometimes this is much easier than placing control points in 3D space. In this project I imported the components from the previous projects. Imported components have this star icon in the 1Ds view. Component 0 contain point number 0, point 1 and point 2. Component 1 contain control points 0, 1 and 2. They are the same, but they have slightly different names. I already showed you how to drag It is not much work when dealing with 32 images, 2 components and 3 control points, but it can be very useful with large projects with thousands of images and tens of control points. And that is all I wanted to go over. Do not use control points as a primary modeling tool, instead add meaningful images when possible. Use control points as a last resort to merge components, to increase quality in alignments and to fix misalignments. Hopefully after this tutorial you will know exactly how to use control points in RealityCapture.