Welcome to Jeremy's IT Lab. This is a free, complete course for the CCNA. If you like these videos, please subscribe Also, please like and leave a comment, and of videos. Thanks for your help. In this video we will look at another topic, EtherChannel allows you to group multiple as a single logical interface, so they behave There are many benefits to this, and I'll By the way, this video covers topic 2.4 of that you must be able to configure and verify called LACP, Link Aggregation Control Protocol. So, what will we cover in this video? First off, I'll show you what EtherChannel Here's a hint, spanning tree protocol is We will also look at multiple methods of configuring A Layer 2 etherchannel is a group of switch and a Layer 3 etherchannel is a group of routed which you assign an IP address to, because Make sure you watch until the end of the video ExSim, the best practice exams for the CCNA. I used Boson ExSim to help me prepare for it was the key that allowed me to pass Okay, let's get started with the video. So, let me demonstrate a problem. We have two switches here, ASW1 and DSW1. I will talk about basic network design later which is a switch that end hosts like PCs DSW stands for distribution layer switch, connect to. For this demonstration, let's say there say 40 hosts, and they are all trying to access The network administrator notices that the that he should add another link to increase end hosts. So, the network admin adds another link, and However, the additional link doesn't seem The connection between ASW1 and DSW1 is still So, the admin decides to add another link He adds another link to the connection between Surely, this will be sufficient. The total bandwidth of the connections to of the connection to DSW1, but that's okay, a constant state of sending and receiving I will talk more about this later in the course, to end hosts is greater than the bandwidth this is called oversubscription. Some oversubscription is acceptable, but too However, even with three links to DSW1 the network admin once again decides to add another So, now there are four links between ASW1 Do you think things have improved? Well, they haven't, the connection between Why is this? You should be able to figure out the answer. Here's a hint, think about what you just If you know the answer, well done, if not Let's say the administrator went to physically What color do you think they were? Well, the network admin checks DSW1 and all seem to be a problem. However, when he checks ASW1 he notices that, is green, and the others are orange. Why is that? It's because of what we studied in the past If you connect two switches together with by spanning tree. Why does it do this? Well, if all of ASW1's interfaces were forwarding, DSW1, leading to broadcast storms. Other links will be unused unless the active In that case, one of the inactive links will So, although having backup links is a good reasons, it's a waste of bandwidth to have any traffic. However, by forming these four physical interfaces solve this problem, giving us both redundancy An EtherChannel is represented in network that are grouped together, like this. EtherChannel groups multiple interfaces together STP will treat this group as a single interface. So, after grouping these interfaces into an checks the link lights. This time they are all green. Won't this cause a Layer 2 loop? Actually no, because this group of four links For example, let's say a PC sends a broadcast So, it is flooded out all interfaces on ASW1. All of the PCs connected to ASW1 will receive Now, how many copies of the frame will DSW1 Remember, although there are four physical The answer is, DSW1 will only receive one This EtherChannel makes these four physical won't sent four copies of the same broadcast Traffic using the EtherChannel will be load the group. An algorithm is used to determine which traffic I will give you more details on this later. So, DSW1 received the broadcast frame. What will it do now? It will flood the broadcast frame out of all on. So let's say DSW1 has these two other links Which interfaces will DSW1 forward the frame Only these two. Why didn't it forward the frame out of the I'll repeat it once more, although this interfaces, they behave as a single interface. DSW1 won't send the broadcast frame back on. So it isn't forwarded back to ASW1, and It's kind of like this, instead of four interfaces, connecting ASW1 to DSW1, it's interface. The bandwidth of the four separate interfaces a virtual four-gigabit interface. The difference between the physical characteristics of a network are something you need to understand For example we studied VLANs. Multiple PCs can all be connected to the same VLANs virtually divide these PCs into separate LAN. Likewise, these interfaces exist as four separate virtual interface. Some other names for an EtherChannel are a Aggregation Group. You'll see that, to configure an etherchannel terms. Now let's take a look at how etherchannel It load balances based on 'flows'. What is a flow? A flow is a communication between two nodes So for example, between PC1 and SRV1. By the way, you usually won't see a server layer switch, these are also end hosts which Just to simplify this network diagram I'll So, let's say PC1 initiates an exchange to do so. The frame is received by ASW1, and assuming it will forward the frame out of the port However, which physical interface will it Well, there is an algorithm it uses to calculate actually be sent on, let's say it determines Now, when PC1 sends the next frame in the SRV1, the same interface will be used to forward So, the point is that frames in the same flow interface. If frames in the same flow were forwarded frames may arrive at the destination out of Some applications can deal with frames arriving Now, if PC1 wants to print something and initiates will once again forward the frame using its However, it will make a separate calculation be used for the flow. For example, it might determine that this Just like before, when PC1 sends another frame the etherchannel will be used to forward it. How about if PC2 also wants to print something? It sends the first frame in the flow to ASW1, which physical interface in the etherchannel perhaps this one is used. So, this is how EtherChannel performs load in the etherchannel for different flows. The calculation that is done to determine account a few inputs. Actually, you can change the inputs used in Here are the inputs that can be used. Source MAC address. So, all frames with the same source MAC address etherchannel. Or, destination MAC address. In this case, all frames with the same destination interface. You can also use both the source AND destination So for example, frames from PC1 to SRV1 will from PC2 to SRV1 will always use a certain than the one used for traffic from PC1 to different interface, etc. The calculation is done based on both the You can also configure etherchannel to select destination IP address, or both source AND Some switches also support load-balancing but those are a topic for another lesson. Also, which methods the switch can use depends using the MAC addresses, some may support all methods. So, we haven't actually configured an etherchannel take a look at how to check and configure Use the command SHOW ETHERCHANNEL LOAD-BALANCE You can see the default for this model of and destination IP addresses. So, for example, all traffic from 10.0.0.1 use a certain physical interface within the Down here you can see a more specific breakdown. Frames which encapsulate IP packets, whether on the source and destination IP addresses. However, notice at the top it says non-IP Well, that's because if an IP packet isn't is no IP address that can be used to determine used instead. Now, as for how to change the load-balancing command. PORT-CHANNEL LOAD-BALANCE, followed by the In this case I changed it to use the source Then I confirmed once more, and you can see successfully changed. By the way, here are the choices available It can load-balance based on MAC or IP addresses, on either the source, the destination, or Now, I want to point out one thing which is on Cisco devices. What keyword do you use to configure the load-balancing method? PORT-CHANNEL. And what keyword do you use to view the load-balancing ETHERCHANNEL. Different words are used for the same thing, Actually, later you'll find that there is So, these are the first two commands to remember SHOW ETHERCHANNEL LOAD-BALANCE, to check the And, PORT-CHANNEL LOAD-BALANCE, followed by load-balancing. Now let's get into actually creating an There are three methods of EtherChannel configuration. First up is PAgP, which stands for Port Aggregation It is a Cisco proprietary protocol, so it If you're trying to form an EtherChannel use PAgP. Now, what does PAgP do? It dynamically negotiates the creation and Just a few days ago we covered DTP, which Frames are sent to the neighboring switch and then the switches agree upon either forming Okay, the next method of configuration is Protocol. It is an industry standard protocol, once is 802.3ad. Basically, it does the same thing as PAgP. It dynamically negotiates the creation and does for trunks. Because it is an industry standard protocol, it can be used to form EtherChannels with Because of this, LACP is the preferred method Actually, the exam topics list only states However, for the test you really should be reason Cisco's exam topics lists aren't So, the last method is static EtherChannel. In this case a protocol isn't used to determine Instead, interfaces are statically configured This is usually avoided, because you want for example you want the switch to remove is some sort of problem on the interface. Okay, finally, up to 8 interfaces can be formed Actually, LACP allows up to 16, but only 8 mode, waiting for an active interface to fail. So let's look into how to configure each The configuration for each is almost identical, First I used the interface range command to once. This is a good idea for EtherChannel, because must match, so if you configure them all at I'll talk more about that after I show you Anyway, to actually configure the EtherChannel CHANNEL-GROUP, followed by a number that identifies can see I used the question mark to see what There are five options, two of them are used etherchannel. These two are used for PAgP. Do you recognize these names from another DTP used the same modes to form trunks, and same. Desirable mode actively tries to form an EtherChannel, if the other side is set to desirable, but So here's a summary. If both sides of the connection are set to However, auto and desirable, or desirable Anyway, I decided to configure this side as You can see that the virtual port-channel used in the channel-group command. You can see it here in the output of the SHOW So, remember that the CHANNEL-GROUP command the name of the virtual interface that is By the way, this channel group number has however it DOESN'T have to match the channel-group For example, channel-group 1 on ASW1 can form The number is just used to identify the virtual Because you can have multiple etherchannels identify them. Next let's look at LACP configuration. After explaining all of that, there's not Just notice that mode names are different. Instead of desirable, LACP uses active mode. And instead of auto, LACP uses passive mode. So, if both ends are configured in passive However, active and passive, or active and In this case, I configured this side as active. Once again, the port-channel interface is Note that, even if you configure both sides be created on each switch. However, it won't actually be functioning mode. So, as you can see the command is basically Once again, the channel-group number has to switch, but it doesn't have to match the Finally, let's see how static EtherChannel There aren't two separate modes, just one, to form an EtherChannel. This will create a port-channel interface, By the way, on mode only works with on mode. On and desirable, or on and active will not Another command you should know is the CHANNEL-PROTOCOL command. This manually configures the EtherChannel should use. This actually isn't a very useful command, If you configure CHANNEL-GROUP 1 MODE DESIRABLE use PAgP, or if you configure CHANNEL-GROUP automatically use LACP. So, there isn't really a point in using However, I think you should know it for the Of course there are two options, LACP and Then I tried the CHANNEL-GROUP 1 MODE DESIRABLE protocol mismatch. I manually configured these interfaces to so the command was rejected. If I try CHANNEL-GROUP 1 MODE ON it is rejected Then I do CHANNEL-GROUP 1 MODE ACTIVE, and LACP. So, after configuring the EtherChannel, in can then configure the port-channel interface Note that I'm just using the LACP example same regardless of which method you use. I also did the same configurations over on I entered interface config mode for the port-channel Now in the output of SHOW INTERFACES TRUNK, is a trunk. Notice that the individual physical interfaces interface. Here's a section of the output of SHOW RUNNING-CONFIG. There's something interesting to notice The trunk configurations that I configured to the physical interfaces, I didn't manually Now, one more important point about EtherChannel Member interfaces, the physical interfaces What do I mean by that? They must have the same duplex setting. They must have the same speed. They must have the same switchport mode, meaning If they are a trunk, they must have the same If an individual interface's configurations from the EtherChannel. When it comes to verifying the status of an useful command is SHOW ETHERCHANNEL SUMMARY. Down here is a list of the port-channel interfaces Next to port-channel 1 it has two flags, an To check the meaning of these, look at the S means it is a Layer 2 etherchannel. S stands for switchport, by the way. U means in use, meaning the EtherChannel is Next to the physical ports there is the flag This means that these ports are properly bundled These are the flags you want to see in an Now, let's take a look at a couple situations So, I shutdown the port-channel 1 interface. Now next to both the port-channel interface flag 'D'. That means down. Okay, I'll enable the interface again and Now I changed one of the member interfaces Now it has the lower-case 's' flag. Note that this is different than the upper-case It means suspended. So, only G0/0 is suspended, but the EtherChannel G0/1, 2, and 3. Another command you can use is SHOW ETHERCHANNEL PORT-CHANNEL. You can see the number of ports in the port-channel, One important bit of information that you but is displayed in this command is the channel-group the CHANNEL-GROUP 1 MODE ACTIVE command earlier. However, for EtherChannel the most common SHOW ETHERCHANNEL SUMMARY. I just wanted to show you one other option. Because I started this video talking about when EtherChannel is configured. As you can see, only the port-channel interface appear in the output of this command at all. So, as I said earlier, spanning-tree is treating logical interface. Instead of blocking three of them, they can of Layer 2 loops. To close off this lecture, let's take a I've replaced ASW1 and DSW1 with multilayer Instead of a Layer 2 connection between them, Modern network design often leans toward using that way spanning-tree won't be an issue We could have four switches interconnected with Layer 3 routed ports, all interfaces to be disabled due to spanning tree. Now you may be thinking, didn't you just doesn't have to block any ports? Well, we're just looking at a connection Even if we're using EtherChannel, Layer are connected together in a loop. For example, look at this diagram. All of the connections between switches are any of the port-channel interfaces, broadcasts and cause a broadcast storm. So, spanning-tree will block one of these However, if all of these connections between Layer 2 switchports, there is no need to run Routed ports don't forward Layer 2 broadcasts, You already know how to configure routed ports Let's see how to configure a Layer 3 EtherChannel. So, starting from a clean configuration, no ASW1. I enter interface range config mode for the the CHANNEL-GROUP command, I use the NO SWITCHPORT Then, after using the CHANNEL-GROUP command, Notice that the port-channel interface that applied to it automatically. Now, since we're making a Layer 3 etherchannel, Where do you think it should be configured? It should be configured on the port-channel So, there it is. Now, let's check the SHOW ETHERCHANNEL SUMMARY So, the only difference in the output is that has the 'R' flag. What does that mean? It means it is a Layer 3 EtherChannel, R stands In the output of SHOW IP INTERFACE BRIEF, 1. So, now ASW1 and DSW1 are like two routers They are connected at Layer 3 and spanning-tree However, just like with the Layer 2 EtherChannel, four member interfaces. Okay let's quickly review the commands we First is PORT-CHANNEL LOAD-BALANCE, followed model, can involve MAC addresses, IP addresses, source, destination, or both source and destination interface is used to forward any specific To view the current EtherChannel load-balancing To configure an interface to be part of an followed by the port-channel number, MODE, AUTO, ACTIVE, PASSIVE, or ON. The most useful show command for EtherChannel summary of all of the EtherChannels on the One more show command you can use is SHOW some more detailed information about the port-channel Those are all of the commands we learned today. Of course, there are many more commands that deeper into the concept of EtherChannels. As long as you understand their basic purpose you should be good for the CCNA. Okay let's go to today's quiz. Watch until the end of the quiz for a bonus a doubt the best practice exams for the CCNA, CCNA and CCNP exams. Let's go to question 1 of the quiz. Which of the following channel-group mode EtherChannel? Choose three. A, on - on. B, passive - passive. C, desirable - auto. D, auto - auto. E, active - desirable. F, on - desirable. Or G, active - active. Pause the video to think about your answer. The answers are A, C, and G. A, on - on, creates a static EtherChannel, the EtherChannel. C, desirable - auto, creates an EtherChannel G, active - active, creates an EtherChannel So, A, C, and G are the correct answers. B, passive - passive won't create an etherchannel try to form an etherchannel. Same for D, PAgP auto mode doesn't actively E, active - desirable, and F, on - desirable, won't result in a valid EtherChannel configuration. Let's go to question 2. In the output of the show etherchannel summary in the EtherChannel you configured have the What does this mean? A, the interfaces are in LACP passive mode. B, the interfaces are bundled in the port-channel. C, the interfaces are paused until the other Or D, the etherchannel is a Layer 2 EtherChannel. Pause the video to think about your answer. The answer is B, the interfaces are bundled This is the flag you want to see next to the Here's some sample output of SHOW ETHERCHANNEL As you can see, P means the port is bundled Let's go to question 3. Which of the following member interface parameters Choose two. A, Interface ID. B, IP address. C, interface speed. Or D, switchport mode, access or trunk. Pause the video to think about your answer. The answers are C, interface speed, and D, These are two of the settings that have to A, interface ID, is unique to each interface, And even if you're configuring a Layer 3 have IP addresses, the IP address must be So B, IP address, is also incorrect. Okay, next let's take a look at a question Okay, for today's Boson ExSim practice question And this is a really good question, quite So let's take a look. You issue the following commands on SwitchA So let's see the commands. First, INTERFACE PORT-CHANNEL 1. So, this isn't necessary but it creates the the INTERFACE RANGE command. So this virtual port-channel exists, the interface made members of that virtual interface. Okay, then we enter the INTERFACE RANGE command We manually configure the channel protocol, And then finally we use the CHANNEL-GROUP Now normally, as I showed you in this video, port-channel interface is automatically created, Okay, so that's SwitchA. CHANNEL-PROTOCOL LACP, CHANNEL-GROUP 1 MODE How about SwitchB? Again, we create the virtual port-channel Enter interface range config mode for FastEthernet0/5 and 6, this time we manually configure the protocol as PAgP, before once again doing So, which of the following statements is true SwitchA and SwitchB? Select the best answer. A, a link is formed using LACP because it As you can see here, LACP was configured first. B, no link is formed. Okay, C, a link is formed using PAgP because So, it was configured here on SwitchB. And then D, a link is formed without an aggregation So you see both of these switches used the This configure static protocol (*EtherChannel), So, what do you think is the answer? Pause the video here to think about it. Okay, hopefully you got the answer. I think the correct answer is B, no link is Now, why is that? So, first you create the port-channel interface. So it does exist, the virtual interface. Then you manually configure the channel protocol But when you use the command CHANNEL-GROUP to join this port-channel interface, to join The CHANNEL-GROUP 1 MODE ON command. Because we already manually configured LACP, are ACTIVE and PASSIVE. MODE ON will not work, the command will be And then same thing on SwitchB. This time instead of LACP it's PAgP. So you manually configured the channel-protocol exists, these interfaces won't actually join will be rejected. So, I think B is the correct answer. Let's check. And indeed it is. So here is Boson's explanation, quite a lengthy, And this is something really great about ExSim. If you're ever unsure about why B is correct, all of these great, in-detail explanations And then finally, at the end there are references. This is to the official cert guide, EtherChannel And then also two links to Cisco documentation, a great study resource. Okay, so that's today's Boson ExSim practice If you want to get a copy of Boson ExSim, I really like these practice exams. I used them myself for my CCNA and CCNP, so them to you. So once again, follow the link in the video There are supplementary materials for this There is a flashcard deck to use with the There will also be a packet tracer practice That will be in the next video. Sign up for my mailing list via the link in the flashcards and packet tracer lab files Before finishing today's video I want to Thank you to funnydart, Joshua, Scott, Aleksa, Samil, Velvijaykum, C Mohd, Johan, Mark, Miguel, of ExSim, Sidi, Magrathea, Devin, Charlsetta, Sorry if I pronounced your name incorrectly, One of you is still displaying as Channel me know and I'll see if YouTube can fix This is the list of JCNP-level members at 2020, if you signed up recently and your name in future videos. Thank you for watching. Please subscribe to the channel, like the with anyone else studying for the CCNA. If you want to leave a tip, check the links I'm also a Brave verified publisher and accept Brave browser. That's all for now.